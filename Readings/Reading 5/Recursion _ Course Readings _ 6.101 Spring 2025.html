<!DOCTYPE html>
<html><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<!-- This page was generated by CAT-SOOP 19.0.6+hg.14.f36ce1d1.  miau. -->
<meta charset="utf-8">
<title>Recursion | Course Readings | 6.101 Spring 2025</title>
<link href="Recursion%20_%20Course%20Readings%20_%206.101%20Spring%202025_files/logo.gif" rel="icon" type="image/gif">
<!-- include catsoop base css -->
<link href="Recursion%20_%20Course%20Readings%20_%206.101%20Spring%202025_files/base.css" rel="stylesheet" type="text/css">
<!-- set up JS namespace for catsoop -->
<script type="text/javascript">
    // @license magnet:?xt=urn:btih:0b31508aeb0634b347b8270c7bee4d411b5d4109&dn=agpl-3.0.txt AGPL-v3
    var catsoop = {plugins: {}};

    function toggleResponsiveHeader(){
        document.getElementsByTagName('header')[0].classList.toggle('responsive');
    }

    function toggleAttribute(elt, attr){
        elt.setAttribute(attr, elt.getAttribute(attr) === "true" ? "false" : "true");
    }

    catsoop.topMenuFocus = function(event) {
        var elt = event.target;
        var target = event.relatedTarget;
        if (elt.classList.contains('menu-submenu')){
            var topmenu = elt.parentNode.parentNode;
            if (target && !target.classList.contains("menu-submenu") && target !== topmenu.children[1]) {
                clearMenu(topmenu);
            }
        }else if (!target.classList.contains('cs_top_menu_item')){
            clearMenu(elt.parentNode);
        }
    }

    window.addEventListener('DOMContentLoaded', function(){
        var menu_boxes = document.getElementsByClassName('dropdown-checkbox');
        for(var i=0; i<menu_boxes.length; i++){
            menu_boxes[i].checked = false;
        }
    });

    function clearMenu(menu){
       menu.children[1].checked = false;
    }
    // @license-end
    </script>
<!-- dark mode -->
<script src="Recursion%20_%20Course%20Readings%20_%206.101%20Spring%202025_files/darkreader.min.js" type="text/javascript"></script>
<script type="text/javascript">
    // @license magnet:?xt=urn:btih:0b31508aeb0634b347b8270c7bee4d411b5d4109&dn=agpl-3.0.txt AGPL-v3
    catsoop.dark_mode_settings = null;
    if (catsoop.dark_mode_settings === null){
        catsoop.dark_mode_settings = JSON.parse(localStorage.getItem('catsoop_dark_mode_settings'));
        if (catsoop.dark_mode_settings === null){
            catsoop.dark_mode_settings = {'mode': 'disabled', 'brightness': 100, 'contrast': 90, 'sepia': 10, 'grayscale': 0};
        }
    }
    localStorage.setItem('catsoop_dark_mode_settings', JSON.stringify(catsoop.dark_mode_settings));
    catsoop.dark_mode = catsoop.dark_mode_settings.mode;
    delete catsoop.dark_mode_settings.mode;
    if (catsoop.dark_mode === 'enabled' || catsoop.dark_mode === 'auto'){
        DarkReader[catsoop.dark_mode == 'enabled' ? 'enable' : 'auto'](catsoop.dark_mode_settings);
    }
    
    document.addEventListener("DOMContentLoaded", function(event) {
        if (DarkReader.isEnabled()) {
            var invertfilter = 'invert(100%) hue-rotate(180deg)' +
                               ' brightness(' + catsoop.dark_mode_settings.brightness + '%)' +
                               ' contrast(' + catsoop.dark_mode_settings.contrast + '%)' +
                               ' grayscale(' + catsoop.dark_mode_settings.grayscale + '%)' +
                               ' sepia(' + catsoop.dark_mode_settings.sepia + '%)'
            var inverter = document.createElement('style');
            inverter.innerText = 'img.catsoop-darkmode-invert, video.catsoop-darkmode-invert {filter: ' + invertfilter + ';}\n\n'
            document.head.appendChild(inverter);
        }
    });
    // @license-end
    </script>
<!-- load in mathjax and CAT-SOOP-specific math rendering  -->
<script type="text/javascript">
    // @license magnet:?xt=urn:btih:0b31508aeb0634b347b8270c7bee4d411b5d4109&dn=agpl-3.0.txt AGPL-v3
    MathJax = {
      startup: {
        typeset: false,
      }
    }

    catsoop.render_math = function (elt) {
        if(elt.classList.contains('cs_displaymath')){
            var b = "\\[";
            var e = "\\]";
        }else{
            var b = "\\(";
            var e = "\\)";
        }
        elt.innerText = b + elt.innerText + e;
        MathJax.typeset([elt]);
        elt.classList.remove('cs_math_to_render');
    }


    catsoop.render_all_math = function (elt){
        if (elt === null) {
            return;
        }
        var mathelts = elt.getElementsByClassName('cs_math_to_render');
        while(mathelts.length > 0){
            catsoop.render_math(mathelts[0]);
        }
    }
    document.addEventListener("DOMContentLoaded", function(event) {
          catsoop.render_all_math(document);
    });
    // @license-end
    </script>
<script id="MathJax-script" src="Recursion%20_%20Course%20Readings%20_%206.101%20Spring%202025_files/tex-chtml-full-speech.js"></script><style type="text/css">.CtxtMenu_InfoClose {  top:.2em; right:.2em;}
.CtxtMenu_InfoContent {  overflow:auto; text-align:left; font-size:80%;  padding:.4em .6em; border:1px inset; margin:1em 0px;  max-height:20em; max-width:30em; background-color:#EEEEEE;  white-space:normal;}
.CtxtMenu_Info.CtxtMenu_MousePost {outline:none;}
.CtxtMenu_Info {  position:fixed; left:50%; width:auto; text-align:center;  border:3px outset; padding:1em 2em; background-color:#DDDDDD;  color:black;  cursor:default; font-family:message-box; font-size:120%;  font-style:normal; text-indent:0; text-transform:none;  line-height:normal; letter-spacing:normal; word-spacing:normal;  word-wrap:normal; white-space:nowrap; float:none; z-index:201;  border-radius: 15px;                     /* Opera 10.5 and IE9 */  -webkit-border-radius:15px;               /* Safari and Chrome */  -moz-border-radius:15px;                  /* Firefox */  -khtml-border-radius:15px;                /* Konqueror */  box-shadow:0px 10px 20px #808080;         /* Opera 10.5 and IE9 */  -webkit-box-shadow:0px 10px 20px #808080; /* Safari 3 & Chrome */  -moz-box-shadow:0px 10px 20px #808080;    /* Forefox 3.5 */  -khtml-box-shadow:0px 10px 20px #808080;  /* Konqueror */  filter:progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color="gray", Positive="true"); /* IE */}
</style><style type="text/css">.CtxtMenu_MenuClose {  position:absolute;  cursor:pointer;  display:inline-block;  border:2px solid #AAA;  border-radius:18px;  -webkit-border-radius: 18px;             /* Safari and Chrome */  -moz-border-radius: 18px;                /* Firefox */  -khtml-border-radius: 18px;              /* Konqueror */  font-family: "Courier New", Courier;  font-size:24px;  color:#F0F0F0}
.CtxtMenu_MenuClose span {  display:block; background-color:#AAA; border:1.5px solid;  border-radius:18px;  -webkit-border-radius: 18px;             /* Safari and Chrome */  -moz-border-radius: 18px;                /* Firefox */  -khtml-border-radius: 18px;              /* Konqueror */  line-height:0;  padding:8px 0 6px     /* may need to be browser-specific */}
.CtxtMenu_MenuClose:hover {  color:white!important;  border:2px solid #CCC!important}
.CtxtMenu_MenuClose:hover span {  background-color:#CCC!important}
.CtxtMenu_MenuClose:hover:focus {  outline:none}
</style><style type="text/css">.CtxtMenu_Menu {  position:absolute;  background-color:white;  color:black;  width:auto; padding:5px 0px;  border:1px solid #CCCCCC; margin:0; cursor:default;  font: menu; text-align:left; text-indent:0; text-transform:none;  line-height:normal; letter-spacing:normal; word-spacing:normal;  word-wrap:normal; white-space:nowrap; float:none; z-index:201;  border-radius: 5px;                     /* Opera 10.5 and IE9 */  -webkit-border-radius: 5px;             /* Safari and Chrome */  -moz-border-radius: 5px;                /* Firefox */  -khtml-border-radius: 5px;              /* Konqueror */  box-shadow:0px 10px 20px #808080;         /* Opera 10.5 and IE9 */  -webkit-box-shadow:0px 10px 20px #808080; /* Safari 3 & Chrome */  -moz-box-shadow:0px 10px 20px #808080;    /* Forefox 3.5 */  -khtml-box-shadow:0px 10px 20px #808080;  /* Konqueror */}
.CtxtMenu_MenuItem {  padding: 1px 2em;  background:transparent;}
.CtxtMenu_MenuArrow {  position:absolute; right:.5em; padding-top:.25em; color:#666666;  font-family: null; font-size: .75em}
.CtxtMenu_MenuActive .CtxtMenu_MenuArrow {color:white}
.CtxtMenu_MenuArrow.CtxtMenu_RTL {left:.5em; right:auto}
.CtxtMenu_MenuCheck {  position:absolute; left:.7em;  font-family: null}
.CtxtMenu_MenuCheck.CtxtMenu_RTL { right:.7em; left:auto }
.CtxtMenu_MenuRadioCheck {  position:absolute; left: .7em;}
.CtxtMenu_MenuRadioCheck.CtxtMenu_RTL {  right: .7em; left:auto}
.CtxtMenu_MenuInputBox {  padding-left: 1em; right:.5em; color:#666666;  font-family: null;}
.CtxtMenu_MenuInputBox.CtxtMenu_RTL {  left: .1em;}
.CtxtMenu_MenuComboBox {  left:.1em; padding-bottom:.5em;}
.CtxtMenu_MenuSlider {  left: .1em;}
.CtxtMenu_SliderValue {  position:absolute; right:.1em; padding-top:.25em; color:#333333;  font-size: .75em}
.CtxtMenu_SliderBar {  outline: none; background: #d3d3d3}
.CtxtMenu_MenuLabel {  padding: 1px 2em 3px 1.33em;  font-style:italic}
.CtxtMenu_MenuRule {  border-top: 1px solid #DDDDDD;  margin: 4px 3px;}
.CtxtMenu_MenuDisabled {  color:GrayText}
.CtxtMenu_MenuActive {  background-color: #606872;  color: white;}
.CtxtMenu_MenuDisabled:focus {  background-color: #E8E8E8}
.CtxtMenu_MenuLabel:focus {  background-color: #E8E8E8}
.CtxtMenu_ContextMenu:focus {  outline:none}
.CtxtMenu_ContextMenu .CtxtMenu_MenuItem:focus {  outline:none}
.CtxtMenu_SelectionMenu {  position:relative; float:left;  border-bottom: none; -webkit-box-shadow:none; -webkit-border-radius:0px; }
.CtxtMenu_SelectionItem {  padding-right: 1em;}
.CtxtMenu_Selection {  right: 40%; width:50%; }
.CtxtMenu_SelectionBox {  padding: 0em; max-height:20em; max-width: none;  background-color:#FFFFFF;}
.CtxtMenu_SelectionDivider {  clear: both; border-top: 2px solid #000000;}
.CtxtMenu_Menu .CtxtMenu_MenuClose {  top:-10px; left:-10px}
</style>
<!-- load in diagram stuff -->
<script src="Recursion%20_%20Course%20Readings%20_%206.101%20Spring%202025_files/cs_diagrams.js" type="text/javascript"></script>
<script type="text/javascript">
        catsoop.diagram_sources = {};
    </script>
<!-- Syntax Highlighting -->
<script src="Recursion%20_%20Course%20Readings%20_%206.101%20Spring%202025_files/highlight.min.js" type="text/javascript"></script>
<script src="Recursion%20_%20Course%20Readings%20_%206.101%20Spring%202025_files/highlightjs-line-numbers.js" type="text/javascript"></script><style type="text/css">.hljs-ln{border-collapse:collapse}.hljs-ln td{padding:0}.hljs-ln-n:before{content:attr(data-line-number)}</style>
<script type="text/javascript">
    // @license magnet:?xt=urn:btih:0b31508aeb0634b347b8270c7bee4d411b5d4109&dn=agpl-3.0.txt AGPL-v3
    catsoop.syntax_highlighting = function (elt) {
        if (elt === null) {
            return;
        }
        elt.querySelectorAll('pre > code:not(.highlighted)').forEach((block) => {
            hljs.highlightBlock(block);
            var wrap = document.createElement("section");
            wrap.setAttribute("aria-label", "Code block");
            block.parentNode.replaceWith(wrap);
            wrap.append(block.parentNode);
            block.classList.add('highlighted');
        });
        elt.querySelectorAll('code.highlight-lines').forEach(function(b){
            hljs.lineNumbersBlock(b);
            if ((b.innerHTML.trim().match(/\r\n|\r|\n/g) || []).length > 0){
                b.parentElement.style = "padding-left: 0px !important;"
                b.classList.add('hljs');
            }
            b.classList.remove('highlight-lines');
        });
    }
    window.addEventListener('DOMContentLoaded', function(){
        catsoop.syntax_highlighting(document);
    });
    // @license-end
    </script>
<style>
      :root {
        --cs-base-bg-color: #0350ba;
        --cs-light-bg-color: #629ced;
        --cs-base-font-color: #fff;
        --cs-light-font-color: #000;
    }
    </style>
<style>
.cs_top_menu_item {
  font-size: 0.88rem;
}
div.dropdown {
  -moz-transform: translateY(-1px);
}
img {
  max-width:100% !important;
}
.visually-hidden {
	position: absolute !important;
	width: 1px !important;
	height: 1px !important;
	padding: 0 !important;
	margin: -1px !important;
	overflow: hidden !important;
	clip: rect(0,0,0,0) !important;
	white-space: nowrap !important;
	border: 0 !important;
}
kbd {
  background-color: #eee;
  border-radius: 3px;
  border: 1px solid #b4b4b4;
  box-shadow:
    0 1px 1px rgba(0, 0, 0, 0.2),
    0 2px 0 0 rgba(255, 255, 255, 0.7) inset;
  color: #333;
  display: inline-block;
  font-size: 0.85em;
  font-weight: 700;
  line-height: 1;
  padding: 2px 4px;
  white-space: nowrap;
}
</style>
<style>
[id^=cs_qdiv].question-lab101 [id$=buttons] {
  display: none;
}
[id^=cs_qdiv].question-lab101 [id$=nsubmits_left] {
  display: none;
}

[id^=cs_qdiv].question-lab101_vprof [id$=buttons] {
  display: none;
}
[id^=cs_qdiv].question-lab101_vprof [id$=nsubmits_left] {
  display: none;
}

</style>
<script>
MathJax.options.enableMenu = false;
</script>
<style>
h2.cs_section_title {
   margin-top: 3em;
}
h3.cs_section_title {
   margin-top: 3em;
}
h4.cs_section_title {
   margin-top: 2em;
}
code.hljs {
    -webkit-user-select: none;
    -webkit-touch-callout: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
}
img.envdia {
  border-radius: 5px;
  border: 2px #ccc solid;
}
img.pixels {
  image-rendering: pixelated;
  image-rendering: -moz-crisp-edges;
  image-rendering: crisp-edges;
}
button[id$=clearanswer] {
  display: none;
}
.flex { display: flex; flex-wrap: wrap; }
.flex > pre { flex: 1; }
.flex > img { flex: 0 1; }
</style>
<script type="text/javascript">
document.addEventListener("DOMContentLoaded", function (){
    document.querySelectorAll("img.envdia").forEach(function (b){
        b.classList.add("catsoop-darkmode-invert")
    });
});
</script>
<script src="Recursion%20_%20Course%20Readings%20_%206.101%20Spring%202025_files/multistep.js" type="text/javascript"></script>
<link href="Recursion%20_%20Course%20Readings%20_%206.101%20Spring%202025_files/multistep.css" rel="stylesheet">
<script type="text/javascript">
// @license magnet:?xt=urn:btih:0b31508aeb0634b347b8270c7bee4d411b5d4109&dn=agpl-3.0.txt AGPL-v3
document.addEventListener("DOMContentLoaded", function(){
    sessionStorage.setItem("last-non-settings", catsoop.this_path);
});
// @license-end
</script>
<script src="Recursion%20_%20Course%20Readings%20_%206.101%20Spring%202025_files/cs_ajax.js" type="text/javascript"></script>
<meta content="width=device-width, initial-scale=1" name="viewport">
<meta content="yes" name="apple-mobile-web-app-capable">
<meta content="black-translucent" name="apple-mobile-web-app-status-bar-style">
<style id="MJX-CHTML-styles">
mjx-container[jax="CHTML"] {
  line-height: 0;
}

mjx-container [space="1"] {
  margin-left: .111em;
}

mjx-container [space="2"] {
  margin-left: .167em;
}

mjx-container [space="3"] {
  margin-left: .222em;
}

mjx-container [space="4"] {
  margin-left: .278em;
}

mjx-container [space="5"] {
  margin-left: .333em;
}

mjx-container [rspace="1"] {
  margin-right: .111em;
}

mjx-container [rspace="2"] {
  margin-right: .167em;
}

mjx-container [rspace="3"] {
  margin-right: .222em;
}

mjx-container [rspace="4"] {
  margin-right: .278em;
}

mjx-container [rspace="5"] {
  margin-right: .333em;
}

mjx-container [size="s"] {
  font-size: 70.7%;
}

mjx-container [size="ss"] {
  font-size: 50%;
}

mjx-container [size="Tn"] {
  font-size: 60%;
}

mjx-container [size="sm"] {
  font-size: 85%;
}

mjx-container [size="lg"] {
  font-size: 120%;
}

mjx-container [size="Lg"] {
  font-size: 144%;
}

mjx-container [size="LG"] {
  font-size: 173%;
}

mjx-container [size="hg"] {
  font-size: 207%;
}

mjx-container [size="HG"] {
  font-size: 249%;
}

mjx-container [width="full"] {
  width: 100%;
}

mjx-box {
  display: inline-block;
}

mjx-block {
  display: block;
}

mjx-itable {
  display: inline-table;
}

mjx-row {
  display: table-row;
}

mjx-row > * {
  display: table-cell;
}

mjx-mtext {
  display: inline-block;
}

mjx-mstyle {
  display: inline-block;
}

mjx-merror {
  display: inline-block;
  color: red;
  background-color: yellow;
}

mjx-mphantom {
  visibility: hidden;
}

_::-webkit-full-page-media, _:future, :root mjx-container {
  will-change: opacity;
}

mjx-assistive-mml {
  position: absolute !important;
  top: 0px;
  left: 0px;
  clip: rect(1px, 1px, 1px, 1px);
  padding: 1px 0px 0px 0px !important;
  border: 0px !important;
  display: block !important;
  width: auto !important;
  overflow: hidden !important;
  -webkit-touch-callout: none;
  -webkit-user-select: none;
  -khtml-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

mjx-assistive-mml[display="block"] {
  width: 100% !important;
}

mjx-math {
  display: inline-block;
  text-align: left;
  line-height: 0;
  text-indent: 0;
  font-style: normal;
  font-weight: normal;
  font-size: 100%;
  font-size-adjust: none;
  letter-spacing: normal;
  border-collapse: collapse;
  word-wrap: normal;
  word-spacing: normal;
  white-space: nowrap;
  direction: ltr;
  padding: 1px 0;
}

mjx-container[jax="CHTML"][display="true"] {
  display: block;
  text-align: center;
  margin: 1em 0;
}

mjx-container[jax="CHTML"][display="true"][width="full"] {
  display: flex;
}

mjx-container[jax="CHTML"][display="true"] mjx-math {
  padding: 0;
}

mjx-container[jax="CHTML"][justify="left"] {
  text-align: left;
}

mjx-container[jax="CHTML"][justify="right"] {
  text-align: right;
}

mjx-mi {
  display: inline-block;
  text-align: left;
}

mjx-c {
  display: inline-block;
}

mjx-utext {
  display: inline-block;
  padding: .75em 0 .2em 0;
}

mjx-c::before {
  display: block;
  width: 0;
}

.MJX-TEX {
  font-family: MJXZERO, MJXTEX;
}

.TEX-B {
  font-family: MJXZERO, MJXTEX-B;
}

.TEX-I {
  font-family: MJXZERO, MJXTEX-I;
}

.TEX-MI {
  font-family: MJXZERO, MJXTEX-MI;
}

.TEX-BI {
  font-family: MJXZERO, MJXTEX-BI;
}

.TEX-S1 {
  font-family: MJXZERO, MJXTEX-S1;
}

.TEX-S2 {
  font-family: MJXZERO, MJXTEX-S2;
}

.TEX-S3 {
  font-family: MJXZERO, MJXTEX-S3;
}

.TEX-S4 {
  font-family: MJXZERO, MJXTEX-S4;
}

.TEX-A {
  font-family: MJXZERO, MJXTEX-A;
}

.TEX-C {
  font-family: MJXZERO, MJXTEX-C;
}

.TEX-CB {
  font-family: MJXZERO, MJXTEX-CB;
}

.TEX-FR {
  font-family: MJXZERO, MJXTEX-FR;
}

.TEX-FRB {
  font-family: MJXZERO, MJXTEX-FRB;
}

.TEX-SS {
  font-family: MJXZERO, MJXTEX-SS;
}

.TEX-SSB {
  font-family: MJXZERO, MJXTEX-SSB;
}

.TEX-SSI {
  font-family: MJXZERO, MJXTEX-SSI;
}

.TEX-SC {
  font-family: MJXZERO, MJXTEX-SC;
}

.TEX-T {
  font-family: MJXZERO, MJXTEX-T;
}

.TEX-V {
  font-family: MJXZERO, MJXTEX-V;
}

.TEX-VB {
  font-family: MJXZERO, MJXTEX-VB;
}

mjx-stretchy-v mjx-c, mjx-stretchy-h mjx-c {
  font-family: MJXZERO, MJXTEX-S1, MJXTEX-S4, MJXTEX, MJXTEX-A ! important;
}

@font-face /* 0 */ {
  font-family: MJXZERO;
  src: url("https://py.mit.edu/_static/_base/js/mathjax/output/chtml/fonts/woff-v2/MathJax_Zero.woff") format("woff");
}

@font-face /* 1 */ {
  font-family: MJXTEX;
  src: url("https://py.mit.edu/_static/_base/js/mathjax/output/chtml/fonts/woff-v2/MathJax_Main-Regular.woff") format("woff");
}

@font-face /* 2 */ {
  font-family: MJXTEX-B;
  src: url("https://py.mit.edu/_static/_base/js/mathjax/output/chtml/fonts/woff-v2/MathJax_Main-Bold.woff") format("woff");
}

@font-face /* 3 */ {
  font-family: MJXTEX-I;
  src: url("https://py.mit.edu/_static/_base/js/mathjax/output/chtml/fonts/woff-v2/MathJax_Math-Italic.woff") format("woff");
}

@font-face /* 4 */ {
  font-family: MJXTEX-MI;
  src: url("https://py.mit.edu/_static/_base/js/mathjax/output/chtml/fonts/woff-v2/MathJax_Main-Italic.woff") format("woff");
}

@font-face /* 5 */ {
  font-family: MJXTEX-BI;
  src: url("https://py.mit.edu/_static/_base/js/mathjax/output/chtml/fonts/woff-v2/MathJax_Math-BoldItalic.woff") format("woff");
}

@font-face /* 6 */ {
  font-family: MJXTEX-S1;
  src: url("https://py.mit.edu/_static/_base/js/mathjax/output/chtml/fonts/woff-v2/MathJax_Size1-Regular.woff") format("woff");
}

@font-face /* 7 */ {
  font-family: MJXTEX-S2;
  src: url("https://py.mit.edu/_static/_base/js/mathjax/output/chtml/fonts/woff-v2/MathJax_Size2-Regular.woff") format("woff");
}

@font-face /* 8 */ {
  font-family: MJXTEX-S3;
  src: url("https://py.mit.edu/_static/_base/js/mathjax/output/chtml/fonts/woff-v2/MathJax_Size3-Regular.woff") format("woff");
}

@font-face /* 9 */ {
  font-family: MJXTEX-S4;
  src: url("https://py.mit.edu/_static/_base/js/mathjax/output/chtml/fonts/woff-v2/MathJax_Size4-Regular.woff") format("woff");
}

@font-face /* 10 */ {
  font-family: MJXTEX-A;
  src: url("https://py.mit.edu/_static/_base/js/mathjax/output/chtml/fonts/woff-v2/MathJax_AMS-Regular.woff") format("woff");
}

@font-face /* 11 */ {
  font-family: MJXTEX-C;
  src: url("https://py.mit.edu/_static/_base/js/mathjax/output/chtml/fonts/woff-v2/MathJax_Calligraphic-Regular.woff") format("woff");
}

@font-face /* 12 */ {
  font-family: MJXTEX-CB;
  src: url("https://py.mit.edu/_static/_base/js/mathjax/output/chtml/fonts/woff-v2/MathJax_Calligraphic-Bold.woff") format("woff");
}

@font-face /* 13 */ {
  font-family: MJXTEX-FR;
  src: url("https://py.mit.edu/_static/_base/js/mathjax/output/chtml/fonts/woff-v2/MathJax_Fraktur-Regular.woff") format("woff");
}

@font-face /* 14 */ {
  font-family: MJXTEX-FRB;
  src: url("https://py.mit.edu/_static/_base/js/mathjax/output/chtml/fonts/woff-v2/MathJax_Fraktur-Bold.woff") format("woff");
}

@font-face /* 15 */ {
  font-family: MJXTEX-SS;
  src: url("https://py.mit.edu/_static/_base/js/mathjax/output/chtml/fonts/woff-v2/MathJax_SansSerif-Regular.woff") format("woff");
}

@font-face /* 16 */ {
  font-family: MJXTEX-SSB;
  src: url("https://py.mit.edu/_static/_base/js/mathjax/output/chtml/fonts/woff-v2/MathJax_SansSerif-Bold.woff") format("woff");
}

@font-face /* 17 */ {
  font-family: MJXTEX-SSI;
  src: url("https://py.mit.edu/_static/_base/js/mathjax/output/chtml/fonts/woff-v2/MathJax_SansSerif-Italic.woff") format("woff");
}

@font-face /* 18 */ {
  font-family: MJXTEX-SC;
  src: url("https://py.mit.edu/_static/_base/js/mathjax/output/chtml/fonts/woff-v2/MathJax_Script-Regular.woff") format("woff");
}

@font-face /* 19 */ {
  font-family: MJXTEX-T;
  src: url("https://py.mit.edu/_static/_base/js/mathjax/output/chtml/fonts/woff-v2/MathJax_Typewriter-Regular.woff") format("woff");
}

@font-face /* 20 */ {
  font-family: MJXTEX-V;
  src: url("https://py.mit.edu/_static/_base/js/mathjax/output/chtml/fonts/woff-v2/MathJax_Vector-Regular.woff") format("woff");
}

@font-face /* 21 */ {
  font-family: MJXTEX-VB;
  src: url("https://py.mit.edu/_static/_base/js/mathjax/output/chtml/fonts/woff-v2/MathJax_Vector-Bold.woff") format("woff");
}

mjx-c.mjx-c1D45B.TEX-I::before {
  padding: 0.442em 0.6em 0.011em 0;
  content: "n";
}
</style></head>
<body style="margin: 0px;">
<header id="cs_header">
<div aria-role="menubar" class="nav-container">
<div class="cs_header_text"><a href="https://py.mit.edu/spring25"><img src="Recursion%20_%20Course%20Readings%20_%206.101%20Spring%202025_files/logo.gif">&nbsp;6.101</a></div>
<div class="dropdown" onmouseleave="clearMenu(this);">
<label class="dropbtn cs_top_menu_item" for="cs_menu_c1a43e3f699a1ed71997b0321c2e9ffd">Information<span aria-hidden="true" class="downarrow">▼</span></label>
<input class="dropdown-checkbox screenreader-only-clip menu-toplevel" id="cs_menu_c1a43e3f699a1ed71997b0321c2e9ffd" onblur="catsoop.topMenuFocus(event);" role="menuitemcheckbox" type="checkbox">
<div class="dropdown-content">
<a class="cs_top_menu_item menu-submenu" href="https://py.mit.edu/spring25/info/basics" onblur="catsoop.topMenuFocus(event);" role="menuitem">Basics and Schedule</a>
<a class="cs_top_menu_item menu-submenu" href="https://py.mit.edu/spring25/info/grading" onblur="catsoop.topMenuFocus(event);" role="menuitem">Grading Policies</a>
<a class="cs_top_menu_item menu-submenu" href="https://py.mit.edu/spring25/info/academic_integrity" onblur="catsoop.topMenuFocus(event);" role="menuitem">Academic Integrity</a>
<a class="cs_top_menu_item menu-submenu" href="https://py.mit.edu/spring25/info/help" onblur="catsoop.topMenuFocus(event);" role="menuitem">Getting Help</a>
<a class="cs_top_menu_item menu-submenu" href="https://py.mit.edu/spring25/info/infrastructure" onblur="catsoop.topMenuFocus(event);" role="menuitem">Infrastructure</a>
<a class="cs_top_menu_item menu-submenu" href="https://py.mit.edu/spring25/info/staff" onblur="catsoop.topMenuFocus(event);" role="menuitem">Staff List</a></div></div>
<div class="dropdown" onmouseleave="clearMenu(this);">
<label class="dropbtn cs_top_menu_item" for="cs_menu_ee51a2d5002bd02613936bd9b2f3dbee">Materials<span aria-hidden="true" class="downarrow">▼</span></label>
<input class="dropdown-checkbox screenreader-only-clip menu-toplevel" id="cs_menu_ee51a2d5002bd02613936bd9b2f3dbee" onblur="catsoop.topMenuFocus(event);" role="menuitemcheckbox" type="checkbox">
<div class="dropdown-content">
<a class="cs_top_menu_item menu-submenu" href="https://py.mit.edu/spring25/calendar" onblur="catsoop.topMenuFocus(event);" role="menuitem">Calendar</a>
<a class="cs_top_menu_item menu-submenu" href="https://py.mit.edu/spring25/readings" onblur="catsoop.topMenuFocus(event);" role="menuitem">Readings</a>
<a class="cs_top_menu_item menu-submenu" href="https://py.mit.edu/spring25/labs" onblur="catsoop.topMenuFocus(event);" role="menuitem">Labs</a></div></div>
<a class="cs_top_menu_item menu-toplevel" href="https://py.mit.edu/spring25/progress" onblur="catsoop.topMenuFocus(event);" role="menuitem">Progress</a>
<a class="cs_top_menu_item menu-toplevel" href="https://py.mit.edu/spring25/queue" onblur="catsoop.topMenuFocus(event);" role="menuitem">Queue</a>
<div class="dropdown" onmouseleave="clearMenu(this);">
<label class="dropbtn cs_top_menu_item" for="cs_menu_661c26c8fa16f9ff745829584f907105">tjampa<span aria-hidden="true" class="downarrow">▼</span></label>
<input class="dropdown-checkbox screenreader-only-clip menu-toplevel" id="cs_menu_661c26c8fa16f9ff745829584f907105" onblur="catsoop.topMenuFocus(event);" role="menuitemcheckbox" type="checkbox">
<div class="dropdown-content">
<a class="cs_top_menu_item menu-submenu" href="https://py.mit.edu/spring25/ssh_keys" onblur="catsoop.topMenuFocus(event);" role="menuitem">Manage SSH Keys</a>
<a class="cs_top_menu_item menu-submenu" href="https://py.mit.edu/_util/user_settings" onblur="catsoop.topMenuFocus(event);" role="menuitem">Settings</a>
<a class="cs_top_menu_item menu-submenu" href="https://py.mit.edu/spring25/readings/recursion?loginaction=logout" onblur="catsoop.topMenuFocus(event);" role="menuitem">Log Out</a></div></div><a class="icon" href="javascript:void(0);" onclick="toggleResponsiveHeader()" aria-label="site-menu">☰</a>
</div>
</header>
<nav aria-label="Breadcrumbs" class="cs_navigation cs_top_navigation" id="cs_breadcrumbs"><li><a href="https://py.mit.edu/spring25">Home</a></li><li><a href="https://py.mit.edu/spring25/readings">Course Readings</a></li><li><a href="https://py.mit.edu/spring25/readings/recursion">Recursion</a></li></nav>
<div class="cs_body" id="cs_body">
<div class="cs_left_menu"></div>
<div class="cs_content">
<div class="cs_page_body" role="main">
<center><h1 class="cs_content_header">Recursive Patterns</h1></center>
<div class="callout callout-note"><div class="callout-title">Note</div>
<p>All questions on this page are due at 10:00pm on Sunday, 16 March.</p>
</div>
<h2 aria-hidden="true">Table of Contents</h2><ul aria-label="Table of Contents" role="navigation"><li><a href="#_introduction">1) Introduction</a></li><li><a href="#_definitions">2) Definitions</a></li><ul><li><a href="#_programming">2.1) Programming</a></li><li><a href="#_recursion_in_the_environment_model">2.2) Recursion in the Environment Model</a></li></ul><li><a href="#_recursion_in_the_wild">3) Recursion in the Wild</a></li><li><a href="#_summing_a_list">4) Summing a List</a></li><ul><li><a href="#_aside_doctest">4.1) Aside: Doctest</a></li><li><a href="#_getting_the_base_cases_right">4.2) Getting the Base Cases Right</a></li></ul><li><a href="#_summing_a_nested_list">5) Summing a Nested List</a></li><ul><li><a href="#_sum_nested_recursive_diagram_examples">5.1)  <code>sum_nested</code> Recursive Diagram Examples </a></li></ul><li><a href="#_choosing_the_right_decomposition_for_a_problem">6) Choosing the Right Decomposition For a Problem</a></li><ul><li><a href="#_aside_canonical_output_for_doctest">6.1) Aside: Canonical Output For Doctest</a></li><li><a href="#_one_way_to_do_subsequences">6.2) One Way to Do Subsequences</a></li><li><a href="#_subsequences_recursive_call_diagram">6.3)  <code>subsequences</code> Recursive Call Diagram </a></li></ul><li><a href="#_choosing_the_right_recursive_subproblem">7) Choosing the Right Recursive Subproblem</a></li><li><a href="#_summary">8) Summary</a></li></ul>
<p><a class="anchor" name="catsoop_section_1"></a><a class="anchor" name="_introduction"></a></p><h2 class="cs_section_title">1) Introduction<a class="cs_permalink" href="#_introduction">§</a></h2><p></p>
<p>In some sense, this week's reading represents a slight shift of focus
 as we move on to a new topic. The ideas we've been talking about so far
 won't go away, of course, but we will have a different central focus 
for the next few weeks: recursion.</p>
<p>We expect that recursion is something that everyone should have seen 
in the prerequisite for this course, but recursion can feel somewhat 
weird and uncomfortable until you build up some experience of using it 
and some understanding of how it works. So, we're going to spend a fair 
amount of time over the next couple of weeks with that goal in mind: 
developing facility and comfort with, and a deeper understanding of, 
recursion. As usual, we'll come at this from a couple of different 
perspectives -- we'll certainly look at how we can use recursion in our 
own programs, but we'll also focus on how recursion works behind the 
scenes (in terms of our environment model), as well as talking about how
 we can go about deciding whether a recursive solution is appropriate 
for a given problem (or whether some other approach might be better).</p>
<p>And don't worry if recursion feels strange or uncomfortable; that's a
 natural first reaction, and, with time and practice (which we're aiming
 to provide over the course of the next several readings, recitations, 
and labs), this idea will stop being quite so scary and start being a 
really powerful tool that we can use in our own programs.</p>
<p><a class="anchor" name="catsoop_section_2"></a><a class="anchor" name="_definitions"></a></p><h2 class="cs_section_title">2) Definitions<a class="cs_permalink" href="#_definitions">§</a></h2><p></p>
<p>Before we can get too far into talking about using recursion, it's 
worth briefly talking about what recursion is. Generally speaking, <strong>recursion</strong> occurs when something is defined in terms of itself.</p>
<p>Although our focus will be on recursion from a programming 
perspective, recursion can also appear in other contexts. Here is an 
example from mathematics, a definition of the factorial operation. For 
nonnegative integer <span class=""><mjx-container class="MathJax" jax="CHTML" style="font-size: 119.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D45B TEX-I"></mjx-c></mjx-mi></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>n</mi></math></mjx-assistive-mml></mjx-container></span>,</p>
<p></p><div class="cs_displaymath" style="text-align:center;padding-bottom:10px;"><mjx-container class="MathJax" jax="CHTML" style="font-size: 119.1%; position: relative;" display="true"><mjx-math display="true" style="margin-left: 0px; margin-right: 0px;" class="MJX-TEX" aria-hidden="true"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D45B TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c21"></mjx-c></mjx-mo><mjx-mo class="mjx-n" space="4"><mjx-c class="mjx-c3D"></mjx-c></mjx-mo><mjx-mrow space="4"><mjx-mo class="mjx-s3"><mjx-c class="mjx-c7B TEX-S3"></mjx-c></mjx-mo><mjx-mtable style="min-width: 10.32em;"><mjx-table><mjx-itable><mjx-mtr><mjx-mtd style="text-align: left; padding-right: 0.5em; padding-bottom: 0.1em;"><mjx-mn class="mjx-n"><mjx-c class="mjx-c31"></mjx-c></mjx-mn><mjx-tstrut></mjx-tstrut></mjx-mtd><mjx-mtd style="text-align: left; padding-left: 0.5em; padding-bottom: 0.1em;"><mjx-mtext class="mjx-n"><mjx-c class="mjx-c69"></mjx-c><mjx-c class="mjx-c66"></mjx-c><mjx-c class="mjx-cA0"></mjx-c></mjx-mtext><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D45B TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n" space="4"><mjx-c class="mjx-c3D"></mjx-c></mjx-mo><mjx-mn class="mjx-n" space="4"><mjx-c class="mjx-c30"></mjx-c></mjx-mn><mjx-tstrut></mjx-tstrut></mjx-mtd></mjx-mtr><mjx-mtr><mjx-mtd style="text-align: left; padding-right: 0.5em; padding-top: 0.1em;"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D45B TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n" space="3"><mjx-c class="mjx-cD7"></mjx-c></mjx-mo><mjx-mo class="mjx-n" space="3"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D45B TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n" space="3"><mjx-c class="mjx-c2212"></mjx-c></mjx-mo><mjx-mn class="mjx-n" space="3"><mjx-c class="mjx-c31"></mjx-c></mjx-mn><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo><mjx-mo class="mjx-n"><mjx-c class="mjx-c21"></mjx-c></mjx-mo><mjx-tstrut></mjx-tstrut></mjx-mtd><mjx-mtd style="text-align: left; padding-left: 0.5em; padding-top: 0.1em;"><mjx-mtext class="mjx-n"><mjx-c class="mjx-c6F"></mjx-c><mjx-c class="mjx-c74"></mjx-c><mjx-c class="mjx-c68"></mjx-c><mjx-c class="mjx-c65"></mjx-c><mjx-c class="mjx-c72"></mjx-c><mjx-c class="mjx-c77"></mjx-c><mjx-c class="mjx-c69"></mjx-c><mjx-c class="mjx-c73"></mjx-c><mjx-c class="mjx-c65"></mjx-c></mjx-mtext><mjx-tstrut></mjx-tstrut></mjx-mtd></mjx-mtr></mjx-itable></mjx-table></mjx-mtable><mjx-mo class="mjx-n" style="vertical-align: 0.25em;"></mjx-mo></mjx-mrow></mjx-math><mjx-assistive-mml unselectable="on" display="block"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mi>n</mi><mo>!</mo><mo>=</mo><mrow data-mjx-texclass="INNER"><mo data-mjx-texclass="OPEN">{</mo><mtable columnalign="left left" columnspacing="1em" rowspacing=".2em"><mtr><mtd><mn>1</mn></mtd><mtd><mtext>if&nbsp;</mtext><mi>n</mi><mo>=</mo><mn>0</mn></mtd></mtr><mtr><mtd><mi>n</mi><mo>×</mo><mo stretchy="false">(</mo><mi>n</mi><mo>−</mo><mn>1</mn><mo stretchy="false">)</mo><mo>!</mo></mtd><mtd><mtext>otherwise</mtext></mtd></mtr></mtable><mo data-mjx-texclass="CLOSE" fence="true" stretchy="true" symmetric="true"></mo></mrow></math></mjx-assistive-mml></mjx-container></div><p></p>
<p>In general, a recursive definition will have multiple pieces:</p>
<ul>
<li>one or more <strong>base cases</strong> (terminating scenarios that do not need recursion to produce answers), and</li>
<li>one or more <strong>recursive cases</strong> (sets of rules that reduce all other cases toward base cases)</li>
</ul>
<p>In our example above, the case where <span class=""><mjx-container class="MathJax" jax="CHTML" style="font-size: 119.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D45B TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n" space="4"><mjx-c class="mjx-c3D"></mjx-c></mjx-mo><mjx-mn class="mjx-n" space="4"><mjx-c class="mjx-c30"></mjx-c></mjx-mn></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>n</mi><mo>=</mo><mn>0</mn></math></mjx-assistive-mml></mjx-container></span> is a base case. We don't need recursion to find the answer there, since <span class=""><mjx-container class="MathJax" jax="CHTML" style="font-size: 119.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mn class="mjx-n"><mjx-c class="mjx-c30"></mjx-c></mjx-mn><mjx-mo class="mjx-n"><mjx-c class="mjx-c21"></mjx-c></mjx-mo><mjx-mo class="mjx-n" space="4"><mjx-c class="mjx-c3D"></mjx-c></mjx-mo><mjx-mn class="mjx-n" space="4"><mjx-c class="mjx-c31"></mjx-c></mjx-mn></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>0</mn><mo>!</mo><mo>=</mo><mn>1</mn></math></mjx-assistive-mml></mjx-container></span> by definition.</p>
<p>The other case is our recursive case. We can see the recursion here -- the definition of <span class=""><mjx-container class="MathJax" jax="CHTML" style="font-size: 119.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D45B TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c21"></mjx-c></mjx-mo></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>n</mi><mo>!</mo></math></mjx-assistive-mml></mjx-container></span> depends on the definition of <span class=""><mjx-container class="MathJax" jax="CHTML" style="font-size: 119.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D45B TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n" space="3"><mjx-c class="mjx-c2212"></mjx-c></mjx-mo><mjx-mn class="mjx-n" space="3"><mjx-c class="mjx-c31"></mjx-c></mjx-mn><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo><mjx-mo class="mjx-n"><mjx-c class="mjx-c21"></mjx-c></mjx-mo></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo stretchy="false">(</mo><mi>n</mi><mo>−</mo><mn>1</mn><mo stretchy="false">)</mo><mo>!</mo></math></mjx-assistive-mml></mjx-container></span>.  So the definition of factorial depends on the definition of factorial.</p>
<p>Let's see how this evolves in a mathematical context, before using it in programming. Suppose we want to determine <span class=""><mjx-container class="MathJax" jax="CHTML" style="font-size: 119.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mn class="mjx-n"><mjx-c class="mjx-c34"></mjx-c></mjx-mn><mjx-mo class="mjx-n"><mjx-c class="mjx-c21"></mjx-c></mjx-mo></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>4</mn><mo>!</mo></math></mjx-assistive-mml></mjx-container></span>
 using the definition above. We can plug things into that definition and
 use something like the following sequence of steps to arrive at an 
answer, repeatedly applying the definition of factorial until we reach a
 base case:</p>
<p></p><div class="cs_displaymath" style="text-align:center;padding-bottom:10px;"><mjx-container class="MathJax" jax="CHTML" style="font-size: 119.1%; position: relative;" display="true"><mjx-math display="true" style="margin-left: 0px; margin-right: 0px;" class="MJX-TEX" aria-hidden="true"><mjx-mtable style="min-width: 9.779em;"><mjx-table><mjx-itable><mjx-mtr><mjx-mtd style="text-align: right; padding-right: 0px; padding-bottom: 0.15em;"><mjx-mn class="mjx-n"><mjx-c class="mjx-c34"></mjx-c></mjx-mn><mjx-mo class="mjx-n"><mjx-c class="mjx-c21"></mjx-c></mjx-mo><mjx-tstrut></mjx-tstrut></mjx-mtd><mjx-mtd style="text-align: left; padding-left: 0px; padding-bottom: 0.15em;"><mjx-mi class="mjx-n"></mjx-mi><mjx-mo class="mjx-n" space="4"><mjx-c class="mjx-c3D"></mjx-c></mjx-mo><mjx-mn class="mjx-n" space="4"><mjx-c class="mjx-c34"></mjx-c></mjx-mn><mjx-mo class="mjx-n" space="3"><mjx-c class="mjx-cD7"></mjx-c></mjx-mo><mjx-mn class="mjx-n" space="3"><mjx-c class="mjx-c33"></mjx-c></mjx-mn><mjx-mo class="mjx-n"><mjx-c class="mjx-c21"></mjx-c></mjx-mo><mjx-tstrut></mjx-tstrut></mjx-mtd></mjx-mtr><mjx-mtr><mjx-mtd style="text-align: right; padding-right: 0px; padding-top: 0.15em; padding-bottom: 0.15em;"><mjx-tstrut></mjx-tstrut></mjx-mtd><mjx-mtd style="text-align: left; padding-left: 0px; padding-top: 0.15em; padding-bottom: 0.15em;"><mjx-mi class="mjx-n"></mjx-mi><mjx-mo class="mjx-n" space="4"><mjx-c class="mjx-c3D"></mjx-c></mjx-mo><mjx-mn class="mjx-n" space="4"><mjx-c class="mjx-c34"></mjx-c></mjx-mn><mjx-mo class="mjx-n" space="3"><mjx-c class="mjx-cD7"></mjx-c></mjx-mo><mjx-mn class="mjx-n" space="3"><mjx-c class="mjx-c33"></mjx-c></mjx-mn><mjx-mo class="mjx-n" space="3"><mjx-c class="mjx-cD7"></mjx-c></mjx-mo><mjx-mn class="mjx-n" space="3"><mjx-c class="mjx-c32"></mjx-c></mjx-mn><mjx-mo class="mjx-n"><mjx-c class="mjx-c21"></mjx-c></mjx-mo><mjx-tstrut></mjx-tstrut></mjx-mtd></mjx-mtr><mjx-mtr><mjx-mtd style="text-align: right; padding-right: 0px; padding-top: 0.15em; padding-bottom: 0.15em;"><mjx-tstrut></mjx-tstrut></mjx-mtd><mjx-mtd style="text-align: left; padding-left: 0px; padding-top: 0.15em; padding-bottom: 0.15em;"><mjx-mi class="mjx-n"></mjx-mi><mjx-mo class="mjx-n" space="4"><mjx-c class="mjx-c3D"></mjx-c></mjx-mo><mjx-mn class="mjx-n" space="4"><mjx-c class="mjx-c34"></mjx-c></mjx-mn><mjx-mo class="mjx-n" space="3"><mjx-c class="mjx-cD7"></mjx-c></mjx-mo><mjx-mn class="mjx-n" space="3"><mjx-c class="mjx-c33"></mjx-c></mjx-mn><mjx-mo class="mjx-n" space="3"><mjx-c class="mjx-cD7"></mjx-c></mjx-mo><mjx-mn class="mjx-n" space="3"><mjx-c class="mjx-c32"></mjx-c></mjx-mn><mjx-mo class="mjx-n" space="3"><mjx-c class="mjx-cD7"></mjx-c></mjx-mo><mjx-mn class="mjx-n" space="3"><mjx-c class="mjx-c31"></mjx-c></mjx-mn><mjx-mo class="mjx-n"><mjx-c class="mjx-c21"></mjx-c></mjx-mo><mjx-tstrut></mjx-tstrut></mjx-mtd></mjx-mtr><mjx-mtr><mjx-mtd style="text-align: right; padding-right: 0px; padding-top: 0.15em; padding-bottom: 0.15em;"><mjx-tstrut></mjx-tstrut></mjx-mtd><mjx-mtd style="text-align: left; padding-left: 0px; padding-top: 0.15em; padding-bottom: 0.15em;"><mjx-mi class="mjx-n"></mjx-mi><mjx-mo class="mjx-n" space="4"><mjx-c class="mjx-c3D"></mjx-c></mjx-mo><mjx-mn class="mjx-n" space="4"><mjx-c class="mjx-c34"></mjx-c></mjx-mn><mjx-mo class="mjx-n" space="3"><mjx-c class="mjx-cD7"></mjx-c></mjx-mo><mjx-mn class="mjx-n" space="3"><mjx-c class="mjx-c33"></mjx-c></mjx-mn><mjx-mo class="mjx-n" space="3"><mjx-c class="mjx-cD7"></mjx-c></mjx-mo><mjx-mn class="mjx-n" space="3"><mjx-c class="mjx-c32"></mjx-c></mjx-mn><mjx-mo class="mjx-n" space="3"><mjx-c class="mjx-cD7"></mjx-c></mjx-mo><mjx-mn class="mjx-n" space="3"><mjx-c class="mjx-c31"></mjx-c></mjx-mn><mjx-mo class="mjx-n" space="3"><mjx-c class="mjx-cD7"></mjx-c></mjx-mo><mjx-mn class="mjx-n" space="3"><mjx-c class="mjx-c30"></mjx-c></mjx-mn><mjx-mo class="mjx-n"><mjx-c class="mjx-c21"></mjx-c></mjx-mo><mjx-tstrut></mjx-tstrut></mjx-mtd></mjx-mtr><mjx-mtr><mjx-mtd style="text-align: right; padding-right: 0px; padding-top: 0.15em; padding-bottom: 0.15em;"><mjx-tstrut></mjx-tstrut></mjx-mtd><mjx-mtd style="text-align: left; padding-left: 0px; padding-top: 0.15em; padding-bottom: 0.15em;"><mjx-mi class="mjx-n"></mjx-mi><mjx-mo class="mjx-n" space="4"><mjx-c class="mjx-c3D"></mjx-c></mjx-mo><mjx-mn class="mjx-n" space="4"><mjx-c class="mjx-c34"></mjx-c></mjx-mn><mjx-mo class="mjx-n" space="3"><mjx-c class="mjx-cD7"></mjx-c></mjx-mo><mjx-mn class="mjx-n" space="3"><mjx-c class="mjx-c33"></mjx-c></mjx-mn><mjx-mo class="mjx-n" space="3"><mjx-c class="mjx-cD7"></mjx-c></mjx-mo><mjx-mn class="mjx-n" space="3"><mjx-c class="mjx-c32"></mjx-c></mjx-mn><mjx-mo class="mjx-n" space="3"><mjx-c class="mjx-cD7"></mjx-c></mjx-mo><mjx-mn class="mjx-n" space="3"><mjx-c class="mjx-c31"></mjx-c></mjx-mn><mjx-mo class="mjx-n" space="3"><mjx-c class="mjx-cD7"></mjx-c></mjx-mo><mjx-mn class="mjx-n" space="3"><mjx-c class="mjx-c31"></mjx-c></mjx-mn><mjx-tstrut></mjx-tstrut></mjx-mtd></mjx-mtr><mjx-mtr><mjx-mtd style="text-align: right; padding-right: 0px; padding-top: 0.15em;"><mjx-tstrut></mjx-tstrut></mjx-mtd><mjx-mtd style="text-align: left; padding-left: 0px; padding-top: 0.15em;"><mjx-mi class="mjx-n"></mjx-mi><mjx-mo class="mjx-n" space="4"><mjx-c class="mjx-c3D"></mjx-c></mjx-mo><mjx-mn class="mjx-n" space="4"><mjx-c class="mjx-c32"></mjx-c><mjx-c class="mjx-c34"></mjx-c></mjx-mn><mjx-tstrut></mjx-tstrut></mjx-mtd></mjx-mtr></mjx-itable></mjx-table></mjx-mtable></mjx-math><mjx-assistive-mml unselectable="on" display="block"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mtable displaystyle="true" columnalign="right left" columnspacing="0em" rowspacing="3pt"><mtr><mtd><mn>4</mn><mo>!</mo></mtd><mtd><mi></mi><mo>=</mo><mn>4</mn><mo>×</mo><mn>3</mn><mo>!</mo></mtd></mtr><mtr><mtd></mtd><mtd><mi></mi><mo>=</mo><mn>4</mn><mo>×</mo><mn>3</mn><mo>×</mo><mn>2</mn><mo>!</mo></mtd></mtr><mtr><mtd></mtd><mtd><mi></mi><mo>=</mo><mn>4</mn><mo>×</mo><mn>3</mn><mo>×</mo><mn>2</mn><mo>×</mo><mn>1</mn><mo>!</mo></mtd></mtr><mtr><mtd></mtd><mtd><mi></mi><mo>=</mo><mn>4</mn><mo>×</mo><mn>3</mn><mo>×</mo><mn>2</mn><mo>×</mo><mn>1</mn><mo>×</mo><mn>0</mn><mo>!</mo></mtd></mtr><mtr><mtd></mtd><mtd><mi></mi><mo>=</mo><mn>4</mn><mo>×</mo><mn>3</mn><mo>×</mo><mn>2</mn><mo>×</mo><mn>1</mn><mo>×</mo><mn>1</mn></mtd></mtr><mtr><mtd></mtd><mtd><mi></mi><mo>=</mo><mn>24</mn></mtd></mtr></mtable></math></mjx-assistive-mml></mjx-container></div><p></p>
<p>In this example, we can also see the important property that the 
recursive case reduces us down toward a base case, in the sense that, 
for any value <span class=""><mjx-container class="MathJax" jax="CHTML" style="font-size: 119.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D45B TEX-I"></mjx-c></mjx-mi></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>n</mi></math></mjx-assistive-mml></mjx-container></span> we want to compute the factorial of, the <span class=""><mjx-container class="MathJax" jax="CHTML" style="font-size: 119.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D45B TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n" space="3"><mjx-c class="mjx-c2212"></mjx-c></mjx-mo><mjx-mn class="mjx-n" space="3"><mjx-c class="mjx-c31"></mjx-c></mjx-mn><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo><mjx-mo class="mjx-n"><mjx-c class="mjx-c21"></mjx-c></mjx-mo></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo stretchy="false">(</mo><mi>n</mi><mo>−</mo><mn>1</mn><mo stretchy="false">)</mo><mo>!</mo></math></mjx-assistive-mml></mjx-container></span> is applying the factorial definition to a value that is closer to our base case of <span class=""><mjx-container class="MathJax" jax="CHTML" style="font-size: 119.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D45B TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n" space="4"><mjx-c class="mjx-c3D"></mjx-c></mjx-mo><mjx-mn class="mjx-n" space="4"><mjx-c class="mjx-c30"></mjx-c></mjx-mn></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>n</mi><mo>=</mo><mn>0</mn></math></mjx-assistive-mml></mjx-container></span>. In this way, we can rest assured that, for any nonnegative integer <span class=""><mjx-container class="MathJax" jax="CHTML" style="font-size: 119.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D45B TEX-I"></mjx-c></mjx-mi></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>n</mi></math></mjx-assistive-mml></mjx-container></span>, this process will eventually reach a base case, at which point we can find our overall answer.</p>
<p><a class="anchor" name="catsoop_section_2_1"></a><a class="anchor" name="_programming"></a></p><h3 class="cs_section_title">2.1) Programming<a class="cs_permalink" href="#_programming">§</a></h3><p></p>
<p>It turns out that Python lets us define functions recursively (i.e., 
we can define functions in terms of themselves). As an example, here is a
 Python implementation of the definition of factorial from above (note 
that it is almost an exact translation):</p>
<section aria-label="Code block"><pre><code class="language-python hljs highlighted"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">factorial</span>(<span class="hljs-params">n</span>):</span>
    <span class="hljs-keyword">if</span> n == <span class="hljs-number">0</span>:
        <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>
    <span class="hljs-keyword">else</span>:
        <span class="hljs-keyword">return</span> n * factorial(n<span class="hljs-number">-1</span>)
</code></pre></section>
<p>We could try to write this more concisely, but this is a nice form to
 demonstrate how this definition parallels the mathematical definition 
from above. There are some key things to notice here:</p>
<ul>
<li>
<p>This is a recursive definition, since computing <code>factorial</code> depends on the definition of <code>factorial</code> (i.e., the function calls itself in the process of computing its result in some cases).</p>
</li>
<li>
<p>We have one base case. When <code>n == 0</code>, we can compute the result without any recursion.</p>
</li>
<li>
<p>We have one recursive case, which reduces down toward a base case.</p>
</li>
</ul>
<p>Before we move on to the details of how this works in Python, it's 
worth mentioning again that, depending on the extent of your prior 
exposure to these ideas, it may feel uncomfortable writing a function 
like this. And a big part of the weirdness here is that, as we're 
writing <code>factorial</code>, we're using <code>factorial</code> as part of the body, despite the fact that <em>we've not finished writing <code>factorial</code> yet!</em> But, the right strategy is to write your recursive case(s) <em>under the assumption that you have a complete, working version of the function</em>,
 and to think about, under those conditions, how would I take the result
 from that recursive call and combine it with other things to produce 
the result I'm interested in? And we don't need to have blind faith 
here; if we've designed things such that we have our base cases set up, 
and such that our recursive calls are working down toward one of those 
bases cases, then things will work out for us.</p>
<p>Another source of weirdness here is that, in the process of evaluating some call to <code>factorial</code>, I'm going to need to call <code>factorial</code> again and maybe many times; and each of these calls has its own value of <code>n</code>. So, how can we be sure that Python is going to keep those things separate and not get confused?</p>
<p><a class="anchor" name="catsoop_section_2_2"></a><a class="anchor" name="_recursion_in_the_environment_model"></a></p><h3 class="cs_section_title">2.2) Recursion in the Environment Model<a class="cs_permalink" href="#_recursion_in_the_environment_model">§</a></h3><p></p>
<p>Importantly, Python is able to keep those things separate, and its 
ability to do so is a natural effect of our normal rules for function 
evaluation (that is, Python does not treat recursive functions any 
differently from nonrecursive functions). Let's take a look at how this 
plays out using an environment diagram below, for evaluating <code>factorial(3)</code>. To start with, <strong>only proceed through step 5 below, and then answer the following question</strong>:</p>
<p>
<!--START question env1 --></p><section aria-label="Question">
<div class="question question-multiplechoice" id="cs_qdiv_env1" style="position: static">
<div id="env1_rendered_question">
<div id="catsoop_preamble_env1"></div>
<div id="catsoop_prompt_env1" style="display: inline;">Moving from step 5 to step 6 in the environment diagram below, where will <span class=""><mjx-container class="MathJax" jax="CHTML" style="font-size: 119.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-msub><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D439 TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em; margin-left: -0.106em;"><mjx-mn class="mjx-n" size="s"><mjx-c class="mjx-c32"></mjx-c></mjx-mn></mjx-script></mjx-msub></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>F</mi><mn>2</mn></msub></math></mjx-assistive-mml></mjx-container></span>'s parent pointer go?<br></div>
<select aria-labelledby="catsoop_prompt_env1" id="env1" name="env1">
<option value="-1">--</option>
<option selected="selected" value="0">Global Frame</option>
<option value="1">F1</option>
<option value="2">Built-ins</option>
<option value="3">Somewhere else.</option></select>
</div><div>
<span id="env1_buttons">
<button class="submit btn btn-catsoop" id="env1_submit" onclick="catsoop.submit('env1');" style="margin-top: 10px;">Submit</button>
<button class="clearanswer btn btn-catsoop" id="env1_clearanswer" onclick="catsoop.clearanswer('env1');" style="margin-top: 10px;">Clear Answer</button></span>
<span id="env1_loading_wrapper" role="status">
<span id="env1_loading" style="display:none;"><img class="catsoop-darkmode-invert" src="data:image/gif;base64,R0lGODlhEAAQAPIGAMLCwkJCQgAAAGJiYoKCgpKSkv///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAGACwAAAAAEAAQAAADMmi63P4wyklrAyEAGoQInAdOmGYBw7AxwLoMGcG2rkHEQFHQLTsQOd2mB9ERCpTWzpEAACH5BAkKAAYALAAAAgAKAA4AAAMraAYRoNAEIUJUs97VHgTD4EVDQ2xEM2wgMV5AUbyKLKNEvoxA3P8sYNCQAAAh+QQJCgAGACwAAAAACgAOAAADLWi6EAFrBSGCAmQ0as1wROFABuEM0TUQ5FUU7fK+aRkWNYDFqV4bOl8v+BMuEgAh+QQJCgAGACwAAAAADgAKAAADKmi6QAMrrhECkaaVVl+FRiFuAwEEghAoYxGhqgI0oPxlNSbPOcb3PqAkAQAh+QQJCgAGACwCAAAADgAKAAADKWhqUAUrLuekApA+MiDD4BYExAVGwzgsmNR0lgWMXmwEghDYCq7zDFoCACH5BAkKAAYALAYAAAAKAA4AAAMqaADWros9GEuRUBE7jeUTYGEhMZANEQREN6xDJ54PsKJGIAhBp/OyWyMBACH5BAkKAAYALAYAAgAKAA4AAAMpaKoA+609Fie1C5Tipt7WRhRWw0ED0T1DEAyMq7mEEghCAKTdnZcySwIAIfkEBQoABgAsAgAGAA4ACgAAAytoumwALb4X2YR1URACVkBRYIEgBIw4KuUJDERIzGD3doMhfguBZyAYT5EAADs="><span class="screenreader-only-clip">Loading...</span></span>
</span>
<span id="env1_score_display" role="status"></span>
<div class="nsubmits_left" id="env1_nsubmits_left" role="status">You have submitted this assignment 1 time.</div></div>
<div class="solution" id="env1_solution_container">
<div id="env1_solution">
<b>Solution:</b> Global Frame
</div>
<div id="env1_solution_explanation">
</div>
</div>
<div aria-atomic="true" id="env1_message" role="status"><img alt="Correct" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAMAAADzapwJAAABQVBMVEUAAAAGDQAAAAAAAAAAAAAAAAAAAACGqlBIfBNciiZGeg9Eeg5Feg5Gew9CdgpCdgxDehJvmDN1nj9plTVWhRtOgRlMfxZjkS5Geg9EeA5Geg5HfBBHew5GeQ5Cdg1CeAxDegtHgACVtmV+pURPgBp4oEBEeQx+o0p8oklFeg5YiCJIfRFEdQ5GehBHeg9CdwtEdQxEeg5Fdw5DeQ1Eegs2YQlCdwpCeAxDeQ0PHgBGdA9AdgkAAAAAAAARIgChwGKPs0qjwXKStUyFqD6CqDfJ3p+91Ji00XqlwmypyGihwGiauluWtlicwFKXulGTuEmMr0WOs0OKr0CGrDuEqjrR46zC2Ji+1ZC804640oK1z4CxzHywynqsx3enw3WYuWidvF+fwlqgxFePsFWSs1KIrE2Wu0uOr0qGqkeCpj50nDHRgoCJAAAAP3RSTlMABA0HEgoQ/ff17+jbxi8nDvz39vb29fTy7dPQoJeLVRUJ/f39+vn49/f118jAvrKWcW9jWllJQjkiIRwZFg8RajNxAAAA+klEQVQY06XQ1bLCMBAGYNJCHXfnuLtrFXc5gru+/wMQhhZouWRvMvNt/kx2dbvUC+V/3tY9OhZzX5i0HDqNxn/aRo2aXb/JXtR+p2HjfjUb5xmg1kfyL9v9d76q1UK1kqPaSWAFy1TQVs+zvCci4wd9fA8PE9HM5Rvkg5JlcJ68iuh8OFtkcb/ywrUtlUscUTfniaKQIlaj0AdsoZTuH2aEUsceXM/AuNNcmcsIZW7otWwsIuCacBVJqgycYdWPwx7rWJQKVu0y3n0OUZyemVUIAPp9S8wcIQRBDCgAsqIGBNM/eS/fPr/02KKx5IXDBixsfV2OwCYERebVjyGAvqhE3QAAAABJRU5ErkJggg=="></div>
</div>
</section>
<!--END question env1 -->
<p></p>
<div class="multistep response converted buttons-enabled" data-side-by-side-code="" markdown="" style="margin-right: -8%"><div class="multistep-buttons"><button disabled="disabled">&lt;&lt; First Step</button><button disabled="disabled">&lt; Previous Step</button><button>Next Step &gt;</button><button>Last Step &gt;&gt;</button></div>
<div class="step active" data-in-line="6" data-explanation-for-step="0">
<center><img class="envdia catsoop-darkmode-invert" src="Recursion%20_%20Course%20Readings%20_%206.101%20Spring%202025_files/env2.png" width="500"></center>
<div class="step-label">STEP 1</div>
<p>Here we have a diagram with two pieces: on the right-hand side, we have
an environment diagram; and on the left-hand side, we have space to keep track of
the expression we're evaluating.  (The left-hand side is a recursive-call diagram,
and we'll say more about these later in this reading.)</p>
<p>On the right-hand side, we see what the environment
diagram looks like after executing the function definition from above, and on the
left, we see the expression we are going to evaluate (<code>factorial(3)</code>),
evaluated in the global frame (<strong>GF</strong>).</p>
<p>In order to perform this function call, we follow our usual steps.  The first
step is to figure out what function we're calling (in this case, evaluating the
name <code>factorial</code> to find the function object on the right), as well
as the arguments to the function (in this case, an integer <code>3</code>).
The results are shown on the next diagram.</p>
</div>
<div class="step" data-in-line="6" data-explanation-for-step="1">
<center><img class="envdia catsoop-darkmode-invert" src="Recursion%20_%20Course%20Readings%20_%206.101%20Spring%202025_files/env3.png" width="500"></center>
<div class="step-label">STEP 2</div>
<p>Notice that we now have a new integer <code>3</code> to work with.  Our next
step is to set up a new frame for this function call, the result of which is shown
on the next diagram.</p>
</div>
<div class="step" data-in-line="2" data-explanation-for-step="2">
<center><img class="envdia catsoop-darkmode-invert" src="Recursion%20_%20Course%20Readings%20_%206.101%20Spring%202025_files/env4.png" width="500"></center>
<div class="step-label">STEP 3</div>
<p>Here we have our new frame (<strong>F1</strong>, which I've also labeled with some
information about the function we're calling there).  Notice that we have given
it a parent pointer (to the enclosing frame of the function we're calling), and
we've associated the name <code>n</code> with the argument <code>3</code> inside of <strong>F1</strong>.</p>
<p>With our new frame set up, we can now proceeed with evaluating the body of
the function with respect to <strong>F1</strong>.</p>
</div>
<div class="step" data-in-line="2-5" data-explanation-for-step="3">
<center><img class="envdia catsoop-darkmode-invert" src="Recursion%20_%20Course%20Readings%20_%206.101%20Spring%202025_files/env5.png" width="500"></center>
<div class="step-label">STEP 4</div>
<p>Evaluating the body, we start by checking <code>if n==0</code>.  We evaluate <code>n</code> in
<strong>F1</strong> (finding the associated <code>3</code>), which is not equal to <code>0</code>, so we move
on and hit <code>return n * factorial(n-1)</code>.</p>
<p>This is a complicated expression, but ultimately we need to multiply two things together: the integer <code>3</code> (which we get by evaluating the name <code>n</code> in <strong>F1</strong>) and the result of the function call <code>factorial(n-1)</code>.</p>
<p>In order to evaluate that function call, we need to evaluate the name
<code>factorial</code> in <strong>F1</strong> in order to figure out what function to call.  Here,
we don't find the name <code>factorial</code> in <strong>F1</strong>, so we follow its parent
pointer to the global frame, where we find <code>factorial</code> bound to the
function object at the top of the diagram; so that's the function we'll
call!</p>
<p>Then we also need to determine the argument to this function call, which we
do by evaluating <code>n-1</code> with respect to <strong>F1</strong>.  If we're being
pedantic, Python first evaluates <code>n</code> (finding <code>3</code>), then
evaluates <code>1</code> (which makes a new integer <code>1</code>), then
subtracts them to get a new integer <code>2</code>.</p>
<p>Once we know what function we're calling (the only function object drawn in
the diagram) and what arguments to pass in (<code>2</code>), we can set up our new frame.
The next slide shows the <em>almost-complete</em> result of that step.</p>
</div>
<div class="step" data-before-line="2" data-explanation-for-step="4">
<center><img class="envdia catsoop-darkmode-invert" src="Recursion%20_%20Course%20Readings%20_%206.101%20Spring%202025_files/env6.png" width="500"></center>
<div class="step-label">STEP 5</div>
<p>Here we have the result of setting up that new frame but with one key piece
missing: our new frame's parent pointer.</p>
<p><strong>STOP HERE FOR A MOMENT AND ANSWER THE QUESTION ABOVE THE DIAGRAM BEFORE MOVING ON.</strong></p>
</div>
<div class="step" data-before-line="2" data-explanation-for-step="5">
<center><img class="envdia catsoop-darkmode-invert" src="Recursion%20_%20Course%20Readings%20_%206.101%20Spring%202025_files/env7.png" width="500"></center>
<div class="step-label">STEP 6</div>
<p>Here is where we need to be somewhat careful about the rules for function
application!  Recall that when we make a new frame for a function call, the new
frame's parent pointer goes to <em>the function's enclosing frame</em> (i.e., the
frame where that function object was defined).</p>
<p>Importantly, that is true regardless of what frame we're <em>calling</em> the function
from.  That is, what matters for this rule is the frame where the function was
defined, not the frame from which it is being called.</p>
<p>If you are unclear about this, it may help to review the <a href="https://py.mit.edu/spring25/readings/functions#_functions_and_the_environment_model">rules for defining and calling a function</a>.</p>
</div>
<div class="step" data-in-line="2-5" data-explanation-for-step="6">
<center><img class="envdia catsoop-darkmode-invert" src="Recursion%20_%20Course%20Readings%20_%206.101%20Spring%202025_files/env8.png" width="500"></center>
<div class="step-label">STEP 7</div>
<p>Now that we've got our frame completely set up, we can proceed with
evaluating the body of the function inside of <strong>F2</strong>.</p>
<p>Evaluating the body, we first check <code>n==0</code> and find that that
condition does not hold, so we move on and evaluate <code>return n *
factorial(n-1)</code> with respect to <strong>F2</strong>.</p>
<p>Evaluating that multiplication, we find <code>n</code> bound to
<code>2</code>, and in order to figure out what to multiply by, we need to
evaluate <code>factorial(n-1)</code>.  It's another function call!  So we
proceed with our same steps.</p>
<p>We start by figuring out what function we're calling and what arguments
we're passing in.  We find the function by evaluating the name
<code>factorial</code> in <strong>F2</strong>.  Since we don't find it there, we follow
the parent pointer to the global frame, where we find the function object drawn
at the top of the diagram.</p>
<p>Then, evaluating <code>n-1</code> in <strong>F2</strong>, we get <code>1</code>.  So
now that we have our function and our arguments, we can proceed with following
our normal sequence of steps (setting up a new frame (with parent pointer),
binding the parameters to the arguments that were passed in, and evaluating the
body of the function in that new frame).</p>
<p>You may wish to pause here and try to draw the result of setting up the
next frame for yourself.  Where should its parent pointer go?  What names
should be bound in it, and to what objects are they bound?  What will be the
result of evaluating the body of the function in this new frame?</p>
</div>
<div class="step" data-in-line="2-5" data-explanation-for-step="7">
<center><img class="envdia catsoop-darkmode-invert" src="Recursion%20_%20Course%20Readings%20_%206.101%20Spring%202025_files/env9.png" width="500"></center>
<div class="step-label">STEP 8</div>
<p>Here we see the result we arrive at after setting up our new frame
<strong>F3</strong>.  The process was the same as what we just did for frame <strong>F2</strong>,
so the parent frame is <strong>GF</strong>, but the name <code>n</code> is now bound to the value <code>1</code>.</p>
<p>When we evaluate the body of the function in <strong>F3</strong>, we first check
<code>n==0</code>, and, since that evauates to <code>False</code>, we continue
on to evaluating <code>n * factorial(n-1)</code> in <strong>F3</strong>.  Here we have to
evaluate another function call, calling the same function but now with
<code>0</code> passed in.  So we'll set up another frame, shown on the next
step.</p>
</div>
<div class="step" data-before-line="2" data-explanation-for-step="8">
<center><img class="envdia catsoop-darkmode-invert" src="Recursion%20_%20Course%20Readings%20_%206.101%20Spring%202025_files/env10.png" width="500"></center>
<div class="step-label">STEP 9</div>
<p>Notice that our new frame (which we'll call <strong>F4</strong> even though I forgot
to write that label next to it above) has the global frame as its parent, and
it has the name <code>n</code> bound to <code>0</code>.  This has admittedly been
a somewhat tedious process, but we've now arrived at a base case, and something
very exciting is about to happen!  Let's see what happens when we evaluate the
body of the function in <strong>F4</strong>.</p>
</div>
<div class="step" data-in-line="2-3" data-explanation-for-step="9">
<center><img class="envdia catsoop-darkmode-invert" src="Recursion%20_%20Course%20Readings%20_%206.101%20Spring%202025_files/env11.png" width="500"></center>
<div class="step-label">STEP 10</div>
<p>Here, we first check <code>if n == 0</code>, and, finally, it does!  So we
evaluate <code>1</code> in <strong>F4</strong> to get a new integer object, which we
return.</p>
<p>But this was just the return from our most recent function call!  Let's
remember how we got here.  We were evaluating <code>n * factorial(n-1)</code>
in <strong>F3</strong>.  So now we can go back and finish that computation, taking the
result of our recursive call (<code>1</code>) and multiplying it by
<code>1</code> to get our result.</p>
</div>
<div class="step" data-in-line="5" data-explanation-for-step="10">
<center><img class="envdia catsoop-darkmode-invert" src="Recursion%20_%20Course%20Readings%20_%206.101%20Spring%202025_files/env12.png" width="500"></center>
<div class="step-label">STEP 11</div>
<p>Notice that we're returning <code>1</code> from the function call that created
<strong>F3</strong>.  But how did we get <em>there</em>?  We were evaluating <code>2 *
factorial(1)</code> in <strong>F2</strong>!  So we can take this result (<code>1</code> returned by <code>factorial(1)</code>)
and combine it with <code>2</code> to get the return value from <strong>F2</strong>!</p>
</div>
<div class="step" data-in-line="5" data-explanation-for-step="11">
<center><img class="envdia catsoop-darkmode-invert" src="Recursion%20_%20Course%20Readings%20_%206.101%20Spring%202025_files/env13.png" width="500"></center>
<div class="step-label">STEP 12</div>
<p>And now that we know <em>this</em> value, we can combine it with our
<code>3</code> to get the overall result from <strong>F1</strong> (from our original
function call).</p>
</div>
<div class="step" data-in-line="5" data-explanation-for-step="12">
<center><img class="envdia catsoop-darkmode-invert" src="Recursion%20_%20Course%20Readings%20_%206.101%20Spring%202025_files/env14.png" width="500"></center>
<div class="step-label">STEP 13</div>
<p>And, finally, we have found the result of our original call!  And the very last step is to clean up <strong>F1</strong>.</p>
</div>
<div class="step" data-after-line="6" data-explanation-for-step="13">
<center><img class="envdia catsoop-darkmode-invert" src="Recursion%20_%20Course%20Readings%20_%206.101%20Spring%202025_files/env15.png" width="500"></center>
<div class="step-label">STEP 14</div>
<p>This was quite a process, but hopefully it was helpful to walk 
through the
steps here to see how things were working themselves out as this program
 ran.  Of course, if you have questions about this process, please don't
 hesitate to ask them!</p>
</div>
</div>
<section aria-label="Code block"><button role="button" aria-pressed="true" class="catsoop-code-showhide">Show/Hide Line Numbers</button><pre style="padding-left: 0px !important;"><code class="language-python hljs highlighted"><div class="catsoop-code-display hljs-ln"><div class="catsoop-code-line" style="background-color: inherit; border-top: 3px solid transparent;"><span class="hljs-ln-line hljs-ln-numbers" data-line-number="1">1</span><span class="hljs-ln-line hljs-ln-code" data-line-number="1"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">factorial</span>(<span class="hljs-params">n</span>):</span></span></div><div class="catsoop-code-line" style="background-color: inherit; border-top: 3px solid transparent;"><span class="hljs-ln-line hljs-ln-numbers" data-line-number="2">2</span><span class="hljs-ln-line hljs-ln-code" data-line-number="2">  <span class="hljs-keyword">if</span> n == <span class="hljs-number">0</span>:</span></div><div class="catsoop-code-line" style="background-color: inherit; border-top: 3px solid transparent;"><span class="hljs-ln-line hljs-ln-numbers" data-line-number="3">3</span><span class="hljs-ln-line hljs-ln-code" data-line-number="3">    <span class="hljs-keyword">return</span> <span class="hljs-number">1</span></span></div><div class="catsoop-code-line" style="background-color: inherit; border-top: 3px solid transparent;"><span class="hljs-ln-line hljs-ln-numbers" data-line-number="4">4</span><span class="hljs-ln-line hljs-ln-code" data-line-number="4">  <span class="hljs-keyword">else</span>:</span></div><div class="catsoop-code-line" style="background-color: inherit; border-top: 3px solid transparent;"><span class="hljs-ln-line hljs-ln-numbers" data-line-number="5">5</span><span class="hljs-ln-line hljs-ln-code" data-line-number="5">    <span class="hljs-keyword">return</span> n * factorial(n<span class="hljs-number">-1</span>)</span></div><div class="catsoop-code-line" style="background-color: rgb(255, 255, 160); border-top: 3px solid transparent; border-bottom: 3px solid transparent;"><span class="hljs-ln-line hljs-ln-numbers" data-line-number="6">6</span><span class="hljs-ln-line hljs-ln-code" data-line-number="6">factorial(<span class="hljs-number">3</span>)</span></div></div></code></pre></section>
<div style="clear: both"></div>
<p>
<!--START question q000000 --></p><section aria-label="Question">
<div class="question question-pythonic" id="cs_qdiv_q000000" style="position: static">
<div id="q000000_rendered_question">
<div id="catsoop_preamble_q000000"></div>
<div id="catsoop_prompt_q000000" style="display: inline;">As a follow-on
 question, with factorial written as above, how many total frames (other
 than the global frame and the built-ins) are created when we call <code>factorial(7)</code>?<br></div><input aria-labelledby="catsoop_prompt_q000000" id="q000000" name="q000000" size="50" type="text" value="8">
</div><div>
<span id="q000000_buttons">
<button class="submit btn btn-catsoop" id="q000000_submit" onclick="catsoop.submit('q000000');" style="margin-top: 10px;">Submit</button>
<button class="clearanswer btn btn-catsoop" id="q000000_clearanswer" onclick="catsoop.clearanswer('q000000');" style="margin-top: 10px;">Clear Answer</button></span>
<span id="q000000_loading_wrapper" role="status">
<span id="q000000_loading" style="display:none;"><img class="catsoop-darkmode-invert" src="data:image/gif;base64,R0lGODlhEAAQAPIGAMLCwkJCQgAAAGJiYoKCgpKSkv///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAGACwAAAAAEAAQAAADMmi63P4wyklrAyEAGoQInAdOmGYBw7AxwLoMGcG2rkHEQFHQLTsQOd2mB9ERCpTWzpEAACH5BAkKAAYALAAAAgAKAA4AAAMraAYRoNAEIUJUs97VHgTD4EVDQ2xEM2wgMV5AUbyKLKNEvoxA3P8sYNCQAAAh+QQJCgAGACwAAAAACgAOAAADLWi6EAFrBSGCAmQ0as1wROFABuEM0TUQ5FUU7fK+aRkWNYDFqV4bOl8v+BMuEgAh+QQJCgAGACwAAAAADgAKAAADKmi6QAMrrhECkaaVVl+FRiFuAwEEghAoYxGhqgI0oPxlNSbPOcb3PqAkAQAh+QQJCgAGACwCAAAADgAKAAADKWhqUAUrLuekApA+MiDD4BYExAVGwzgsmNR0lgWMXmwEghDYCq7zDFoCACH5BAkKAAYALAYAAAAKAA4AAAMqaADWros9GEuRUBE7jeUTYGEhMZANEQREN6xDJ54PsKJGIAhBp/OyWyMBACH5BAkKAAYALAYAAgAKAA4AAAMpaKoA+609Fie1C5Tipt7WRhRWw0ED0T1DEAyMq7mEEghCAKTdnZcySwIAIfkEBQoABgAsAgAGAA4ACgAAAytoumwALb4X2YR1URACVkBRYIEgBIw4KuUJDERIzGD3doMhfguBZyAYT5EAADs="><span class="screenreader-only-clip">Loading...</span></span>
</span>
<span id="q000000_score_display" role="status"></span>
<div class="nsubmits_left" id="q000000_nsubmits_left" role="status">You have submitted this assignment 1 time.</div></div>
<div class="solution" id="q000000_solution_container">
<div id="q000000_solution">
<p><b>Solution:</b> <tt>8</tt></p><p>
</p><p></p>
</div>
<div id="q000000_solution_explanation">
</div>
</div>
<div aria-atomic="true" id="q000000_message" role="status"><img alt="Correct" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAMAAADzapwJAAABQVBMVEUAAAAGDQAAAAAAAAAAAAAAAAAAAACGqlBIfBNciiZGeg9Eeg5Feg5Gew9CdgpCdgxDehJvmDN1nj9plTVWhRtOgRlMfxZjkS5Geg9EeA5Geg5HfBBHew5GeQ5Cdg1CeAxDegtHgACVtmV+pURPgBp4oEBEeQx+o0p8oklFeg5YiCJIfRFEdQ5GehBHeg9CdwtEdQxEeg5Fdw5DeQ1Eegs2YQlCdwpCeAxDeQ0PHgBGdA9AdgkAAAAAAAARIgChwGKPs0qjwXKStUyFqD6CqDfJ3p+91Ji00XqlwmypyGihwGiauluWtlicwFKXulGTuEmMr0WOs0OKr0CGrDuEqjrR46zC2Ji+1ZC804640oK1z4CxzHywynqsx3enw3WYuWidvF+fwlqgxFePsFWSs1KIrE2Wu0uOr0qGqkeCpj50nDHRgoCJAAAAP3RSTlMABA0HEgoQ/ff17+jbxi8nDvz39vb29fTy7dPQoJeLVRUJ/f39+vn49/f118jAvrKWcW9jWllJQjkiIRwZFg8RajNxAAAA+klEQVQY06XQ1bLCMBAGYNJCHXfnuLtrFXc5gru+/wMQhhZouWRvMvNt/kx2dbvUC+V/3tY9OhZzX5i0HDqNxn/aRo2aXb/JXtR+p2HjfjUb5xmg1kfyL9v9d76q1UK1kqPaSWAFy1TQVs+zvCci4wd9fA8PE9HM5Rvkg5JlcJ68iuh8OFtkcb/ywrUtlUscUTfniaKQIlaj0AdsoZTuH2aEUsceXM/AuNNcmcsIZW7otWwsIuCacBVJqgycYdWPwx7rWJQKVu0y3n0OUZyemVUIAPp9S8wcIQRBDCgAsqIGBNM/eS/fPr/02KKx5IXDBixsfV2OwCYERebVjyGAvqhE3QAAAABJRU5ErkJggg=="><br></div>
</div>
</section>
<!--END question q000000 -->
<p></p>
<p><a class="anchor" name="catsoop_section_3"></a><a class="anchor" name="_recursion_in_the_wild"></a></p><h2 class="cs_section_title">3) Recursion in the Wild<a class="cs_permalink" href="#_recursion_in_the_wild">§</a></h2><p></p>
<p>To reinforce the idea that some problems are naturally recursive, 
let's look at a quick example from a very practical program: CAT-SOOP, 
the software that is running the website you're looking at right now.  
CAT-SOOP is written in Python.  One of its tasks is to store information
 about submissions that are made and other events that happen while you 
are using it, so it has a notion of a <a href="https://en.wikipedia.org/wiki/Logging_(software)"><em>log</em></a> that records information on disk about those events.</p>
<p>We don't want to get too much into the details about how CAT-SOOP 
does logging, but here is one part of the system that is particularly 
relevant to our discussion: a function that tests whether some arbitrary
 Python value can be stored in the log or not.</p>
<section aria-label="Code block"><pre><code class="language-python hljs highlighted"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">can_log</span>(<span class="hljs-params">x</span>):</span>
    <span class="hljs-string">"""
    Checks whether a given value can be a log entry.
    Valid log entries are strings, ints, floats, complex numbers, None, or Booleans;
    _or_ lists, tuples, sets, frozensets, dicts, or OrderedDicts containing only valid log entries.
    """</span>
</code></pre></section>
<p>Look at the docstring of this function: it gives us a nice description of which values can be valid log entries.
What about this description suggests that recursion might be the best way to implement this function?</p>
<p>The docstring defines what a "valid log entry" is in a way that <em>depends on</em> the definition of a valid log entry!</p>
<blockquote>
<p><strong>Valid log entries</strong> are strings, ints, floats, etc.
<em>or</em> lists, tuples, sets, etc. containing only <strong>valid log entries</strong>.</p>
</blockquote>
<p>Definitions like this are extremely common in programming, data representation, and software systems in general.</p>
<p>How would we implement this recursively?  First notice that the definition has a base case:</p>
<section aria-label="Code block"><pre><code class="language-python hljs highlighted">    <span class="hljs-keyword">if</span> isinstance(x, (str, bytes, int, float, complex, NoneType, bool)):
        <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span>
</code></pre></section>
<p>If <code>x</code> is one of these types, then we're done, we don't need to do any further recursion at all.</p>
<p>But, then, we've also got these recursive cases: if <code>x</code> is one of the collection types, like <code>list</code>, <code>tuple</code>, or <code>set</code>, then</p>
<section aria-label="Code block"><pre><code class="language-python hljs highlighted">    <span class="hljs-keyword">elif</span> isinstance(x, (list, tuple, set, frozenset)):
        <span class="hljs-keyword">return</span> all(can_log(v) <span class="hljs-keyword">for</span> v <span class="hljs-keyword">in</span> x)
</code></pre></section>
<p>Notice that the recursive call to <code>can_log</code> is applied to every element of the collection.
(The built-in function <a href="https://docs.python.org/3/library/functions.html#all"><code>all</code></a> tests whether every element of an iterable is true, so it effectively <code>and</code>s together the results of all those recursive calls.)
Most importantly, although those elements of the collection <em>could</em>
 be simple strings or ints (base cases), they could also be lists or 
sets or other collections themselves, thus needing still further 
recursion.  The recursive implementation automatically takes care of 
that, no matter how complex the nesting gets.</p>
<p>We also need to handle dictionaries, which need two recursive calls for each (key,value) pair:</p>
<section aria-label="Code block"><pre><code class="language-python hljs highlighted">    <span class="hljs-keyword">elif</span> isinstance(x, (dict, OrderedDict)):
        <span class="hljs-keyword">return</span> all((can_log(k) <span class="hljs-keyword">and</span> can_log(v)) <span class="hljs-keyword">for</span> k,v <span class="hljs-keyword">in</span> x.items())
</code></pre></section>
<p>And, finally, there's a second base case, which is if <code>x</code> does not have any of the types we checked for, then it's not a valid log entry, so we need to return <code>False</code>.  Here's the full function:</p>
<section aria-label="Code block"><pre><code class="language-python hljs highlighted"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">can_log</span>(<span class="hljs-params">x</span>):</span>
    <span class="hljs-string">"""
    Checks whether a given value can be a log entry.
    Valid log entries are strings/bytestrings, ints, floats, complex numbers,
    None, or Booleans; _or_ lists, tuples, sets, frozensets, dicts, or
    OrderedDicts containing only valid log entries.
    """</span>
    <span class="hljs-keyword">if</span> isinstance(x, (str, bytes, int, float, complex, NoneType, bool)):
        <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span>
    <span class="hljs-keyword">elif</span> isinstance(x, (list, tuple, set, frozenset)):
        <span class="hljs-keyword">return</span> all(can_log(v) <span class="hljs-keyword">for</span> v <span class="hljs-keyword">in</span> x)
    <span class="hljs-keyword">elif</span> isinstance(x, (dict, OrderedDict)):
        <span class="hljs-keyword">return</span> all((can_log(k) <span class="hljs-keyword">and</span> can_log(v)) <span class="hljs-keyword">for</span> k,v <span class="hljs-keyword">in</span> x.items())
    <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span>
</code></pre></section>
<p>The details of this function don't matter as much as the big picture:
 this is a practical problem in which the structure of the problem was 
such that a recursive solution really jumps out as the simplest and most
 appropriate way to do it.</p>
<p><a class="anchor" name="catsoop_section_4"></a><a class="anchor" name="_summing_a_list"></a></p><h2 class="cs_section_title">4) Summing a List<a class="cs_permalink" href="#_summing_a_list">§</a></h2><p></p>
<p>Let's dig into another example: summing a list of numbers:</p>
<section aria-label="Code block"><pre><code class="language-python hljs highlighted"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">sum_list</span>(<span class="hljs-params">x</span>):</span>
    <span class="hljs-string">"""
    Compute the sum of a list of numbers, recursively.
    """</span>
    <span class="hljs-keyword">pass</span>
</code></pre></section>
<p>We could use the builtin function <code>sum()</code> to do this, of course, or we could write an iterative solution, which is what <code>sum()</code> is doing anyway:</p>
<section aria-label="Code block"><pre><code class="language-python hljs highlighted"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">sum_list</span>(<span class="hljs-params">x</span>):</span>
    out = <span class="hljs-number">0</span>
    <span class="hljs-keyword">for</span> num <span class="hljs-keyword">in</span> x:
        out += num
    <span class="hljs-keyword">return</span> out
</code></pre></section>
<p>We'll talk more about the tradeoffs between iteration and recursion 
in the next reading.
For now, though, let's try to do everything recursively.
Intuition from these simple examples will help for more complicated 
situations where a builtin function doesn't exist or where an iterative 
solution is not the best way to do it.</p>
<div class="question"><b>Check Yourself:</b><p></p><p>First, let's think about what our base case(s) might look like.  For what inputs to <code>sum_list</code> can we return the answer right away, without any work?</p>
<div class="response"><button aria-pressed="false" class="btn btn-catsoop showhide-toggle" onclick='this.setAttribute("aria-pressed", this.getAttribute("aria-pressed") === "true" ? "false" : "true");' role="button">Show/Hide</button><div><p>Here's
 one possibility: if the list has only one element in it, then we don't 
have to do any addition.  We can just return that element:</p>
<section aria-label="Code block"><pre><code class="language-python hljs highlighted"><span class="hljs-comment"># BASE CASE</span>
<span class="hljs-keyword">if</span> len(x) == <span class="hljs-number">1</span>:
    <span class="hljs-keyword">return</span> x[<span class="hljs-number">0</span>]
</code></pre></section>
<p>This is not the only base case we might use, and maybe it's not even the best choice, but let's try it for now.</p>
<div class="question"><b>Check Yourself:</b><p></p><p>Given that, what could we use as a recursive case?</p>
<div class="response"><button aria-pressed="false" class="btn btn-catsoop showhide-toggle" onclick='this.setAttribute("aria-pressed", this.getAttribute("aria-pressed") === "true" ? "false" : "true");' role="button">Show/Hide</button><div>How about this:
<section aria-label="Code block"><pre><code class="language-python hljs highlighted">    <span class="hljs-comment"># RECURSIVE CASE</span>
    <span class="hljs-keyword">else</span>:
        <span class="hljs-keyword">return</span> x[<span class="hljs-number">0</span>] + sum_list(x[<span class="hljs-number">1</span>:])
</code></pre></section>
<p>This corresponds to the mathematical expresion</p>
<p></p><div class="cs_displaymath" style="text-align:center;padding-bottom:10px;"><mjx-container class="MathJax" jax="CHTML" style="font-size: 113.1%; position: relative;" display="true"><mjx-math display="true" style="margin-left: 0px; margin-right: 0px;" class="MJX-TEX" aria-hidden="true"><mjx-munderover><mjx-over style="padding-bottom: 0.142em; padding-left: 0.058em;"><mjx-texatom size="s" texclass="ORD"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D45B TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c2212"></mjx-c></mjx-mo><mjx-mn class="mjx-n"><mjx-c class="mjx-c31"></mjx-c></mjx-mn></mjx-texatom></mjx-over><mjx-box><mjx-munder><mjx-row><mjx-base><mjx-mo class="mjx-lop"><mjx-c class="mjx-c2211 TEX-S2"></mjx-c></mjx-mo></mjx-base></mjx-row><mjx-row><mjx-under style="padding-top: 0.167em; padding-left: 0.148em;"><mjx-texatom size="s" texclass="ORD"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D456 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c3D"></mjx-c></mjx-mo><mjx-mn class="mjx-n"><mjx-c class="mjx-c30"></mjx-c></mjx-mn></mjx-texatom></mjx-under></mjx-row></mjx-munder></mjx-box></mjx-munderover><mjx-mi class="mjx-i" space="2"><mjx-c class="mjx-c1D465 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c5B"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D456 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c5D"></mjx-c></mjx-mo><mjx-mo class="mjx-n" space="4"><mjx-c class="mjx-c3D"></mjx-c></mjx-mo><mjx-mi class="mjx-i" space="4"><mjx-c class="mjx-c1D465 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c5B"></mjx-c></mjx-mo><mjx-mn class="mjx-n"><mjx-c class="mjx-c30"></mjx-c></mjx-mn><mjx-mo class="mjx-n"><mjx-c class="mjx-c5D"></mjx-c></mjx-mo><mjx-mo class="mjx-n" space="3"><mjx-c class="mjx-c2B"></mjx-c></mjx-mo><mjx-munderover space="3"><mjx-over style="padding-bottom: 0.142em; padding-left: 0.058em;"><mjx-texatom size="s" texclass="ORD"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D45B TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c2212"></mjx-c></mjx-mo><mjx-mn class="mjx-n"><mjx-c class="mjx-c31"></mjx-c></mjx-mn></mjx-texatom></mjx-over><mjx-box><mjx-munder><mjx-row><mjx-base><mjx-mo class="mjx-lop"><mjx-c class="mjx-c2211 TEX-S2"></mjx-c></mjx-mo></mjx-base></mjx-row><mjx-row><mjx-under style="padding-top: 0.167em; padding-left: 0.148em;"><mjx-texatom size="s" texclass="ORD"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D456 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c3D"></mjx-c></mjx-mo><mjx-mn class="mjx-n"><mjx-c class="mjx-c31"></mjx-c></mjx-mn></mjx-texatom></mjx-under></mjx-row></mjx-munder></mjx-box></mjx-munderover><mjx-mi class="mjx-i" space="2"><mjx-c class="mjx-c1D465 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c5B"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D456 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c5D"></mjx-c></mjx-mo></mjx-math><mjx-assistive-mml unselectable="on" display="block"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><munderover><mo data-mjx-texclass="OP">∑</mo><mrow data-mjx-texclass="ORD"><mi>i</mi><mo>=</mo><mn>0</mn></mrow><mrow data-mjx-texclass="ORD"><mi>n</mi><mo>−</mo><mn>1</mn></mrow></munderover><mi>x</mi><mo stretchy="false">[</mo><mi>i</mi><mo stretchy="false">]</mo><mo>=</mo><mi>x</mi><mo stretchy="false">[</mo><mn>0</mn><mo stretchy="false">]</mo><mo>+</mo><munderover><mo data-mjx-texclass="OP">∑</mo><mrow data-mjx-texclass="ORD"><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mrow data-mjx-texclass="ORD"><mi>n</mi><mo>−</mo><mn>1</mn></mrow></munderover><mi>x</mi><mo stretchy="false">[</mo><mi>i</mi><mo stretchy="false">]</mo></math></mjx-assistive-mml></mjx-container></div><p></p>
<p>which is indeed true for <span class=""><mjx-container class="MathJax" jax="CHTML" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D45B TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n" space="4"><mjx-c class="mjx-c3E"></mjx-c></mjx-mo><mjx-mn class="mjx-n" space="4"><mjx-c class="mjx-c31"></mjx-c></mjx-mn></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>n</mi><mo>&gt;</mo><mn>1</mn></math></mjx-assistive-mml></mjx-container></span>.
</p></div></div>
<p></p><p><span id="queue_checkyourself_1"></span></p></div>
</div></div><p></p><p><span id="queue_checkyourself_1"></span></p></div>


<p>So now our whole function looks like:</p>
<section aria-label="Code block"><pre><code class="language-python hljs highlighted"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">sum_list</span>(<span class="hljs-params">x</span>):</span>
    <span class="hljs-keyword">if</span> len(x) == <span class="hljs-number">1</span>:
        <span class="hljs-keyword">return</span> x[<span class="hljs-number">0</span>]
    <span class="hljs-keyword">else</span>:
        <span class="hljs-keyword">return</span> x[<span class="hljs-number">0</span>] + sum_list(x[<span class="hljs-number">1</span>:])
</code></pre></section>
<p><a class="anchor" name="catsoop_section_4_1"></a><a class="anchor" name="_aside_doctest"></a></p><h3 class="cs_section_title">4.1) Aside: Doctest<a class="cs_permalink" href="#_aside_doctest">§</a></h3><p></p>
<p>We're not done with <code>sum_list</code> yet, but let's take a moment to write some tests and see another useful Python tool that may not be familiar to you.
There's a module built into Python called <code>doctest</code>, which lets us embed simple test cases inside the docstring of a function.
The tests are formatted as if they were typed in the Python prompt, using <code>&gt;&gt;&gt;</code> to indicate what should be typed, followed by what the expected output should be:</p>
<section aria-label="Code block"><pre><code class="language-python hljs highlighted"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">sum_list</span>(<span class="hljs-params">x</span>):</span>
    <span class="hljs-string">"""
    Compute the sum of a list of numbers, recursively.

    &gt;&gt;&gt; sum_list([1,2,3,4,5])
    15
    """</span>
    <span class="hljs-keyword">if</span> len(x) == <span class="hljs-number">1</span>:
        <span class="hljs-keyword">return</span> x[<span class="hljs-number">0</span>]
    <span class="hljs-keyword">else</span>:
        <span class="hljs-keyword">return</span> x[<span class="hljs-number">0</span>] + sum_list(x[<span class="hljs-number">1</span>:])
</code></pre></section>
<p>This is already helpful because it gives examples of using the function to a human reading the docstring.  But, <code>doctest</code> goes a step further by automatically extracting these test cases and running them as automatic tests.  If you call <code>doctest.testmod()</code>, e.g., in the main block of your file, then it will run all the docstring tests it can find in that file:</p>
<section aria-label="Code block"><pre><code class="language-python hljs highlighted"><span class="hljs-meta">... </span><span class="hljs-comment"># definition of sum_list</span>

<span class="hljs-keyword">import</span> doctest
<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">'__main__'</span>:
    doctest.testmod(verbose=<span class="hljs-literal">True</span>)
</code></pre></section>
<p>Now, running the whole file will invoke all the docstring tests, and we'll see that it passed:</p>
<section aria-label="Code block"><pre><code class="language-plain highlighted">$ python sum_list.py
Trying:
    sum_list([1,2,3,4,5])
Expecting:
    15
ok
1 passed and 0 failed.
Test passed.
</code></pre></section>
<p>It's a good idea to include <code>verbose=True</code> as a parameter to <code>testmod()</code> -- otherwise, when all the tests pass, as in this case, <code>doctest</code> will simply succeed silently.</p>
<p>We can put as many doctests as we want into a docstring, so let's add
 another, which looks at what happens when we sum an empty list:</p>
<section aria-label="Code block"><pre><code class="language-python hljs highlighted"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">sum_list</span>(<span class="hljs-params">x</span>):</span>
    <span class="hljs-string">"""
    Compute the sum of a list of numbers, recursively.

    &gt;&gt;&gt; sum_list([1,2,3,4,5])
    15
    &gt;&gt;&gt; sum_list([])
    0
    """</span>
    <span class="hljs-keyword">if</span> len(x) == <span class="hljs-number">1</span>:
        <span class="hljs-keyword">return</span> x[<span class="hljs-number">0</span>]
    <span class="hljs-keyword">else</span>:
        <span class="hljs-keyword">return</span> x[<span class="hljs-number">0</span>] + sum_list(x[<span class="hljs-number">1</span>:])
</code></pre></section>
<p>Note that slicing a list out of bounds like <code>sum_list[1:]</code> will return an empty list (but indexing a list like <code>sum_list[1]</code> would cause an <code>IndexError</code>.)</p>
<section aria-label="Code block"><pre><code class="nohighlight highlighted">Trying:
    sum_list([1,2,3,4,5])
Expecting:
    15
ok
Trying:
    sum_list([])
Expecting:
    0
**********************************************************************
File "sum_list.py", line 8, in __main__.sum_list
Failed example:
    sum_list([])
Exception raised:
    Traceback (most recent call last):
      File "doctest.py", line 1346, in __run
        exec(compile(example.source, filename, "single",
      File "&lt;doctest __main__.sum_list[1]&gt;", line 1, in &lt;module&gt;
        sum_list([])
      File "sum_list.py", line 14, in sum_list
        return x[0] + sum_list(x[1:])
    IndexError: list index out of range
**********************************************************************
1 passed and 1 failed.
***Test Failed*** 1 failures.
</code></pre></section>
<p>Oops!  We have a failure.  Can you see why it's going wrong?  We'll see how to fix it in the next section.</p>
<p><strong>One big caveat</strong> about doctest: it works by checking <em>printed output</em>, not by using <code>==</code> to compare the expected value with the actual value (which is what we do with <code>assert</code> in other kinds of tests we write).  This has two unfortunate effects:</p>
<ul>
<li>if you put any <code>print</code> statements into your code to debug
 it, those prints will cause doctests to fail, because the docstring 
won't mention them as expected output.  You have to remove or comment 
out all  your debugging prints in order for the test to pass again.</li>
<li>if there is any harmless variation in the output -- for example, the
 order in which a set or dictionary is printed -- then the test will 
fail, even if the set or dictionary is actually correct.  We'll see one 
way to deal with this problem below.</li>
</ul>
<p>That said, the convenience and understandability of having executable
 test cases right in a function's documentation can be a big win.</p>
<p><a class="anchor" name="catsoop_section_4_2"></a><a class="anchor" name="_getting_the_base_cases_right"></a></p><h3 class="cs_section_title">4.2) Getting the Base Cases Right<a class="cs_permalink" href="#_getting_the_base_cases_right">§</a></h3><p></p>
<p>Let's add a base case to deal with the empty list:</p>
<section aria-label="Code block"><pre><code class="language-python hljs highlighted"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">sum_list</span>(<span class="hljs-params">x</span>):</span>
    <span class="hljs-keyword">if</span> len(x) == <span class="hljs-number">0</span>:
        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>
    <span class="hljs-keyword">elif</span> len(x) == <span class="hljs-number">1</span>:
        <span class="hljs-keyword">return</span> x[<span class="hljs-number">0</span>]
    <span class="hljs-keyword">else</span>:
        <span class="hljs-keyword">return</span> x[<span class="hljs-number">0</span>] + sum_list(x[<span class="hljs-number">1</span>:])
</code></pre></section>
<p>Now the code works, but, if we reflect on it a little more, do we need <em>both</em>
 of these base cases?  No!  Now that we handle the length-0 list 
correctly, the length-1 base case is redundant with the recursive case.
To see this more clearly, we can imagine having base cases for length-2,
 length-3, and so forth:</p>
<section aria-label="Code block"><pre><code class="language-python hljs highlighted"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">sum_list</span>(<span class="hljs-params">x</span>):</span>
    <span class="hljs-keyword">if</span> len(x) == <span class="hljs-number">0</span>:
        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>
    <span class="hljs-keyword">elif</span> len(x) == <span class="hljs-number">1</span>:
        <span class="hljs-keyword">return</span> x[<span class="hljs-number">0</span>]
    <span class="hljs-keyword">elif</span> len(x) == <span class="hljs-number">2</span>:
        <span class="hljs-keyword">return</span> x[<span class="hljs-number">0</span>] + x[<span class="hljs-number">1</span>]
    <span class="hljs-keyword">elif</span> len(x) == <span class="hljs-number">3</span>:
        <span class="hljs-keyword">return</span> x[<span class="hljs-number">0</span>] + x[<span class="hljs-number">1</span>] + x[<span class="hljs-number">1</span>]
    <span class="hljs-keyword">else</span>:
        <span class="hljs-keyword">return</span> x[<span class="hljs-number">0</span>] + sum_list(x[<span class="hljs-number">1</span>:])
</code></pre></section>
<p>This code is not DRY (that is, it doesn't follow the principle of <a href="https://py.mit.edu/spring25/readings/style#_don_t_repeat_yourself">"don't repeat yourself"</a>).  The more redundant base cases you have, the more places there are for bugs to hide.  (In fact, there <em>is</em> a bug hiding in this example -- can you see it?)</p>
<p>So, let's simplify to the fewest base cases and recursive cases we 
can manage with.  We'll also write the empty-list test slightly more 
pythonically, since empty lists are falsy:</p>
<section aria-label="Code block"><pre><code class="language-python hljs highlighted"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">sum_list</span>(<span class="hljs-params">x</span>):</span>
    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> x:
        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>
    <span class="hljs-keyword">else</span>:
        <span class="hljs-keyword">return</span> x[<span class="hljs-number">0</span>] + sum_list(x[<span class="hljs-number">1</span>:])
</code></pre></section>
<p><a class="anchor" name="catsoop_section_5"></a><a class="anchor" name="_summing_a_nested_list"></a></p><h2 class="cs_section_title">5) Summing a Nested List<a class="cs_permalink" href="#_summing_a_nested_list">§</a></h2><p></p>
<p>Now, let's think about a slightly different problem, summing lists of
 numbers where numbers may be inside sublists, down to an arbitrary 
depth:</p>
<section aria-label="Code block"><pre><code class="language-python hljs highlighted"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">sum_nested</span>(<span class="hljs-params">x</span>):</span>
    <span class="hljs-string">"""
    &gt;&gt;&gt; sum_nested([[1, 2], [3, [4, 5]], [[[[[6]]]]]])
    21
    """</span>
    <span class="hljs-keyword">pass</span>
</code></pre></section>
<p>The fact that the sublists can go down to arbitrary depth makes this problem feel hard.
Fortunately, the empty list is still our base case:</p>
<section aria-label="Code block"><pre><code class="language-python hljs highlighted"><span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> x:
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>
</code></pre></section>
<p>But, what about the recursive case?  Adapting the recursive case from <code>sum_list</code>, which peels off the first element and then adds it to the recursive sum of the remaining elements, doesn't work here:</p>
<section aria-label="Code block"><pre><code class="language-python hljs highlighted"><span class="hljs-keyword">return</span> x[<span class="hljs-number">0</span>] + sum_nested(x[<span class="hljs-number">1</span>:])
</code></pre></section>
<p>The reason it doesn't work is that the first element <code>x[0]</code> is not just a number; it might be a list.  If it's a list, we need to do something different, to turn the sublist <code>x[0]</code> into a number that we can add to the number coming from <code>sum_nested(x[1:])</code>.</p>
<p>So, let's try distinguishing those two cases with another <code>if</code> test:</p>
<section aria-label="Code block"><pre><code class="language-python hljs highlighted"><span class="hljs-keyword">if</span> isinstance(x[<span class="hljs-number">0</span>], list):
    <span class="hljs-keyword">return</span> SOMETHING + sum_nested(x[<span class="hljs-number">1</span>:])
<span class="hljs-keyword">else</span>:
    <span class="hljs-keyword">return</span> x[<span class="hljs-number">0</span>] + sum_nested(x[<span class="hljs-number">1</span>:])
</code></pre></section>
<p>Now, we have two recursive cases: one used when the first element is a list and another when the first element is just a number.
That second case we can handle just as before.  But, what should <code>SOMETHING</code> be, when <code>x[0]</code> is a sublist?  We might try digging out elements of that sublist:</p>
<section aria-label="Code block"><pre><code class="language-python hljs highlighted"><span class="hljs-keyword">if</span> isinstance(x[<span class="hljs-number">0</span>], list):
    <span class="hljs-keyword">return</span> x[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>] + sum_nested(x[<span class="hljs-number">1</span>:])
</code></pre></section>
<p>But this won't be right if the sublist has more than one element (or fewer than 1 element!).
We might fall back to iteration:</p>
<section aria-label="Code block"><pre><code class="language-python hljs highlighted"><span class="hljs-keyword">if</span> isinstance(x[<span class="hljs-number">0</span>], list):
    subtotal = <span class="hljs-number">0</span>
    <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> x[<span class="hljs-number">0</span>]:
        subtotal += x
    <span class="hljs-keyword">return</span> subtotal + sum_nested(x[<span class="hljs-number">1</span>:])
</code></pre></section>
<p>But we're trying to solve this <em>recursively</em>, and worse, this doesn't work either!  Is <code>x</code> guaranteed to be a number here?  No, it could itself be another sublist.  <code>x[0]</code> could have sublists in it down to an arbitrary depth!</p>
<p>Let's take a step back.  We already have a way to sum up <code>x[0]</code> if it's an arbitrarily deep list of lists.  That way is <code>sum_nested</code> itself!  We just have to lean in and trust the recursion:</p>
<section aria-label="Code block"><pre><code class="language-python hljs highlighted"><span class="hljs-keyword">if</span> isinstance(x[<span class="hljs-number">0</span>], list):
    <span class="hljs-keyword">return</span> sum_nested(x[<span class="hljs-number">0</span>]) + sum_nested(x[<span class="hljs-number">1</span>:])
</code></pre></section>
<p>Again, this may seem magical.  We are now using <code>sum_nested</code>
 twice in the same line!  Why doesn't this end up just calling itself 
endlessly and never returning?  The key thing to observe is that every 
recursive call to <code>sum_nested</code> is using a list that is strictly <em>smaller</em> or <em>simpler</em>
 in some respect, heading towards some minimum  represented by the base 
case.  Here, we have peeled apart our original nested list into two 
pieces, <code>x[0]</code> and <code>x[1:]</code>, each of which is smaller.</p>
<p>Here is the full code:</p>
<section aria-label="Code block"><button role="button" aria-pressed="true" class="catsoop-code-showhide">Show/Hide Line Numbers</button><pre style="padding-left: 0px !important;"><code class="language-py hljs python highlighted"><div class="catsoop-code-display hljs-ln"><div class="catsoop-code-line"><span class="hljs-ln-line hljs-ln-numbers" data-line-number="1">1</span><span class="hljs-ln-line hljs-ln-code" data-line-number="1"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">sum_nested</span>(<span class="hljs-params">x</span>):</span></span></div><div class="catsoop-code-line"><span class="hljs-ln-line hljs-ln-numbers" data-line-number="2">2</span><span class="hljs-ln-line hljs-ln-code" data-line-number="2">    <span class="hljs-string"><span class="hljs-string">"""</span></span></span></div><div class="catsoop-code-line"><span class="hljs-ln-line hljs-ln-numbers" data-line-number="3">3</span><span class="hljs-ln-line hljs-ln-code" data-line-number="3"><span class="hljs-string">    &gt;&gt;&gt; sum_nested([[1, 2], [3, [4, 5]], [[[[[6]]]]]])</span></span></div><div class="catsoop-code-line"><span class="hljs-ln-line hljs-ln-numbers" data-line-number="4">4</span><span class="hljs-ln-line hljs-ln-code" data-line-number="4"><span class="hljs-string">    21</span></span></div><div class="catsoop-code-line"><span class="hljs-ln-line hljs-ln-numbers" data-line-number="5">5</span><span class="hljs-ln-line hljs-ln-code" data-line-number="5"><span class="hljs-string">    """</span></span></div><div class="catsoop-code-line"><span class="hljs-ln-line hljs-ln-numbers" data-line-number="6">6</span><span class="hljs-ln-line hljs-ln-code" data-line-number="6">    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> x:</span></div><div class="catsoop-code-line"><span class="hljs-ln-line hljs-ln-numbers" data-line-number="7">7</span><span class="hljs-ln-line hljs-ln-code" data-line-number="7">        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span></span></div><div class="catsoop-code-line"><span class="hljs-ln-line hljs-ln-numbers" data-line-number="8">8</span><span class="hljs-ln-line hljs-ln-code" data-line-number="8">    <span class="hljs-keyword">elif</span> isinstance(x[<span class="hljs-number">0</span>], list):</span></div><div class="catsoop-code-line"><span class="hljs-ln-line hljs-ln-numbers" data-line-number="9">9</span><span class="hljs-ln-line hljs-ln-code" data-line-number="9">        <span class="hljs-keyword">return</span> sum_nested(x[<span class="hljs-number">0</span>]) + sum_nested(x[<span class="hljs-number">1</span>:])</span></div><div class="catsoop-code-line"><span class="hljs-ln-line hljs-ln-numbers" data-line-number="10">10</span><span class="hljs-ln-line hljs-ln-code" data-line-number="10">    <span class="hljs-keyword">else</span>:</span></div><div class="catsoop-code-line"><span class="hljs-ln-line hljs-ln-numbers" data-line-number="11">11</span><span class="hljs-ln-line hljs-ln-code" data-line-number="11">        <span class="hljs-keyword">return</span> x[<span class="hljs-number">0</span>] + sum_nested(x[<span class="hljs-number">1</span>:])</span></div></div></code></pre></section>
<p><a class="anchor" name="catsoop_section_5_1"></a><a class="anchor" name="_sum_nested_recursive_diagram_examples"></a></p><h3 class="cs_section_title">5.1)  <code>sum_nested</code> Recursive Diagram Examples <a class="cs_permalink" href="#_sum_nested_recursive_diagram_examples">§</a></h3><p></p>
<p>As we saw with the factorial environment diagram example, creating
environment diagrams with recursion can take a lot of work. Additionally, because
so many frames are created in the course of executing even a small recursive
program like <code>factorial(3)</code>, it can be difficult to keep track of the course of program
execution and determine which frame we are in, which frame we should return to,
and where in the program to resume execution following the completion of a recursive call.</p>
<p>The diagram we drew on the left-hand side of the environment diagram is called a
recursive-call diagram. Regular environment diagrams are great for keeping track
of the state of the stack, heap, object aliasing, and scoping for small programs.
Recursive diagrams were designed to keep track of the tree of recursive function
calls. In particular, they trace inputs, outputs, and what frame each recursive
call originated from so we know where to return to. Recursive-call diagrams
won't be tested on exams, but they are a helpful tool for visualizing how
small recursive programs work.</p>
<p>Now that we've explained a bit about what recursive-call diagrams are, let's
look at some example diagrams for <code>sum_nested</code> which should help explain how
the function works:</p>
<div class="multistep response converted buttons-enabled" data-side-by-side-code="" markdown="" style="width:55%"><div class="multistep-buttons"><button disabled="disabled">&lt;&lt; First Step</button><button disabled="disabled">&lt; Previous Step</button><button>Next Step &gt;</button><button>Last Step &gt;&gt;</button></div>
<div class="step active" data-in-line="10" data-explanation-for-step="0">
<center><img src="Recursion%20_%20Course%20Readings%20_%206.101%20Spring%202025_files/sumnested_a0.png" width="300"></center>
<div class="step-label">STEP 1</div>
<p>Let's start with thinking about the simplest possible valid input.
What happens when we call <code>sum_nested</code> with an empty list as its argument?</p>
</div>
<div class="step" data-in-line="2-3" data-explanation-for-step="1">
<center><img src="Recursion%20_%20Course%20Readings%20_%206.101%20Spring%202025_files/sumnested_a1.png" width="300"></center>
<div class="step-label">STEP 2</div>
<p><code>sum_nested([])</code><br>
Because x is the empty list, the condition <code>if not x</code> evaluates to <code>True</code> and <code>0</code>
is returned to the global frame and stored in <code>ans</code>. Because this input falls
into the base case, no additional recursive calls are made.</p>
</div>
</div>
<section aria-label="Code block"><button role="button" aria-pressed="true" class="catsoop-code-showhide">Show/Hide Line Numbers</button><pre style="padding-left: 0px !important;"><code class="language-python hljs highlighted"><div class="catsoop-code-display hljs-ln"><div class="catsoop-code-line" style="background-color: inherit; border-top: 3px solid transparent;"><span class="hljs-ln-line hljs-ln-numbers" data-line-number="1">1</span><span class="hljs-ln-line hljs-ln-code" data-line-number="1"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">sum_nested</span>(<span class="hljs-params">x</span>):</span></span></div><div class="catsoop-code-line" style="background-color: inherit; border-top: 3px solid transparent;"><span class="hljs-ln-line hljs-ln-numbers" data-line-number="2">2</span><span class="hljs-ln-line hljs-ln-code" data-line-number="2">  <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> x:</span></div><div class="catsoop-code-line" style="background-color: inherit; border-top: 3px solid transparent;"><span class="hljs-ln-line hljs-ln-numbers" data-line-number="3">3</span><span class="hljs-ln-line hljs-ln-code" data-line-number="3">    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span></span></div><div class="catsoop-code-line" style="background-color: inherit; border-top: 3px solid transparent;"><span class="hljs-ln-line hljs-ln-numbers" data-line-number="4">4</span><span class="hljs-ln-line hljs-ln-code" data-line-number="4">  <span class="hljs-keyword">elif</span> isinstance(x[<span class="hljs-number">0</span>], list):</span></div><div class="catsoop-code-line" style="background-color: inherit; border-top: 3px solid transparent;"><span class="hljs-ln-line hljs-ln-numbers" data-line-number="5">5</span><span class="hljs-ln-line hljs-ln-code" data-line-number="5">    <span class="hljs-keyword">return</span> (sum_nested(x[<span class="hljs-number">0</span>]) +</span></div><div class="catsoop-code-line" style="background-color: inherit; border-top: 3px solid transparent;"><span class="hljs-ln-line hljs-ln-numbers" data-line-number="6">6</span><span class="hljs-ln-line hljs-ln-code" data-line-number="6">            sum_nested(x[<span class="hljs-number">1</span>:]))</span></div><div class="catsoop-code-line" style="background-color: inherit; border-top: 3px solid transparent;"><span class="hljs-ln-line hljs-ln-numbers" data-line-number="7">7</span><span class="hljs-ln-line hljs-ln-code" data-line-number="7">  <span class="hljs-keyword">else</span>:</span></div><div class="catsoop-code-line" style="background-color: inherit; border-top: 3px solid transparent;"><span class="hljs-ln-line hljs-ln-numbers" data-line-number="8">8</span><span class="hljs-ln-line hljs-ln-code" data-line-number="8">    <span class="hljs-keyword">return</span> x[<span class="hljs-number">0</span>] + sum_nested(x[<span class="hljs-number">1</span>:])</span></div><div class="catsoop-code-line" style="background-color: inherit; border-top: 3px solid transparent;"><span class="hljs-ln-line hljs-ln-numbers" data-line-number="9">9</span><span class="hljs-ln-line hljs-ln-code" data-line-number="9"> </span></div><div class="catsoop-code-line" style="background-color: rgb(255, 255, 160); border-top: 3px solid transparent; border-bottom: 3px solid transparent;"><span class="hljs-ln-line hljs-ln-numbers" data-line-number="10">10</span><span class="hljs-ln-line hljs-ln-code" data-line-number="10">ans = sum_nested([])</span></div></div></code></pre></section>
<div style="clear: both"></div>
<div class="multistep response converted buttons-enabled" data-side-by-side-code="" style="width:55%"><div class="multistep-buttons"><button disabled="disabled">&lt;&lt; First Step</button><button disabled="disabled">&lt; Previous Step</button><button>Next Step &gt;</button><button>Last Step &gt;&gt;</button></div>
<div class="step active" data-in-line="10" data-explanation-for-step="0">
<center><img src="Recursion%20_%20Course%20Readings%20_%206.101%20Spring%202025_files/sumnested_b0.png" width="400"></center>
<div class="step-label">STEP 1</div>
<p>OK, now let's think about a slightly more complex example. What happens when
the input to <code>sum_nested</code> is a nonempty flat list of numbers?</p>
</div>
<div class="step" data-in-line="7-8" data-explanation-for-step="1">
<center><img src="Recursion%20_%20Course%20Readings%20_%206.101%20Spring%202025_files/sumnested_b1.png" width="400"></center>
<div class="step-label">STEP 2</div>
<p><code>sum_nested([1,2])</code><br>
Because <code>x[0]</code> is not a list, it falls into the second recursive else case
which adds <code>1</code> to the result of the recursive call to <code>sum_nested([2])</code>.</p>
</div>
<div class="step" data-in-line="7-8" data-explanation-for-step="2">
<center><img src="Recursion%20_%20Course%20Readings%20_%206.101%20Spring%202025_files/sumnested_b2.png" width="400"></center>
<br>
<div class="step-label">STEP 3</div>
<p><code>sum_nested([2])</code><br>
<code>x[0]</code> is an integer, so it also falls into the second recursive case which
adds <code>2</code> to the result of a recursive call on the empty list.</p>
</div>
<div class="step" data-in-line="2-3" data-explanation-for-step="3">
<center><img src="Recursion%20_%20Course%20Readings%20_%206.101%20Spring%202025_files/sumnested_b3.png" width="400"></center>
<br>
<div class="step-label">STEP 4</div>
<p><code>sum_nested([])</code> <br>
Now we have reached a base case! This returns <code>0</code> back to the <code>sum_nested([2])</code>
frame that made the recursive call.</p>
</div>
<div class="step" data-in-line="8" data-explanation-for-step="4">
<center><img src="Recursion%20_%20Course%20Readings%20_%206.101%20Spring%202025_files/sumnested_b4.png" width="400"></center>
<br>
<div class="step-label">STEP 5</div>
<p><code>sum_nested([2])</code> <br>
Now that we have the result of <code>sum_nested([])</code>, the result of <code>2</code> is computed
and returned to the <code>sum_nested([1, 2])</code> frame that made the original recursive call.</p>
</div>
<div class="step" data-in-line="8-10" data-explanation-for-step="5">
<center><img src="Recursion%20_%20Course%20Readings%20_%206.101%20Spring%202025_files/sumnested_b5.png" width="400"></center>
<br>
<div class="step-label">STEP 6</div>
<p><code>sum_nested([1, 2])</code> <br>
Now that we have the result of <code>sum_nested([2])</code>, the final result of <code>3</code> is
computed and returned to back to the global frame where the original call to
<code>sum_nested</code> was made in line 10.</p>
</div>
</div>
<section aria-label="Code block"><button role="button" aria-pressed="true" class="catsoop-code-showhide">Show/Hide Line Numbers</button><pre style="padding-left: 0px !important;"><code class="language-python hljs highlighted"><div class="catsoop-code-display hljs-ln"><div class="catsoop-code-line" style="background-color: inherit; border-top: 3px solid transparent;"><span class="hljs-ln-line hljs-ln-numbers" data-line-number="1">1</span><span class="hljs-ln-line hljs-ln-code" data-line-number="1"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">sum_nested</span>(<span class="hljs-params">x</span>):</span></span></div><div class="catsoop-code-line" style="background-color: inherit; border-top: 3px solid transparent;"><span class="hljs-ln-line hljs-ln-numbers" data-line-number="2">2</span><span class="hljs-ln-line hljs-ln-code" data-line-number="2">  <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> x:</span></div><div class="catsoop-code-line" style="background-color: inherit; border-top: 3px solid transparent;"><span class="hljs-ln-line hljs-ln-numbers" data-line-number="3">3</span><span class="hljs-ln-line hljs-ln-code" data-line-number="3">    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span></span></div><div class="catsoop-code-line" style="background-color: inherit; border-top: 3px solid transparent;"><span class="hljs-ln-line hljs-ln-numbers" data-line-number="4">4</span><span class="hljs-ln-line hljs-ln-code" data-line-number="4">  <span class="hljs-keyword">elif</span> isinstance(x[<span class="hljs-number">0</span>], list):</span></div><div class="catsoop-code-line" style="background-color: inherit; border-top: 3px solid transparent;"><span class="hljs-ln-line hljs-ln-numbers" data-line-number="5">5</span><span class="hljs-ln-line hljs-ln-code" data-line-number="5">    <span class="hljs-keyword">return</span> (sum_nested(x[<span class="hljs-number">0</span>]) +</span></div><div class="catsoop-code-line" style="background-color: inherit; border-top: 3px solid transparent;"><span class="hljs-ln-line hljs-ln-numbers" data-line-number="6">6</span><span class="hljs-ln-line hljs-ln-code" data-line-number="6">            sum_nested(x[<span class="hljs-number">1</span>:]))</span></div><div class="catsoop-code-line" style="background-color: inherit; border-top: 3px solid transparent;"><span class="hljs-ln-line hljs-ln-numbers" data-line-number="7">7</span><span class="hljs-ln-line hljs-ln-code" data-line-number="7">  <span class="hljs-keyword">else</span>:</span></div><div class="catsoop-code-line" style="background-color: inherit; border-top: 3px solid transparent;"><span class="hljs-ln-line hljs-ln-numbers" data-line-number="8">8</span><span class="hljs-ln-line hljs-ln-code" data-line-number="8">    <span class="hljs-keyword">return</span> x[<span class="hljs-number">0</span>] + sum_nested(x[<span class="hljs-number">1</span>:])</span></div><div class="catsoop-code-line" style="background-color: inherit; border-top: 3px solid transparent;"><span class="hljs-ln-line hljs-ln-numbers" data-line-number="9">9</span><span class="hljs-ln-line hljs-ln-code" data-line-number="9"> </span></div><div class="catsoop-code-line" style="background-color: rgb(255, 255, 160); border-top: 3px solid transparent; border-bottom: 3px solid transparent;"><span class="hljs-ln-line hljs-ln-numbers" data-line-number="10">10</span><span class="hljs-ln-line hljs-ln-code" data-line-number="10">ans = sum_nested([<span class="hljs-number">1</span>,<span class="hljs-number">2</span>])</span></div></div></code></pre></section>
<div style="clear: both"></div>
<div class="multistep response converted buttons-enabled" data-side-by-side-code="" style="width:55%"><div class="multistep-buttons"><button disabled="disabled">&lt;&lt; First Step</button><button disabled="disabled">&lt; Previous Step</button><button>Next Step &gt;</button><button>Last Step &gt;&gt;</button></div>
<div class="step active" data-in-line="10" data-explanation-for-step="0">
<center><img src="Recursion%20_%20Course%20Readings%20_%206.101%20Spring%202025_files/sumnested_c_starting.png" width="400"></center>
<div class="step-label">STEP 1</div>
<p>Let's look at one final example. What if the list is nested?</p>
</div>
<div class="step" data-in-line="4-6" data-explanation-for-step="1">
<center><img src="Recursion%20_%20Course%20Readings%20_%206.101%20Spring%202025_files/sumnested_c0.png" width="400"></center>
<div class="step-label">STEP 2</div>
<p><code>sum_nested([[1, 2], 3])</code> <br>
Because <code>x[0]</code> is a list in this example, it falls into the first recursive case
which makes two separate recursive calls. Because Python executes expressions
from left to right, the recursive call to <code>sum_nested(x[0])</code> is executed first.</p>
</div>
<div class="step" data-in-line="8" data-explanation-for-step="2">
<center><img src="Recursion%20_%20Course%20Readings%20_%206.101%20Spring%202025_files/sumnested_c1.png" width="400"></center>
<div class="step-label">STEP 3</div>
<p><code>sum_nested([1, 2])</code> <br>
Because <code>x[0]</code> is an integer this falls into the second recursive case. Notice
how this input is the same as the previous example. It will produce the same
call structure as in the previous example, which computes and returns <code>3</code>
back to the top-level recursive frame.</p>
</div>
<div class="step" data-in-line="6" data-explanation-for-step="3">
<center><img src="Recursion%20_%20Course%20Readings%20_%206.101%20Spring%202025_files/sumnested_c2.png" width="400"></center>
<div class="step-label">STEP 4</div>
<p><code>sum_nested([[1, 2], 3])</code> <br>
After the first recursive call <code>sum_nested([1,2])</code> finished executing and returned
<code>3</code>, we continue with the next recursive call, to <code>sum_nested([3])</code>.</p>
</div>
<div class="step" data-in-line="7-8" data-explanation-for-step="4">
<center><img src="Recursion%20_%20Course%20Readings%20_%206.101%20Spring%202025_files/sumnested_c3.png" width="400"></center>
<div class="step-label">STEP 5</div>
<p><code>sum_nested([3])</code> <br>
<code>x[0]</code> is an integer, so it also falls into the second recursive case which
adds <code>3</code> to the result of a recursive call on the empty list.</p>
</div>
<div class="step" data-in-line="2-3" data-explanation-for-step="5">
<center><img src="Recursion%20_%20Course%20Readings%20_%206.101%20Spring%202025_files/sumnested_c4.png" width="400"></center>
<div class="step-label">STEP 6</div>
<p><code>sum_nested([])</code> <br>
This hits the base case, which returns <code>0</code> to the <code>sum_nested([3])</code> frame that made the recursive call.</p>
</div>
<div class="step" data-in-line="8" data-explanation-for-step="6">
<center><img src="Recursion%20_%20Course%20Readings%20_%206.101%20Spring%202025_files/sumnested_c5.png" width="400"></center>
<div class="step-label">STEP 7</div>
<p><code>sum_nested([3])</code> <br>
Once the recursive call finished returning the result of <code>0</code>, this frame computes
the result <code>3</code> and returns it to the original <code>sum_nested</code> frame.</p>
</div>
<div class="step" data-in-line="5-6" data-explanation-for-step="7">
<center><img src="Recursion%20_%20Course%20Readings%20_%206.101%20Spring%202025_files/sumnested_c6.png" width="400"></center>
<div class="step-label">STEP 8</div>
<p><code>sum_nested([[1, 2], 3])</code> <br>
Now that both recursive calls have finished executing, the final result of <code>6</code>
is computed and returned back to the global frame in line 10.</p>
</div>
</div>
<section aria-label="Code block"><button role="button" aria-pressed="true" class="catsoop-code-showhide">Show/Hide Line Numbers</button><pre style="padding-left: 0px !important;"><code class="language-python hljs highlighted"><div class="catsoop-code-display hljs-ln"><div class="catsoop-code-line" style="background-color: inherit; border-top: 3px solid transparent;"><span class="hljs-ln-line hljs-ln-numbers" data-line-number="1">1</span><span class="hljs-ln-line hljs-ln-code" data-line-number="1"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">sum_nested</span>(<span class="hljs-params">x</span>):</span></span></div><div class="catsoop-code-line" style="background-color: inherit; border-top: 3px solid transparent;"><span class="hljs-ln-line hljs-ln-numbers" data-line-number="2">2</span><span class="hljs-ln-line hljs-ln-code" data-line-number="2">  <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> x:</span></div><div class="catsoop-code-line" style="background-color: inherit; border-top: 3px solid transparent;"><span class="hljs-ln-line hljs-ln-numbers" data-line-number="3">3</span><span class="hljs-ln-line hljs-ln-code" data-line-number="3">    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span></span></div><div class="catsoop-code-line" style="background-color: inherit; border-top: 3px solid transparent;"><span class="hljs-ln-line hljs-ln-numbers" data-line-number="4">4</span><span class="hljs-ln-line hljs-ln-code" data-line-number="4">  <span class="hljs-keyword">elif</span> isinstance(x[<span class="hljs-number">0</span>], list):</span></div><div class="catsoop-code-line" style="background-color: inherit; border-top: 3px solid transparent;"><span class="hljs-ln-line hljs-ln-numbers" data-line-number="5">5</span><span class="hljs-ln-line hljs-ln-code" data-line-number="5">    <span class="hljs-keyword">return</span> (sum_nested(x[<span class="hljs-number">0</span>]) +</span></div><div class="catsoop-code-line" style="background-color: inherit; border-top: 3px solid transparent;"><span class="hljs-ln-line hljs-ln-numbers" data-line-number="6">6</span><span class="hljs-ln-line hljs-ln-code" data-line-number="6">            sum_nested(x[<span class="hljs-number">1</span>:]))</span></div><div class="catsoop-code-line" style="background-color: inherit; border-top: 3px solid transparent;"><span class="hljs-ln-line hljs-ln-numbers" data-line-number="7">7</span><span class="hljs-ln-line hljs-ln-code" data-line-number="7">  <span class="hljs-keyword">else</span>:</span></div><div class="catsoop-code-line" style="background-color: inherit; border-top: 3px solid transparent;"><span class="hljs-ln-line hljs-ln-numbers" data-line-number="8">8</span><span class="hljs-ln-line hljs-ln-code" data-line-number="8">    <span class="hljs-keyword">return</span> x[<span class="hljs-number">0</span>] + sum_nested(x[<span class="hljs-number">1</span>:])</span></div><div class="catsoop-code-line" style="background-color: inherit; border-top: 3px solid transparent;"><span class="hljs-ln-line hljs-ln-numbers" data-line-number="9">9</span><span class="hljs-ln-line hljs-ln-code" data-line-number="9"> </span></div><div class="catsoop-code-line" style="background-color: rgb(255, 255, 160); border-top: 3px solid transparent; border-bottom: 3px solid transparent;"><span class="hljs-ln-line hljs-ln-numbers" data-line-number="10">10</span><span class="hljs-ln-line hljs-ln-code" data-line-number="10">ans = sum_nested([[<span class="hljs-number">1</span>,<span class="hljs-number">2</span>], <span class="hljs-number">3</span>])</span></div></div></code></pre></section>
<div style="clear: both"></div>
<p>
<!--START question q000001 --></p><section aria-label="Question">
<div class="question question-pythonic" id="cs_qdiv_q000001" style="position: static">
<div id="q000001_rendered_question">
<div id="catsoop_preamble_q000001"></div>
<div id="catsoop_prompt_q000001" style="display: inline;">As a follow-on question, how many total calls to <code>sum_nested</code> will be made when we call <br>
<code>sum_nested([[[7, 2]]])</code>?<br></div><input aria-labelledby="catsoop_prompt_q000001" id="q000001" name="q000001" size="50" type="text" value="7">
</div><div>
<span id="q000001_buttons">
<button class="submit btn btn-catsoop" id="q000001_submit" onclick="catsoop.submit('q000001');" style="margin-top: 10px;">Submit</button>
<button class="clearanswer btn btn-catsoop" id="q000001_clearanswer" onclick="catsoop.clearanswer('q000001');" style="margin-top: 10px;">Clear Answer</button></span>
<span id="q000001_loading_wrapper" role="status">
<span id="q000001_loading" style="display:none;"><img class="catsoop-darkmode-invert" src="data:image/gif;base64,R0lGODlhEAAQAPIGAMLCwkJCQgAAAGJiYoKCgpKSkv///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAGACwAAAAAEAAQAAADMmi63P4wyklrAyEAGoQInAdOmGYBw7AxwLoMGcG2rkHEQFHQLTsQOd2mB9ERCpTWzpEAACH5BAkKAAYALAAAAgAKAA4AAAMraAYRoNAEIUJUs97VHgTD4EVDQ2xEM2wgMV5AUbyKLKNEvoxA3P8sYNCQAAAh+QQJCgAGACwAAAAACgAOAAADLWi6EAFrBSGCAmQ0as1wROFABuEM0TUQ5FUU7fK+aRkWNYDFqV4bOl8v+BMuEgAh+QQJCgAGACwAAAAADgAKAAADKmi6QAMrrhECkaaVVl+FRiFuAwEEghAoYxGhqgI0oPxlNSbPOcb3PqAkAQAh+QQJCgAGACwCAAAADgAKAAADKWhqUAUrLuekApA+MiDD4BYExAVGwzgsmNR0lgWMXmwEghDYCq7zDFoCACH5BAkKAAYALAYAAAAKAA4AAAMqaADWros9GEuRUBE7jeUTYGEhMZANEQREN6xDJ54PsKJGIAhBp/OyWyMBACH5BAkKAAYALAYAAgAKAA4AAAMpaKoA+609Fie1C5Tipt7WRhRWw0ED0T1DEAyMq7mEEghCAKTdnZcySwIAIfkEBQoABgAsAgAGAA4ACgAAAytoumwALb4X2YR1URACVkBRYIEgBIw4KuUJDERIzGD3doMhfguBZyAYT5EAADs="><span class="screenreader-only-clip">Loading...</span></span>
</span>
<span id="q000001_score_display" role="status"></span>
<div class="nsubmits_left" id="q000001_nsubmits_left" role="status">You have submitted this assignment 2 times.</div></div>
<div class="solution" id="q000001_solution_container">
<div id="q000001_solution">
<p><b>Solution:</b> <tt>7</tt></p><p>
</p><p></p>
</div>
<div id="q000001_solution_explanation">
</div>
</div>
<div aria-atomic="true" id="q000001_message" role="status"><img alt="Correct" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAMAAADzapwJAAABQVBMVEUAAAAGDQAAAAAAAAAAAAAAAAAAAACGqlBIfBNciiZGeg9Eeg5Feg5Gew9CdgpCdgxDehJvmDN1nj9plTVWhRtOgRlMfxZjkS5Geg9EeA5Geg5HfBBHew5GeQ5Cdg1CeAxDegtHgACVtmV+pURPgBp4oEBEeQx+o0p8oklFeg5YiCJIfRFEdQ5GehBHeg9CdwtEdQxEeg5Fdw5DeQ1Eegs2YQlCdwpCeAxDeQ0PHgBGdA9AdgkAAAAAAAARIgChwGKPs0qjwXKStUyFqD6CqDfJ3p+91Ji00XqlwmypyGihwGiauluWtlicwFKXulGTuEmMr0WOs0OKr0CGrDuEqjrR46zC2Ji+1ZC804640oK1z4CxzHywynqsx3enw3WYuWidvF+fwlqgxFePsFWSs1KIrE2Wu0uOr0qGqkeCpj50nDHRgoCJAAAAP3RSTlMABA0HEgoQ/ff17+jbxi8nDvz39vb29fTy7dPQoJeLVRUJ/f39+vn49/f118jAvrKWcW9jWllJQjkiIRwZFg8RajNxAAAA+klEQVQY06XQ1bLCMBAGYNJCHXfnuLtrFXc5gru+/wMQhhZouWRvMvNt/kx2dbvUC+V/3tY9OhZzX5i0HDqNxn/aRo2aXb/JXtR+p2HjfjUb5xmg1kfyL9v9d76q1UK1kqPaSWAFy1TQVs+zvCci4wd9fA8PE9HM5Rvkg5JlcJ68iuh8OFtkcb/ywrUtlUscUTfniaKQIlaj0AdsoZTuH2aEUsceXM/AuNNcmcsIZW7otWwsIuCacBVJqgycYdWPwx7rWJQKVu0y3n0OUZyemVUIAPp9S8wcIQRBDCgAsqIGBNM/eS/fPr/02KKx5IXDBixsfV2OwCYERebVjyGAvqhE3QAAAABJRU5ErkJggg=="><br></div>
</div>
</section>
<!--END question q000001 -->
<p></p>
<p>
<!--START question q000002 --></p><section aria-label="Question">
<div class="question question-pythonic" id="cs_qdiv_q000002" style="position: static">
<div id="q000002_rendered_question">
<div id="catsoop_preamble_q000002"></div>
<div id="catsoop_prompt_q000002" style="display: inline;">How many calls to <code>sum_nested</code> will be made with the
empty list <code>[]</code> as the argument when we call <code>sum_nested([[1, 2], [3, [4, 5]], [[[[[6]]]]]])</code>?<br></div><input aria-labelledby="catsoop_prompt_q000002" id="q000002" name="q000002" size="50" type="text" value="9">
</div><div>
<span id="q000002_buttons">
<button class="submit btn btn-catsoop" id="q000002_submit" onclick="catsoop.submit('q000002');" style="margin-top: 10px;">Submit</button>
<button class="clearanswer btn btn-catsoop" id="q000002_clearanswer" onclick="catsoop.clearanswer('q000002');" style="margin-top: 10px;">Clear Answer</button></span>
<span id="q000002_loading_wrapper" role="status">
<span id="q000002_loading" style="display:none;"><img class="catsoop-darkmode-invert" src="data:image/gif;base64,R0lGODlhEAAQAPIGAMLCwkJCQgAAAGJiYoKCgpKSkv///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAGACwAAAAAEAAQAAADMmi63P4wyklrAyEAGoQInAdOmGYBw7AxwLoMGcG2rkHEQFHQLTsQOd2mB9ERCpTWzpEAACH5BAkKAAYALAAAAgAKAA4AAAMraAYRoNAEIUJUs97VHgTD4EVDQ2xEM2wgMV5AUbyKLKNEvoxA3P8sYNCQAAAh+QQJCgAGACwAAAAACgAOAAADLWi6EAFrBSGCAmQ0as1wROFABuEM0TUQ5FUU7fK+aRkWNYDFqV4bOl8v+BMuEgAh+QQJCgAGACwAAAAADgAKAAADKmi6QAMrrhECkaaVVl+FRiFuAwEEghAoYxGhqgI0oPxlNSbPOcb3PqAkAQAh+QQJCgAGACwCAAAADgAKAAADKWhqUAUrLuekApA+MiDD4BYExAVGwzgsmNR0lgWMXmwEghDYCq7zDFoCACH5BAkKAAYALAYAAAAKAA4AAAMqaADWros9GEuRUBE7jeUTYGEhMZANEQREN6xDJ54PsKJGIAhBp/OyWyMBACH5BAkKAAYALAYAAgAKAA4AAAMpaKoA+609Fie1C5Tipt7WRhRWw0ED0T1DEAyMq7mEEghCAKTdnZcySwIAIfkEBQoABgAsAgAGAA4ACgAAAytoumwALb4X2YR1URACVkBRYIEgBIw4KuUJDERIzGD3doMhfguBZyAYT5EAADs="><span class="screenreader-only-clip">Loading...</span></span>
</span>
<span id="q000002_score_display" role="status"></span>
<div class="nsubmits_left" id="q000002_nsubmits_left" role="status">You have submitted this assignment 7 times.</div></div>
<div class="solution" id="q000002_solution_container">
<div id="q000002_solution">
<p><b>Solution:</b> <tt>9</tt></p><p>
</p><p></p>
</div>
<div id="q000002_solution_explanation"><hr><p><b>Explanation:</b></p>
<p>Each list in the input will eventually reach the base case.
Counting the number of open square brackets, we find there are 9 total lists in the input,
so <code>sum_nested([])</code> will get called nine times. Overall this example will call
<code>sum_nested</code> 23 times!</p>
</div>
</div>
<div aria-atomic="true" id="q000002_message" role="status"><img alt="Correct" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAMAAADzapwJAAABQVBMVEUAAAAGDQAAAAAAAAAAAAAAAAAAAACGqlBIfBNciiZGeg9Eeg5Feg5Gew9CdgpCdgxDehJvmDN1nj9plTVWhRtOgRlMfxZjkS5Geg9EeA5Geg5HfBBHew5GeQ5Cdg1CeAxDegtHgACVtmV+pURPgBp4oEBEeQx+o0p8oklFeg5YiCJIfRFEdQ5GehBHeg9CdwtEdQxEeg5Fdw5DeQ1Eegs2YQlCdwpCeAxDeQ0PHgBGdA9AdgkAAAAAAAARIgChwGKPs0qjwXKStUyFqD6CqDfJ3p+91Ji00XqlwmypyGihwGiauluWtlicwFKXulGTuEmMr0WOs0OKr0CGrDuEqjrR46zC2Ji+1ZC804640oK1z4CxzHywynqsx3enw3WYuWidvF+fwlqgxFePsFWSs1KIrE2Wu0uOr0qGqkeCpj50nDHRgoCJAAAAP3RSTlMABA0HEgoQ/ff17+jbxi8nDvz39vb29fTy7dPQoJeLVRUJ/f39+vn49/f118jAvrKWcW9jWllJQjkiIRwZFg8RajNxAAAA+klEQVQY06XQ1bLCMBAGYNJCHXfnuLtrFXc5gru+/wMQhhZouWRvMvNt/kx2dbvUC+V/3tY9OhZzX5i0HDqNxn/aRo2aXb/JXtR+p2HjfjUb5xmg1kfyL9v9d76q1UK1kqPaSWAFy1TQVs+zvCci4wd9fA8PE9HM5Rvkg5JlcJ68iuh8OFtkcb/ywrUtlUscUTfniaKQIlaj0AdsoZTuH2aEUsceXM/AuNNcmcsIZW7otWwsIuCacBVJqgycYdWPwx7rWJQKVu0y3n0OUZyemVUIAPp9S8wcIQRBDCgAsqIGBNM/eS/fPr/02KKx5IXDBixsfV2OwCYERebVjyGAvqhE3QAAAABJRU5ErkJggg=="><br></div>
</div>
</section>
<!--END question q000002 -->
<p></p>
<p><a class="anchor" name="catsoop_section_6"></a><a class="anchor" name="_choosing_the_right_decomposition_for_a_problem"></a></p><h2 class="cs_section_title">6) Choosing the Right Decomposition For a Problem<a class="cs_permalink" href="#_choosing_the_right_decomposition_for_a_problem">§</a></h2><p></p>

<p>Finding the right way to decompose a problem into smaller steps is an
 essential part of programming, and recursion is an elegant and simple 
decomposition for some problems.  Suppose we want to implement this 
function:</p>
<section aria-label="Code block"><pre><code class="language-python hljs highlighted"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">subsequences</span>(<span class="hljs-params">seq</span>):</span>
    <span class="hljs-string">"""
    Given a tuple or list or other iterable, returns a set of tuples
    consisting of all its subsequences.
    A subsequence is a sequence of elements from seq that are in the same
    order as in seq but not necessarily adjacent.

    &gt;&gt;&gt; subsequences([4,2,3])
    {(4, 2, 3), (4, 2), (4, 3), (2, 3), (4,), (2,), (3,), ()}
    """</span>
    <span class="hljs-keyword">pass</span>
</code></pre></section>
<p>Note the trailing comma in length-one tuples: Python requires a 
trailing comma to distinguish the tuple from a parenthesized expression.
 In the next few sections, make sure to include needed commas in your 
answers.</p>
<p>
<!--START question subsequences_x --></p><section aria-label="Question">
<div class="question question-pythonic" id="cs_qdiv_subsequences_x" style="position: static">
<div id="subsequences_x_rendered_question">
<div id="catsoop_preamble_subsequences_x"></div>
<div id="catsoop_prompt_subsequences_x" style="display: inline;"><p>Fill in the blank for this additional doctest for <code>subsequences</code> :</p>
<section aria-label="Code block"><pre><code class="nohighlight highlighted">&gt;&gt;&gt; subsequences(["x"])
__________
</code></pre></section>
</div><input aria-labelledby="catsoop_prompt_subsequences_x" id="subsequences_x" name="subsequences_x" size="50" type="text" value="{('x',), ()}">
</div><div>
<span id="subsequences_x_buttons">
<button class="submit btn btn-catsoop" id="subsequences_x_submit" onclick="catsoop.submit('subsequences_x');" style="margin-top: 10px;">Submit</button>
<button class="clearanswer btn btn-catsoop" id="subsequences_x_clearanswer" onclick="catsoop.clearanswer('subsequences_x');" style="margin-top: 10px;">Clear Answer</button></span>
<span id="subsequences_x_loading_wrapper" role="status">
<span id="subsequences_x_loading" style="display:none;"><img class="catsoop-darkmode-invert" src="data:image/gif;base64,R0lGODlhEAAQAPIGAMLCwkJCQgAAAGJiYoKCgpKSkv///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAGACwAAAAAEAAQAAADMmi63P4wyklrAyEAGoQInAdOmGYBw7AxwLoMGcG2rkHEQFHQLTsQOd2mB9ERCpTWzpEAACH5BAkKAAYALAAAAgAKAA4AAAMraAYRoNAEIUJUs97VHgTD4EVDQ2xEM2wgMV5AUbyKLKNEvoxA3P8sYNCQAAAh+QQJCgAGACwAAAAACgAOAAADLWi6EAFrBSGCAmQ0as1wROFABuEM0TUQ5FUU7fK+aRkWNYDFqV4bOl8v+BMuEgAh+QQJCgAGACwAAAAADgAKAAADKmi6QAMrrhECkaaVVl+FRiFuAwEEghAoYxGhqgI0oPxlNSbPOcb3PqAkAQAh+QQJCgAGACwCAAAADgAKAAADKWhqUAUrLuekApA+MiDD4BYExAVGwzgsmNR0lgWMXmwEghDYCq7zDFoCACH5BAkKAAYALAYAAAAKAA4AAAMqaADWros9GEuRUBE7jeUTYGEhMZANEQREN6xDJ54PsKJGIAhBp/OyWyMBACH5BAkKAAYALAYAAgAKAA4AAAMpaKoA+609Fie1C5Tipt7WRhRWw0ED0T1DEAyMq7mEEghCAKTdnZcySwIAIfkEBQoABgAsAgAGAA4ACgAAAytoumwALb4X2YR1URACVkBRYIEgBIw4KuUJDERIzGD3doMhfguBZyAYT5EAADs="><span class="screenreader-only-clip">Loading...</span></span>
</span>
<span id="subsequences_x_score_display" role="status"></span>
<div class="nsubmits_left" id="subsequences_x_nsubmits_left" role="status">You have submitted this assignment 1 time.</div></div>
<div class="solution" id="subsequences_x_solution_container">
<div id="subsequences_x_solution">
<p><b>Solution:</b> <tt>{('x',), ()}</tt></p><p>
</p><p></p>
</div>
<div id="subsequences_x_solution_explanation">
</div>
</div>
<div aria-atomic="true" id="subsequences_x_message" role="status"><img alt="Correct" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAMAAADzapwJAAABQVBMVEUAAAAGDQAAAAAAAAAAAAAAAAAAAACGqlBIfBNciiZGeg9Eeg5Feg5Gew9CdgpCdgxDehJvmDN1nj9plTVWhRtOgRlMfxZjkS5Geg9EeA5Geg5HfBBHew5GeQ5Cdg1CeAxDegtHgACVtmV+pURPgBp4oEBEeQx+o0p8oklFeg5YiCJIfRFEdQ5GehBHeg9CdwtEdQxEeg5Fdw5DeQ1Eegs2YQlCdwpCeAxDeQ0PHgBGdA9AdgkAAAAAAAARIgChwGKPs0qjwXKStUyFqD6CqDfJ3p+91Ji00XqlwmypyGihwGiauluWtlicwFKXulGTuEmMr0WOs0OKr0CGrDuEqjrR46zC2Ji+1ZC804640oK1z4CxzHywynqsx3enw3WYuWidvF+fwlqgxFePsFWSs1KIrE2Wu0uOr0qGqkeCpj50nDHRgoCJAAAAP3RSTlMABA0HEgoQ/ff17+jbxi8nDvz39vb29fTy7dPQoJeLVRUJ/f39+vn49/f118jAvrKWcW9jWllJQjkiIRwZFg8RajNxAAAA+klEQVQY06XQ1bLCMBAGYNJCHXfnuLtrFXc5gru+/wMQhhZouWRvMvNt/kx2dbvUC+V/3tY9OhZzX5i0HDqNxn/aRo2aXb/JXtR+p2HjfjUb5xmg1kfyL9v9d76q1UK1kqPaSWAFy1TQVs+zvCci4wd9fA8PE9HM5Rvkg5JlcJ68iuh8OFtkcb/ywrUtlUscUTfniaKQIlaj0AdsoZTuH2aEUsceXM/AuNNcmcsIZW7otWwsIuCacBVJqgycYdWPwx7rWJQKVu0y3n0OUZyemVUIAPp9S8wcIQRBDCgAsqIGBNM/eS/fPr/02KKx5IXDBixsfV2OwCYERebVjyGAvqhE3QAAAABJRU5ErkJggg=="><br></div>
</div>
</section>
<!--END question subsequences_x -->
<p></p>
<p><a class="anchor" name="catsoop_section_6_1"></a><a class="anchor" name="_aside_canonical_output_for_doctest"></a></p><h3 class="cs_section_title">6.1) Aside: Canonical Output For Doctest<a class="cs_permalink" href="#_aside_canonical_output_for_doctest">§</a></h3><p></p>
<p>Oops, before we work on implementing <code>subsequences</code> 
recursively, let's fix a problem with these doctests.
Doctest works by matching the actual printed output against what we 
wrote in the doctest, but a set can print in any order.  All of the 
following would actually be the same set:</p>
<section aria-label="Code block"><pre><code class="nohighlight highlighted">{(4,2,3), (4,2), (4,3), (2,3), (4,), (2,), (3,), ()}
{(4,), (4,2), (4,3), (4,2,3), (2,), (2,3), (3,), ()}
{(), (2,), (2,3), (3,), (4,), (4,2), (4,2,3), (4,3)}
</code></pre></section>
<p>... but only the first one would pass the doctest as we wrote it.  
So, let's make a small change to improve the test by putting its output 
in a <em>canonical</em> form, in this case putting the tuples in sorted order.  To do that, we'll have to print a list instead of a set:</p>
<section aria-label="Code block"><pre><code class="language-python hljs highlighted"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">subsequences</span>(<span class="hljs-params">seq</span>):</span>
    <span class="hljs-string">"""
    ...
    &gt;&gt;&gt; sorted(subsequences([4,2,3]))
    [(), (2,), (2, 3), (3,), (4,), (4, 2), (4, 2, 3), (4, 3)]
    """</span>
    <span class="hljs-keyword">pass</span>
</code></pre></section>
<p>Note that tuples are sorted lexicographically, i.e., by comparing one
 element at a time and stopping as soon as an element is different or 
one tuple runs out of elements (in which case the shorter tuple wins).</p>
<p>This example shows that a doctest doesn't have to be just a single 
call to the function -- it can do some other work as well, in order to 
make the test more tolerant of harmless variation.</p>
<p>But, keep in mind that, even though our doctest converts the set into a sorted list for the sake of consistent printing, the <code>subsequences</code> function itself is still just working with sets.</p>
<p>
<!--START question subsequences_x_canonicalized --></p><section aria-label="Question">
<div class="question question-pythonic" id="cs_qdiv_subsequences_x_canonicalized" style="position: static">
<div id="subsequences_x_canonicalized_rendered_question">
<div id="catsoop_preamble_subsequences_x_canonicalized"></div>
<div id="catsoop_prompt_subsequences_x_canonicalized" style="display: inline;"><p>Fill in the blank for this improved doctest for <code>subsequences</code>:</p>
<section aria-label="Code block"><pre><code class="nohighlight highlighted">&gt;&gt;&gt; sorted(subsequences(["x"]))
__________
</code></pre></section>
</div><input aria-labelledby="catsoop_prompt_subsequences_x_canonicalized" id="subsequences_x_canonicalized" name="subsequences_x_canonicalized" size="50" type="text" value="[(),('x',)]">
</div><div>
<span id="subsequences_x_canonicalized_buttons">
<button class="submit btn btn-catsoop" id="subsequences_x_canonicalized_submit" onclick="catsoop.submit('subsequences_x_canonicalized');" style="margin-top: 10px;">Submit</button>
<button class="clearanswer btn btn-catsoop" id="subsequences_x_canonicalized_clearanswer" onclick="catsoop.clearanswer('subsequences_x_canonicalized');" style="margin-top: 10px;">Clear Answer</button></span>
<span id="subsequences_x_canonicalized_loading_wrapper" role="status">
<span id="subsequences_x_canonicalized_loading" style="display:none;"><img class="catsoop-darkmode-invert" src="data:image/gif;base64,R0lGODlhEAAQAPIGAMLCwkJCQgAAAGJiYoKCgpKSkv///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAGACwAAAAAEAAQAAADMmi63P4wyklrAyEAGoQInAdOmGYBw7AxwLoMGcG2rkHEQFHQLTsQOd2mB9ERCpTWzpEAACH5BAkKAAYALAAAAgAKAA4AAAMraAYRoNAEIUJUs97VHgTD4EVDQ2xEM2wgMV5AUbyKLKNEvoxA3P8sYNCQAAAh+QQJCgAGACwAAAAACgAOAAADLWi6EAFrBSGCAmQ0as1wROFABuEM0TUQ5FUU7fK+aRkWNYDFqV4bOl8v+BMuEgAh+QQJCgAGACwAAAAADgAKAAADKmi6QAMrrhECkaaVVl+FRiFuAwEEghAoYxGhqgI0oPxlNSbPOcb3PqAkAQAh+QQJCgAGACwCAAAADgAKAAADKWhqUAUrLuekApA+MiDD4BYExAVGwzgsmNR0lgWMXmwEghDYCq7zDFoCACH5BAkKAAYALAYAAAAKAA4AAAMqaADWros9GEuRUBE7jeUTYGEhMZANEQREN6xDJ54PsKJGIAhBp/OyWyMBACH5BAkKAAYALAYAAgAKAA4AAAMpaKoA+609Fie1C5Tipt7WRhRWw0ED0T1DEAyMq7mEEghCAKTdnZcySwIAIfkEBQoABgAsAgAGAA4ACgAAAytoumwALb4X2YR1URACVkBRYIEgBIw4KuUJDERIzGD3doMhfguBZyAYT5EAADs="><span class="screenreader-only-clip">Loading...</span></span>
</span>
<span id="subsequences_x_canonicalized_score_display" role="status"></span>
<div class="nsubmits_left" id="subsequences_x_canonicalized_nsubmits_left" role="status">You have submitted this assignment 8 times.</div></div>
<div class="solution" id="subsequences_x_canonicalized_solution_container">
<div id="subsequences_x_canonicalized_solution">
<p><b>Solution:</b> <tt>[(), ('x',)]</tt></p><p>
</p><p></p>
</div>
<div id="subsequences_x_canonicalized_solution_explanation">
</div>
</div>
<div aria-atomic="true" id="subsequences_x_canonicalized_message" role="status"><img alt="Correct" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAMAAADzapwJAAABQVBMVEUAAAAGDQAAAAAAAAAAAAAAAAAAAACGqlBIfBNciiZGeg9Eeg5Feg5Gew9CdgpCdgxDehJvmDN1nj9plTVWhRtOgRlMfxZjkS5Geg9EeA5Geg5HfBBHew5GeQ5Cdg1CeAxDegtHgACVtmV+pURPgBp4oEBEeQx+o0p8oklFeg5YiCJIfRFEdQ5GehBHeg9CdwtEdQxEeg5Fdw5DeQ1Eegs2YQlCdwpCeAxDeQ0PHgBGdA9AdgkAAAAAAAARIgChwGKPs0qjwXKStUyFqD6CqDfJ3p+91Ji00XqlwmypyGihwGiauluWtlicwFKXulGTuEmMr0WOs0OKr0CGrDuEqjrR46zC2Ji+1ZC804640oK1z4CxzHywynqsx3enw3WYuWidvF+fwlqgxFePsFWSs1KIrE2Wu0uOr0qGqkeCpj50nDHRgoCJAAAAP3RSTlMABA0HEgoQ/ff17+jbxi8nDvz39vb29fTy7dPQoJeLVRUJ/f39+vn49/f118jAvrKWcW9jWllJQjkiIRwZFg8RajNxAAAA+klEQVQY06XQ1bLCMBAGYNJCHXfnuLtrFXc5gru+/wMQhhZouWRvMvNt/kx2dbvUC+V/3tY9OhZzX5i0HDqNxn/aRo2aXb/JXtR+p2HjfjUb5xmg1kfyL9v9d76q1UK1kqPaSWAFy1TQVs+zvCci4wd9fA8PE9HM5Rvkg5JlcJ68iuh8OFtkcb/ywrUtlUscUTfniaKQIlaj0AdsoZTuH2aEUsceXM/AuNNcmcsIZW7otWwsIuCacBVJqgycYdWPwx7rWJQKVu0y3n0OUZyemVUIAPp9S8wcIQRBDCgAsqIGBNM/eS/fPr/02KKx5IXDBixsfV2OwCYERebVjyGAvqhE3QAAAABJRU5ErkJggg=="><br></div>
</div>
</section>
<!--END question subsequences_x_canonicalized -->
<p></p>
<p><a class="anchor" name="catsoop_section_6_2"></a><a class="anchor" name="_one_way_to_do_subsequences"></a></p><h3 class="cs_section_title">6.2) One Way to Do Subsequences<a class="cs_permalink" href="#_one_way_to_do_subsequences">§</a></h3><p></p>
<p>The <code>subsequences</code> problem lends itself to an elegant recursive decomposition.  Consider the first element of <code>seq</code>.  We can form one set of subsequences that <em>skip</em> that element, and we can form another set of subsequences that <em>include</em>
 that element, using the subsequences of the remaining elements.  Those 
two sets generate all possible subsequences for the original input:</p>
<section aria-label="Code block"><pre><code class="language-python hljs highlighted"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">subsequences</span>(<span class="hljs-params">seq</span>):</span>
    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> seq:
        <span class="hljs-comment"># base case:</span>
        <span class="hljs-comment"># subsequences of an empty sequence is the set with just that sequence (tuple)</span>
        <span class="hljs-keyword">return</span> {()}
    <span class="hljs-keyword">else</span>:
        <span class="hljs-comment"># recursive case:</span>
        <span class="hljs-comment"># split seq into two smaller sequences</span>
        first = seq[<span class="hljs-number">0</span>]
        rest = seq[<span class="hljs-number">1</span>:]
        <span class="hljs-comment"># recursively find all possible subsequences in rest</span>
        rest_seq = subsequences(rest)
        <span class="hljs-comment"># iteratively combine first with all subsequences in rest</span>
        first_seq = {(first,) + sub_seq <span class="hljs-keyword">for</span> sub_seq <span class="hljs-keyword">in</span> rest_seq}
        <span class="hljs-comment"># final result is combination of all subsequences with and without first</span>
        <span class="hljs-keyword">return</span> first_seq | rest_seq
</code></pre></section>
<p>
<!--START question subsequences_first_recursive_call --></p><section aria-label="Question">
<div class="question question-pythonic" id="cs_qdiv_subsequences_first_recursive_call" style="position: static">
<div id="subsequences_first_recursive_call_rendered_question">
<div id="catsoop_preamble_subsequences_first_recursive_call"></div>
<div id="catsoop_prompt_subsequences_first_recursive_call" style="display: inline;">What is the first recursive call made by <code>subsequences([4,2,3])</code>?  Write your answer as the Python list that is passed as its argument.<br></div><input aria-labelledby="catsoop_prompt_subsequences_first_recursive_call" id="subsequences_first_recursive_call" name="subsequences_first_recursive_call" size="50" type="text" value="[2,3]">
</div><div>
<span id="subsequences_first_recursive_call_buttons">
<button class="submit btn btn-catsoop" id="subsequences_first_recursive_call_submit" onclick="catsoop.submit('subsequences_first_recursive_call');" style="margin-top: 10px;">Submit</button>
<button class="clearanswer btn btn-catsoop" id="subsequences_first_recursive_call_clearanswer" onclick="catsoop.clearanswer('subsequences_first_recursive_call');" style="margin-top: 10px;">Clear Answer</button></span>
<span id="subsequences_first_recursive_call_loading_wrapper" role="status">
<span id="subsequences_first_recursive_call_loading" style="display:none;"><img class="catsoop-darkmode-invert" src="data:image/gif;base64,R0lGODlhEAAQAPIGAMLCwkJCQgAAAGJiYoKCgpKSkv///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAGACwAAAAAEAAQAAADMmi63P4wyklrAyEAGoQInAdOmGYBw7AxwLoMGcG2rkHEQFHQLTsQOd2mB9ERCpTWzpEAACH5BAkKAAYALAAAAgAKAA4AAAMraAYRoNAEIUJUs97VHgTD4EVDQ2xEM2wgMV5AUbyKLKNEvoxA3P8sYNCQAAAh+QQJCgAGACwAAAAACgAOAAADLWi6EAFrBSGCAmQ0as1wROFABuEM0TUQ5FUU7fK+aRkWNYDFqV4bOl8v+BMuEgAh+QQJCgAGACwAAAAADgAKAAADKmi6QAMrrhECkaaVVl+FRiFuAwEEghAoYxGhqgI0oPxlNSbPOcb3PqAkAQAh+QQJCgAGACwCAAAADgAKAAADKWhqUAUrLuekApA+MiDD4BYExAVGwzgsmNR0lgWMXmwEghDYCq7zDFoCACH5BAkKAAYALAYAAAAKAA4AAAMqaADWros9GEuRUBE7jeUTYGEhMZANEQREN6xDJ54PsKJGIAhBp/OyWyMBACH5BAkKAAYALAYAAgAKAA4AAAMpaKoA+609Fie1C5Tipt7WRhRWw0ED0T1DEAyMq7mEEghCAKTdnZcySwIAIfkEBQoABgAsAgAGAA4ACgAAAytoumwALb4X2YR1URACVkBRYIEgBIw4KuUJDERIzGD3doMhfguBZyAYT5EAADs="><span class="screenreader-only-clip">Loading...</span></span>
</span>
<span id="subsequences_first_recursive_call_score_display" role="status"></span>
<div class="nsubmits_left" id="subsequences_first_recursive_call_nsubmits_left" role="status">You have submitted this assignment 1 time.</div></div>
<div class="solution" id="subsequences_first_recursive_call_solution_container">
<div id="subsequences_first_recursive_call_solution">
<p><b>Solution:</b> <tt>[2, 3]</tt></p><p>
</p><p></p>
</div>
<div id="subsequences_first_recursive_call_solution_explanation">
</div>
</div>
<div aria-atomic="true" id="subsequences_first_recursive_call_message" role="status"><img alt="Correct" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAMAAADzapwJAAABQVBMVEUAAAAGDQAAAAAAAAAAAAAAAAAAAACGqlBIfBNciiZGeg9Eeg5Feg5Gew9CdgpCdgxDehJvmDN1nj9plTVWhRtOgRlMfxZjkS5Geg9EeA5Geg5HfBBHew5GeQ5Cdg1CeAxDegtHgACVtmV+pURPgBp4oEBEeQx+o0p8oklFeg5YiCJIfRFEdQ5GehBHeg9CdwtEdQxEeg5Fdw5DeQ1Eegs2YQlCdwpCeAxDeQ0PHgBGdA9AdgkAAAAAAAARIgChwGKPs0qjwXKStUyFqD6CqDfJ3p+91Ji00XqlwmypyGihwGiauluWtlicwFKXulGTuEmMr0WOs0OKr0CGrDuEqjrR46zC2Ji+1ZC804640oK1z4CxzHywynqsx3enw3WYuWidvF+fwlqgxFePsFWSs1KIrE2Wu0uOr0qGqkeCpj50nDHRgoCJAAAAP3RSTlMABA0HEgoQ/ff17+jbxi8nDvz39vb29fTy7dPQoJeLVRUJ/f39+vn49/f118jAvrKWcW9jWllJQjkiIRwZFg8RajNxAAAA+klEQVQY06XQ1bLCMBAGYNJCHXfnuLtrFXc5gru+/wMQhhZouWRvMvNt/kx2dbvUC+V/3tY9OhZzX5i0HDqNxn/aRo2aXb/JXtR+p2HjfjUb5xmg1kfyL9v9d76q1UK1kqPaSWAFy1TQVs+zvCci4wd9fA8PE9HM5Rvkg5JlcJ68iuh8OFtkcb/ywrUtlUscUTfniaKQIlaj0AdsoZTuH2aEUsceXM/AuNNcmcsIZW7otWwsIuCacBVJqgycYdWPwx7rWJQKVu0y3n0OUZyemVUIAPp9S8wcIQRBDCgAsqIGBNM/eS/fPr/02KKx5IXDBixsfV2OwCYERebVjyGAvqhE3QAAAABJRU5ErkJggg=="><br></div>
</div>
</section>
<!--END question subsequences_first_recursive_call -->
<p></p>
<p>
<!--START question subsequences_returned_by_first_recursive_call --></p><section aria-label="Question">
<div class="question question-pythonic" id="cs_qdiv_subsequences_returned_by_first_recursive_call" style="position: static">
<div id="subsequences_returned_by_first_recursive_call_rendered_question">
<div id="catsoop_preamble_subsequences_returned_by_first_recursive_call"></div>
<div id="catsoop_prompt_subsequences_returned_by_first_recursive_call" style="display: inline;">What is the return value of that first recursive call?  Write your answer as a Python expression.<br></div><input aria-labelledby="catsoop_prompt_subsequences_returned_by_first_recursive_call" id="subsequences_returned_by_first_recursive_call" name="subsequences_returned_by_first_recursive_call" size="50" type="text" value="{(2,),(3,),(2,3),()}">
</div><div>
<span id="subsequences_returned_by_first_recursive_call_buttons">
<button class="submit btn btn-catsoop" id="subsequences_returned_by_first_recursive_call_submit" onclick="catsoop.submit('subsequences_returned_by_first_recursive_call');" style="margin-top: 10px;">Submit</button>
<button class="clearanswer btn btn-catsoop" id="subsequences_returned_by_first_recursive_call_clearanswer" onclick="catsoop.clearanswer('subsequences_returned_by_first_recursive_call');" style="margin-top: 10px;">Clear Answer</button></span>
<span id="subsequences_returned_by_first_recursive_call_loading_wrapper" role="status">
<span id="subsequences_returned_by_first_recursive_call_loading" style="display:none;"><img class="catsoop-darkmode-invert" src="data:image/gif;base64,R0lGODlhEAAQAPIGAMLCwkJCQgAAAGJiYoKCgpKSkv///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAGACwAAAAAEAAQAAADMmi63P4wyklrAyEAGoQInAdOmGYBw7AxwLoMGcG2rkHEQFHQLTsQOd2mB9ERCpTWzpEAACH5BAkKAAYALAAAAgAKAA4AAAMraAYRoNAEIUJUs97VHgTD4EVDQ2xEM2wgMV5AUbyKLKNEvoxA3P8sYNCQAAAh+QQJCgAGACwAAAAACgAOAAADLWi6EAFrBSGCAmQ0as1wROFABuEM0TUQ5FUU7fK+aRkWNYDFqV4bOl8v+BMuEgAh+QQJCgAGACwAAAAADgAKAAADKmi6QAMrrhECkaaVVl+FRiFuAwEEghAoYxGhqgI0oPxlNSbPOcb3PqAkAQAh+QQJCgAGACwCAAAADgAKAAADKWhqUAUrLuekApA+MiDD4BYExAVGwzgsmNR0lgWMXmwEghDYCq7zDFoCACH5BAkKAAYALAYAAAAKAA4AAAMqaADWros9GEuRUBE7jeUTYGEhMZANEQREN6xDJ54PsKJGIAhBp/OyWyMBACH5BAkKAAYALAYAAgAKAA4AAAMpaKoA+609Fie1C5Tipt7WRhRWw0ED0T1DEAyMq7mEEghCAKTdnZcySwIAIfkEBQoABgAsAgAGAA4ACgAAAytoumwALb4X2YR1URACVkBRYIEgBIw4KuUJDERIzGD3doMhfguBZyAYT5EAADs="><span class="screenreader-only-clip">Loading...</span></span>
</span>
<span id="subsequences_returned_by_first_recursive_call_score_display" role="status"></span>
<div class="nsubmits_left" id="subsequences_returned_by_first_recursive_call_nsubmits_left" role="status">You have submitted this assignment 1 time.</div></div>
<div class="solution" id="subsequences_returned_by_first_recursive_call_solution_container">
<div id="subsequences_returned_by_first_recursive_call_solution">
<p><b>Solution:</b> <tt>{(2, 3), (2,), (3,), ()}</tt></p><p>
</p><p></p>
</div>
<div id="subsequences_returned_by_first_recursive_call_solution_explanation">
</div>
</div>
<div aria-atomic="true" id="subsequences_returned_by_first_recursive_call_message" role="status"><img alt="Correct" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAMAAADzapwJAAABQVBMVEUAAAAGDQAAAAAAAAAAAAAAAAAAAACGqlBIfBNciiZGeg9Eeg5Feg5Gew9CdgpCdgxDehJvmDN1nj9plTVWhRtOgRlMfxZjkS5Geg9EeA5Geg5HfBBHew5GeQ5Cdg1CeAxDegtHgACVtmV+pURPgBp4oEBEeQx+o0p8oklFeg5YiCJIfRFEdQ5GehBHeg9CdwtEdQxEeg5Fdw5DeQ1Eegs2YQlCdwpCeAxDeQ0PHgBGdA9AdgkAAAAAAAARIgChwGKPs0qjwXKStUyFqD6CqDfJ3p+91Ji00XqlwmypyGihwGiauluWtlicwFKXulGTuEmMr0WOs0OKr0CGrDuEqjrR46zC2Ji+1ZC804640oK1z4CxzHywynqsx3enw3WYuWidvF+fwlqgxFePsFWSs1KIrE2Wu0uOr0qGqkeCpj50nDHRgoCJAAAAP3RSTlMABA0HEgoQ/ff17+jbxi8nDvz39vb29fTy7dPQoJeLVRUJ/f39+vn49/f118jAvrKWcW9jWllJQjkiIRwZFg8RajNxAAAA+klEQVQY06XQ1bLCMBAGYNJCHXfnuLtrFXc5gru+/wMQhhZouWRvMvNt/kx2dbvUC+V/3tY9OhZzX5i0HDqNxn/aRo2aXb/JXtR+p2HjfjUb5xmg1kfyL9v9d76q1UK1kqPaSWAFy1TQVs+zvCci4wd9fA8PE9HM5Rvkg5JlcJ68iuh8OFtkcb/ywrUtlUscUTfniaKQIlaj0AdsoZTuH2aEUsceXM/AuNNcmcsIZW7otWwsIuCacBVJqgycYdWPwx7rWJQKVu0y3n0OUZyemVUIAPp9S8wcIQRBDCgAsqIGBNM/eS/fPr/02KKx5IXDBixsfV2OwCYERebVjyGAvqhE3QAAAABJRU5ErkJggg=="><br></div>
</div>
</section>
<!--END question subsequences_returned_by_first_recursive_call -->
<p></p>
<p>We might try to write the computation of the <code>result</code> set in one line, like this:</p>
<section aria-label="Code block"><pre><code class="language-python hljs highlighted">result = ({(first,) + subseq <span class="hljs-keyword">for</span> subseq <span class="hljs-keyword">in</span> subsequences(rest)} |
            {subseq <span class="hljs-keyword">for</span> subseq <span class="hljs-keyword">in</span> subsequences(rest)})
<span class="hljs-keyword">return</span> result
</code></pre></section>
<p>
<!--START question subsequences_redundant_recursion --></p><section aria-label="Question">
<div class="question question-multiplechoice" id="cs_qdiv_subsequences_redundant_recursion" style="position: static">
<div id="subsequences_redundant_recursion_rendered_question">
<div id="catsoop_preamble_subsequences_redundant_recursion"></div>
<div id="catsoop_prompt_subsequences_redundant_recursion" style="display: inline;">Which of the following describes the effect of this code change?<br></div><fieldset aria-labelledby="catsoop_prompt_subsequences_redundant_recursion">
<div style="margin-bottom: 10px;"><input id="subsequences_redundant_recursion_opt0" name="subsequences_redundant_recursion_opt0" type="checkbox" value="0"><label for="subsequences_redundant_recursion_opt0">It contains a Python syntax error.</label></div>
<div style="margin-bottom: 10px;"><input id="subsequences_redundant_recursion_opt1" name="subsequences_redundant_recursion_opt1" type="checkbox" value="1"><label for="subsequences_redundant_recursion_opt1">It will raise an exception when it runs.</label></div>
<div style="margin-bottom: 10px;"><input checked="checked" id="subsequences_redundant_recursion_opt2" name="subsequences_redundant_recursion_opt2" type="checkbox" value="2"><label for="subsequences_redundant_recursion_opt2">It will make far more recursive calls than before.</label></div>
<div style="margin-bottom: 10px;"><input id="subsequences_redundant_recursion_opt3" name="subsequences_redundant_recursion_opt3" type="checkbox" value="3"><label for="subsequences_redundant_recursion_opt3">It will return the wrong answer because the result is being created in a different order.</label></div>
<div style="margin-bottom: 10px;"><input id="subsequences_redundant_recursion_opt4" name="subsequences_redundant_recursion_opt4" type="checkbox" value="4"><label for="subsequences_redundant_recursion_opt4">It will work as expected in about the same time.</label></div>
</fieldset><input id="subsequences_redundant_recursion" name="subsequences_redundant_recursion" type="hidden" value="{&quot;subsequences_redundant_recursion_opt2&quot;:true}">
<script type="text/javascript">
// @license magnet:?xt=urn:btih:0b31508aeb0634b347b8270c7bee4d411b5d4109&dn=agpl-3.0.txt AGPL-v3
var subsequences_redundant_recursion_selected = {'subsequences_redundant_recursion_opt2': true};
document.getElementById("subsequences_redundant_recursion").value = JSON.stringify(subsequences_redundant_recursion_selected);
document.querySelectorAll("input[type=checkbox][name^=subsequences_redundant_recursion_opt]").forEach(function(r){
    r.addEventListener("click", function(){
        subsequences_redundant_recursion_selected[this.getAttribute("name")] = this.checked;
    document.getElementById("subsequences_redundant_recursion").value = JSON.stringify(subsequences_redundant_recursion_selected);
    });
});
// @license-end
</script>
</div><div>
<span id="subsequences_redundant_recursion_buttons">
<button class="submit btn btn-catsoop" id="subsequences_redundant_recursion_submit" onclick="catsoop.submit('subsequences_redundant_recursion');" style="margin-top: 10px;">Submit</button>
<button class="clearanswer btn btn-catsoop" id="subsequences_redundant_recursion_clearanswer" onclick="catsoop.clearanswer('subsequences_redundant_recursion');" style="margin-top: 10px;">Clear Answer</button></span>
<span id="subsequences_redundant_recursion_loading_wrapper" role="status">
<span id="subsequences_redundant_recursion_loading" style="display:none;"><img class="catsoop-darkmode-invert" src="data:image/gif;base64,R0lGODlhEAAQAPIGAMLCwkJCQgAAAGJiYoKCgpKSkv///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAGACwAAAAAEAAQAAADMmi63P4wyklrAyEAGoQInAdOmGYBw7AxwLoMGcG2rkHEQFHQLTsQOd2mB9ERCpTWzpEAACH5BAkKAAYALAAAAgAKAA4AAAMraAYRoNAEIUJUs97VHgTD4EVDQ2xEM2wgMV5AUbyKLKNEvoxA3P8sYNCQAAAh+QQJCgAGACwAAAAACgAOAAADLWi6EAFrBSGCAmQ0as1wROFABuEM0TUQ5FUU7fK+aRkWNYDFqV4bOl8v+BMuEgAh+QQJCgAGACwAAAAADgAKAAADKmi6QAMrrhECkaaVVl+FRiFuAwEEghAoYxGhqgI0oPxlNSbPOcb3PqAkAQAh+QQJCgAGACwCAAAADgAKAAADKWhqUAUrLuekApA+MiDD4BYExAVGwzgsmNR0lgWMXmwEghDYCq7zDFoCACH5BAkKAAYALAYAAAAKAA4AAAMqaADWros9GEuRUBE7jeUTYGEhMZANEQREN6xDJ54PsKJGIAhBp/OyWyMBACH5BAkKAAYALAYAAgAKAA4AAAMpaKoA+609Fie1C5Tipt7WRhRWw0ED0T1DEAyMq7mEEghCAKTdnZcySwIAIfkEBQoABgAsAgAGAA4ACgAAAytoumwALb4X2YR1URACVkBRYIEgBIw4KuUJDERIzGD3doMhfguBZyAYT5EAADs="><span class="screenreader-only-clip">Loading...</span></span>
</span>
<span id="subsequences_redundant_recursion_score_display" role="status"></span>
<div class="nsubmits_left" id="subsequences_redundant_recursion_nsubmits_left" role="status">You have submitted this assignment 1 time.</div></div>
<div class="solution" id="subsequences_redundant_recursion_solution_container">
<div id="subsequences_redundant_recursion_solution">
<p><b>Solution:</b></p>
<ul style="display:table; list-style: none; padding-left: 10px;"><li style="display: table-row;"><span style="display:table-cell; padding-bottom:20px;"><input disabled="disabled" type="checkbox"> It contains a Python syntax error.</span></li><li style="display: table-row;"><span style="display:table-cell; padding-bottom:20px;"><input disabled="disabled" type="checkbox"> It will raise an exception when it runs.</span></li><li style="display: table-row;"><span style="display:table-cell; padding-bottom:20px;"><input checked="checked" disabled="disabled" type="checkbox"> It will make far more recursive calls than before.</span></li><li style="display: table-row;"><span style="display:table-cell; padding-bottom:20px;"><input disabled="disabled" type="checkbox"> It will return the wrong answer because the result is being created in a different order.</span></li><li style="display: table-row;"><span style="display:table-cell; padding-bottom:20px;"><input disabled="disabled" type="checkbox"> It will work as expected in about the same time.</span></li></ul>
</div>
<div id="subsequences_redundant_recursion_solution_explanation"><hr><p><b>Explanation:</b></p>
<p>The code still works, but, instead of just making one recursive call in each recursive case, it calls <code>subsequences(rest)</code>
 twice.
Each of those calls then makes 2 more calls, for a total of 4 at the 
next level; then 8 at the next level; then 16 at the next level.
By the time we reach the base case, after peeling off all <span class=""><mjx-container class="MathJax" jax="CHTML" style="font-size: 119.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D45B TEX-I"></mjx-c></mjx-mi></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>n</mi></math></mjx-assistive-mml></mjx-container></span> elements from the original length-<span class=""><mjx-container class="MathJax" jax="CHTML" style="font-size: 119.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D45B TEX-I"></mjx-c></mjx-mi></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>n</mi></math></mjx-assistive-mml></mjx-container></span> sequence, we will have needed roughly <span class=""><mjx-container class="MathJax" jax="CHTML" style="font-size: 119.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-msup><mjx-mn class="mjx-n"><mjx-c class="mjx-c32"></mjx-c></mjx-mn><mjx-script style="vertical-align: 0.363em;"><mjx-mi class="mjx-i" size="s"><mjx-c class="mjx-c1D45B TEX-I"></mjx-c></mjx-mi></mjx-script></mjx-msup></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><msup><mn>2</mn><mi>n</mi></msup></math></mjx-assistive-mml></mjx-container></span> calls to <code>subsequences</code>, compared to the <span class=""><mjx-container class="MathJax" jax="CHTML" style="font-size: 119.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D45B TEX-I"></mjx-c></mjx-mi></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>n</mi></math></mjx-assistive-mml></mjx-container></span>
 calls that the original recursive soluton used.  It's very easy to 
inadvertently turn a linear recursive algorithm into an exponential one!</p>
<p>And, even though the <code>result</code> set is being put together in
 a different order than before, the order for a set doesn't matter, so 
the answer will still be the same.</p>
</div>
</div>
<div aria-atomic="true" id="subsequences_redundant_recursion_message" role="status"><img alt="Correct" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAMAAADzapwJAAABQVBMVEUAAAAGDQAAAAAAAAAAAAAAAAAAAACGqlBIfBNciiZGeg9Eeg5Feg5Gew9CdgpCdgxDehJvmDN1nj9plTVWhRtOgRlMfxZjkS5Geg9EeA5Geg5HfBBHew5GeQ5Cdg1CeAxDegtHgACVtmV+pURPgBp4oEBEeQx+o0p8oklFeg5YiCJIfRFEdQ5GehBHeg9CdwtEdQxEeg5Fdw5DeQ1Eegs2YQlCdwpCeAxDeQ0PHgBGdA9AdgkAAAAAAAARIgChwGKPs0qjwXKStUyFqD6CqDfJ3p+91Ji00XqlwmypyGihwGiauluWtlicwFKXulGTuEmMr0WOs0OKr0CGrDuEqjrR46zC2Ji+1ZC804640oK1z4CxzHywynqsx3enw3WYuWidvF+fwlqgxFePsFWSs1KIrE2Wu0uOr0qGqkeCpj50nDHRgoCJAAAAP3RSTlMABA0HEgoQ/ff17+jbxi8nDvz39vb29fTy7dPQoJeLVRUJ/f39+vn49/f118jAvrKWcW9jWllJQjkiIRwZFg8RajNxAAAA+klEQVQY06XQ1bLCMBAGYNJCHXfnuLtrFXc5gru+/wMQhhZouWRvMvNt/kx2dbvUC+V/3tY9OhZzX5i0HDqNxn/aRo2aXb/JXtR+p2HjfjUb5xmg1kfyL9v9d76q1UK1kqPaSWAFy1TQVs+zvCci4wd9fA8PE9HM5Rvkg5JlcJ68iuh8OFtkcb/ywrUtlUscUTfniaKQIlaj0AdsoZTuH2aEUsceXM/AuNNcmcsIZW7otWwsIuCacBVJqgycYdWPwx7rWJQKVu0y3n0OUZyemVUIAPp9S8wcIQRBDCgAsqIGBNM/eS/fPr/02KKx5IXDBixsfV2OwCYERebVjyGAvqhE3QAAAABJRU5ErkJggg=="></div>
</div>
</section>
<!--END question subsequences_redundant_recursion -->
<p></p>
<p><a class="anchor" name="catsoop_section_6_3"></a><a class="anchor" name="_subsequences_recursive_call_diagram"></a></p><h3 class="cs_section_title">6.3)  <code>subsequences</code> Recursive Call Diagram <a class="cs_permalink" href="#_subsequences_recursive_call_diagram">§</a></h3><p></p>
<p>Let's consider how this function computes the result for <code>subsequences([1, 2]).</code></p>
<div class="multistep response converted buttons-enabled" data-side-by-side-code="" markdown="" style="width:55%"><div class="multistep-buttons"><button disabled="disabled">&lt;&lt; First Step</button><button disabled="disabled">&lt; Previous Step</button><button>Next Step &gt;</button><button>Last Step &gt;&gt;</button></div>
<div class="step active" data-in-line="5-9" data-explanation-for-step="0">
<img src="Recursion%20_%20Course%20Readings%20_%206.101%20Spring%202025_files/subseq_a1.png" width="500">
<div class="step-label">STEP 1</div>
<p><code>subsequences([1, 2])</code> <br>
Because seq is nonempty, it falls into the recursive <code>else</code> case. In lines
7 and 8, the sequence is split into:</p>
<p><code>first = 1</code><br>
<code>rest = [2]</code><br></p>
<p>Then in line 9, the recursive call on <code>subsequences(rest)</code> starts executing.</p>
</div>
<div class="step" data-in-line="5-9" data-explanation-for-step="1">
<img src="Recursion%20_%20Course%20Readings%20_%206.101%20Spring%202025_files/subseq_a2.png" width="500">
<div class="step-label">STEP 2</div>
<p><code>subsequences([2])</code> <br>
Because seq is nonempty, it falls into the recursive <code>else</code> case. In lines
7 and 8, the sequence is split into:</p>
<p><code>first = 2</code><br>
<code>rest = []</code><br></p>
<p>Then in line 9, the recursive call on <code>subsequences(rest)</code> starts executing.</p>
</div>
<div class="step" data-in-line="2-4" data-explanation-for-step="2">
<img src="Recursion%20_%20Course%20Readings%20_%206.101%20Spring%202025_files/subseq_a3.png" width="500">
<div class="step-label">STEP 3</div>
<p><code>subsequences([])</code> <br>
Because seq is empty, it falls into the base case and returns the set
containing an empty tuple to the <code>subsequences([2])</code> frame that made the
recursive call.</p>
</div>
<div class="step" data-in-line="10-14" data-explanation-for-step="3">
<img src="Recursion%20_%20Course%20Readings%20_%206.101%20Spring%202025_files/subseq_a4.png" width="500">
<div class="step-label">STEP 4</div>
<p><code>subsequences([2])</code> <br>
Now that we know what <code>rest_seq</code> is, <code>first_seq</code> can be computed iteratively.
Then in line 14, <code>first_seq</code> and <code>rest_seq</code> are combined into a new set
<code>{(2,), ()}</code> which is returned to the original<br>
<code>subsequences([1, 2])</code> call.</p>
</div>
<div class="step" data-in-line="10-16" data-explanation-for-step="4">
<img src="Recursion%20_%20Course%20Readings%20_%206.101%20Spring%202025_files/subseq_a5.png" width="500">
<div class="step-label">STEP 5</div>
<p><code>subsequences([1, 2])</code> <br>
Now that we know what <code>rest_seq</code> is, <code>first_seq</code> can be computed iteratively by
concatenating <code>(1,)</code> with the tuples from <code>rest_seq</code>. Then in line 14,
<code>first_seq</code> and  <code>rest_seq</code> are combined into a new set which is returned as
the final result <code>{(1, 2), (1,), (2,), ()}</code> and stored in <code>ans</code> in the global
frame in line 16.</p>
</div>
</div>
<section aria-label="Code block"><button role="button" aria-pressed="true" class="catsoop-code-showhide">Show/Hide Line Numbers</button><pre style="padding-left: 0px !important;"><code class="language-python hljs highlighted"><div class="catsoop-code-display hljs-ln"><div class="catsoop-code-line" style="background-color: inherit; border-top: 3px solid transparent;"><span class="hljs-ln-line hljs-ln-numbers" data-line-number="1">1</span><span class="hljs-ln-line hljs-ln-code" data-line-number="1"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">subsequences</span>(<span class="hljs-params">seq</span>):</span></span></div><div class="catsoop-code-line" style="background-color: inherit; border-top: 3px solid transparent;"><span class="hljs-ln-line hljs-ln-numbers" data-line-number="2">2</span><span class="hljs-ln-line hljs-ln-code" data-line-number="2">  <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> seq:</span></div><div class="catsoop-code-line" style="background-color: inherit; border-top: 3px solid transparent;"><span class="hljs-ln-line hljs-ln-numbers" data-line-number="3">3</span><span class="hljs-ln-line hljs-ln-code" data-line-number="3">    <span class="hljs-comment"># base case:</span></span></div><div class="catsoop-code-line" style="background-color: inherit; border-top: 3px solid transparent;"><span class="hljs-ln-line hljs-ln-numbers" data-line-number="4">4</span><span class="hljs-ln-line hljs-ln-code" data-line-number="4">    <span class="hljs-keyword">return</span> {()}</span></div><div class="catsoop-code-line" style="background-color: rgb(255, 255, 160); border-top: 3px solid transparent;"><span class="hljs-ln-line hljs-ln-numbers" data-line-number="5">5</span><span class="hljs-ln-line hljs-ln-code" data-line-number="5">  <span class="hljs-keyword">else</span>:</span></div><div class="catsoop-code-line" style="background-color: rgb(255, 255, 160); border-top: 3px solid transparent;"><span class="hljs-ln-line hljs-ln-numbers" data-line-number="6">6</span><span class="hljs-ln-line hljs-ln-code" data-line-number="6">    <span class="hljs-comment"># recursive case:</span></span></div><div class="catsoop-code-line" style="background-color: rgb(255, 255, 160); border-top: 3px solid transparent;"><span class="hljs-ln-line hljs-ln-numbers" data-line-number="7">7</span><span class="hljs-ln-line hljs-ln-code" data-line-number="7">    first = seq[<span class="hljs-number">0</span>]</span></div><div class="catsoop-code-line" style="background-color: rgb(255, 255, 160); border-top: 3px solid transparent;"><span class="hljs-ln-line hljs-ln-numbers" data-line-number="8">8</span><span class="hljs-ln-line hljs-ln-code" data-line-number="8">    rest = seq[<span class="hljs-number">1</span>:]</span></div><div class="catsoop-code-line" style="background-color: rgb(255, 255, 160); border-top: 3px solid transparent;"><span class="hljs-ln-line hljs-ln-numbers" data-line-number="9">9</span><span class="hljs-ln-line hljs-ln-code" data-line-number="9">    rest_seq = subsequences(rest)</span></div><div class="catsoop-code-line" style="background-color: inherit; border-top: 3px solid transparent;"><span class="hljs-ln-line hljs-ln-numbers" data-line-number="10">10</span><span class="hljs-ln-line hljs-ln-code" data-line-number="10">    first_seq = {</span></div><div class="catsoop-code-line" style="background-color: inherit; border-top: 3px solid transparent;"><span class="hljs-ln-line hljs-ln-numbers" data-line-number="11">11</span><span class="hljs-ln-line hljs-ln-code" data-line-number="11">      (first,) + sub_seq</span></div><div class="catsoop-code-line" style="background-color: inherit; border-top: 3px solid transparent;"><span class="hljs-ln-line hljs-ln-numbers" data-line-number="12">12</span><span class="hljs-ln-line hljs-ln-code" data-line-number="12">        <span class="hljs-keyword">for</span> sub_seq <span class="hljs-keyword">in</span> rest_seq</span></div><div class="catsoop-code-line" style="background-color: inherit; border-top: 3px solid transparent;"><span class="hljs-ln-line hljs-ln-numbers" data-line-number="13">13</span><span class="hljs-ln-line hljs-ln-code" data-line-number="13">    }</span></div><div class="catsoop-code-line" style="background-color: inherit; border-top: 3px solid transparent;"><span class="hljs-ln-line hljs-ln-numbers" data-line-number="14">14</span><span class="hljs-ln-line hljs-ln-code" data-line-number="14">    <span class="hljs-keyword">return</span> first_seq | rest_seq</span></div><div class="catsoop-code-line" style="background-color: inherit; border-top: 3px solid transparent;"><span class="hljs-ln-line hljs-ln-numbers" data-line-number="15">15</span><span class="hljs-ln-line hljs-ln-code" data-line-number="15"> </span></div><div class="catsoop-code-line" style="background-color: inherit; border-top: 3px solid transparent; border-bottom: 3px solid transparent;"><span class="hljs-ln-line hljs-ln-numbers" data-line-number="16">16</span><span class="hljs-ln-line hljs-ln-code" data-line-number="16">ans = subsequences([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>])</span></div></div></code></pre></section>
<div style="clear: both"></div>
<!--
REMOVED second version of subsequences()

<div class="multistep response" data-side-by-side-code style="width:55%" markdown>

<div class="step" data-in-line="14">
<img src="CURRENT/subseq_b1.png" width="500" />
<div class="step-label"></div>

`subsequences([1,2])` <br>
Let’s look at the other implementation that uses a helper function to
recursively compute subsequences. After the internal `helper` function is defined,
it is called with an empty tuple and the original `seq` as arguments.


</div>


<div class="step" data-in-line="6-10">
<img src="CURRENT/subseq_b2.png" width="500" />
<div class="step-label"></div>

`helper((), [1,2])` <br>
Because `seq` is nonempty, it falls into the recursive `else` case. In lines
8 and 9, `seq` is split into:

`first = 1`<br>
`rest = [2]`<br>

Then in line 10 `rest_seq` starts to be computed with the call to<br>
`helper(partial, rest)`.

</div>


<div class="step" data-in-line="6-10">
<img src="CURRENT/subseq_b3.png" width="500" />
<div class="step-label"></div>

`helper((), [2])` <br>
Because `seq` is nonempty, it falls into the recursive `else` case. In lines
8 and 9, `seq` is split into:

`first = 2`<br>
`rest = []`<br>

Then in line 10 `rest_seq` starts to be computed with the call to<br>
`helper(partial, rest)`.


</div>


<div class="step" data-in-line="3-5">
<img src="CURRENT/subseq_b4.png" width="500" />
<div class="step-label"></div>

`helper((), [])` <br>

Because `seq` is empty, we have reached the base case. The set containing
partial (the empty tuple) is returned to the<br>
`helper((), [2])` frame and stored in `rest_seq`.

</div>


<div class="step" data-in-line="11-12">
<img src="CURRENT/subseq_b5.png" width="500" />
<div class="step-label"></div>

`helper((), [2])` <br>

After `rest_seq` is found, the next recursive call to<br>
 `helper(partial + (first,), rest)`
is made to determine `first_seq`.

</div>


<div class="step" data-in-line="3-5">
<img src="CURRENT/subseq_b6.png" width="500" />
<div class="step-label"></div>

`helper((2,), [])` <br>

Because `seq `is empty, the base case has been reached and the set containing
the partial `(2,)` is returned to the `helper((), [2])` frame and stored in `first_seq`.

</div>


<div class="step" data-in-line="13">
<img src="CURRENT/subseq_b7.png" width="500" />
<div class="step-label"></div>

`helper((), [2])` <br>

Now that both recursive calls have finished executing, their results can be
combined into a new set which is returned to the top-level
`helper((), [1, 2])` frame.

</div>


<div class="step" data-in-line="11-12">
<img src="CURRENT/subseq_b8.png" width="500" />
<div class="step-label"></div>

`helper((), [1, 2])` <br>

Now that `rest_seq` has been found, the second recursive call to find
`first_seq` with partial `(1,)` starts executing.

</div>


<div class="step" data-in-line="6-10">
<img src="CURRENT/subseq_b9.png" width="500" />
<div class="step-label"></div>

`helper((1,), [2])` <br>

Because `seq` is nonempty, it falls into the recursive `else` case. In lines
8 and 9, `seq` is split into:

`first = 2`<br>
`rest = []`<br>
As before, the `rest_seq` is computed first.

</div>


<div class="step" data-in-line="3-5">
<img src="CURRENT/subseq_b10.png" width="500" />
<div class="step-label"></div>

`helper((1,), [])` <br>

Because `seq` is empty, this falls into the base case. A set containing the
partial `(1,)` is returned to the `helper((1,), [2])` frame that made the
recursive call.

</div>


<div class="step" data-in-line="11-12">
<img src="CURRENT/subseq_b11.png" width="500" />
<div class="step-label"></div>

`helper((1,), [2])` <br>

Now that `rest_seq` has been found, the second recursive call to find
`first_seq` with the partial `(1, 2)` starts executing.

</div>


<div class="step" data-in-line="3-5">
<img src="CURRENT/subseq_b12.png" width="500" />
<div class="step-label"></div>

`helper((1, 2), [])` <br>

Because `seq` is empty, this falls into the base case. A set containing the
partial `(1, 2)` is returned to the `helper((1,), [2])` frame that made the
recursive call.

</div>


<div class="step" data-in-line="13">
<img src="CURRENT/subseq_b13.png" width="500" />
<div class="step-label"></div>

`helper((1,), [2])` <br>

Now that both recursive calls finished executing, the results are combined into
a new set, returned, and stored in `first_seq` in the top-level
`helper((), [1, 2])` call.

</div>


<div class="step" data-in-line="13">
<img src="CURRENT/subseq_b14.png" width="500" />
<div class="step-label"></div>

`helper((), [1, 2])` <br>

Now that both recursive calls finished executing, the final helper results are
combined into a new set and returned to the original `subsequences([1, 2])` frame.

</div>


<div class="step" data-in-line="14-16">
<img src="CURRENT/subseq_b15.png" width="500" />
<div class="step-label"></div>

`subsequences([1, 2])` <br>

Now that the recursive helper finished executing, the result can be returned to
the global frame and stored in `ans`.

</div>



</div>

<div style="font-size: 90%" markdown>

```python-lines
def subsequences(seq):
  def helper(partial, seq):
    if not seq:
      # base case
      return {partial}
    else:
      # recursive case
      first = seq[0]
      rest = seq[1:]
      rest_seq = helper(partial, rest)
      first_seq = helper(partial + (first,),
                         rest)
      return first_seq | rest_seq
  return helper(tuple(), seq)

ans = subsequences([1,2])
```
</div>

<div style="clear: both"></div>

END REMOVED second version of subsequences()
-->
<p>
<!--START question q000003 --></p><section aria-label="Question">
<div class="question question-pythonic" id="cs_qdiv_q000003" style="position: static">
<div id="q000003_rendered_question">
<div id="catsoop_preamble_q000003"></div>
<div id="catsoop_prompt_q000003" style="display: inline;">How many total calls to <code>subsequences</code> will be made in the course
of evaluating <code>subsequences([4, 3, 2])</code>?<br></div><input aria-labelledby="catsoop_prompt_q000003" id="q000003" name="q000003" size="50" type="text" value="4">
</div><div>
<span id="q000003_buttons">
<button class="submit btn btn-catsoop" id="q000003_submit" onclick="catsoop.submit('q000003');" style="margin-top: 10px;">Submit</button>
<button class="clearanswer btn btn-catsoop" id="q000003_clearanswer" onclick="catsoop.clearanswer('q000003');" style="margin-top: 10px;">Clear Answer</button></span>
<span id="q000003_loading_wrapper" role="status">
<span id="q000003_loading" style="display:none;"><img class="catsoop-darkmode-invert" src="data:image/gif;base64,R0lGODlhEAAQAPIGAMLCwkJCQgAAAGJiYoKCgpKSkv///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAGACwAAAAAEAAQAAADMmi63P4wyklrAyEAGoQInAdOmGYBw7AxwLoMGcG2rkHEQFHQLTsQOd2mB9ERCpTWzpEAACH5BAkKAAYALAAAAgAKAA4AAAMraAYRoNAEIUJUs97VHgTD4EVDQ2xEM2wgMV5AUbyKLKNEvoxA3P8sYNCQAAAh+QQJCgAGACwAAAAACgAOAAADLWi6EAFrBSGCAmQ0as1wROFABuEM0TUQ5FUU7fK+aRkWNYDFqV4bOl8v+BMuEgAh+QQJCgAGACwAAAAADgAKAAADKmi6QAMrrhECkaaVVl+FRiFuAwEEghAoYxGhqgI0oPxlNSbPOcb3PqAkAQAh+QQJCgAGACwCAAAADgAKAAADKWhqUAUrLuekApA+MiDD4BYExAVGwzgsmNR0lgWMXmwEghDYCq7zDFoCACH5BAkKAAYALAYAAAAKAA4AAAMqaADWros9GEuRUBE7jeUTYGEhMZANEQREN6xDJ54PsKJGIAhBp/OyWyMBACH5BAkKAAYALAYAAgAKAA4AAAMpaKoA+609Fie1C5Tipt7WRhRWw0ED0T1DEAyMq7mEEghCAKTdnZcySwIAIfkEBQoABgAsAgAGAA4ACgAAAytoumwALb4X2YR1URACVkBRYIEgBIw4KuUJDERIzGD3doMhfguBZyAYT5EAADs="><span class="screenreader-only-clip">Loading...</span></span>
</span>
<span id="q000003_score_display" role="status"></span>
<div class="nsubmits_left" id="q000003_nsubmits_left" role="status">You have submitted this assignment 1 time.</div></div>
<div class="solution" id="q000003_solution_container">
<div id="q000003_solution">
<p><b>Solution:</b> <tt>4</tt></p><p>
</p><p></p>
</div>
<div id="q000003_solution_explanation"><hr><p><b>Explanation:</b></p>
<p>We end up making a linear number of calls to
<code>subsequence</code> --- one for each element in the list plus one call with the empty list
to reach the base case.</p>
</div>
</div>
<div aria-atomic="true" id="q000003_message" role="status"><img alt="Correct" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAMAAADzapwJAAABQVBMVEUAAAAGDQAAAAAAAAAAAAAAAAAAAACGqlBIfBNciiZGeg9Eeg5Feg5Gew9CdgpCdgxDehJvmDN1nj9plTVWhRtOgRlMfxZjkS5Geg9EeA5Geg5HfBBHew5GeQ5Cdg1CeAxDegtHgACVtmV+pURPgBp4oEBEeQx+o0p8oklFeg5YiCJIfRFEdQ5GehBHeg9CdwtEdQxEeg5Fdw5DeQ1Eegs2YQlCdwpCeAxDeQ0PHgBGdA9AdgkAAAAAAAARIgChwGKPs0qjwXKStUyFqD6CqDfJ3p+91Ji00XqlwmypyGihwGiauluWtlicwFKXulGTuEmMr0WOs0OKr0CGrDuEqjrR46zC2Ji+1ZC804640oK1z4CxzHywynqsx3enw3WYuWidvF+fwlqgxFePsFWSs1KIrE2Wu0uOr0qGqkeCpj50nDHRgoCJAAAAP3RSTlMABA0HEgoQ/ff17+jbxi8nDvz39vb29fTy7dPQoJeLVRUJ/f39+vn49/f118jAvrKWcW9jWllJQjkiIRwZFg8RajNxAAAA+klEQVQY06XQ1bLCMBAGYNJCHXfnuLtrFXc5gru+/wMQhhZouWRvMvNt/kx2dbvUC+V/3tY9OhZzX5i0HDqNxn/aRo2aXb/JXtR+p2HjfjUb5xmg1kfyL9v9d76q1UK1kqPaSWAFy1TQVs+zvCci4wd9fA8PE9HM5Rvkg5JlcJ68iuh8OFtkcb/ywrUtlUscUTfniaKQIlaj0AdsoZTuH2aEUsceXM/AuNNcmcsIZW7otWwsIuCacBVJqgycYdWPwx7rWJQKVu0y3n0OUZyemVUIAPp9S8wcIQRBDCgAsqIGBNM/eS/fPr/02KKx5IXDBixsfV2OwCYERebVjyGAvqhE3QAAAABJRU5ErkJggg=="><br></div>
</div>
</section>
<!--END question q000003 -->
<p></p>
<p><a class="anchor" name="catsoop_section_7"></a><a class="anchor" name="_choosing_the_right_recursive_subproblem"></a></p><h2 class="cs_section_title">7) Choosing the Right Recursive Subproblem<a class="cs_permalink" href="#_choosing_the_right_recursive_subproblem">§</a></h2><p></p>
<p>Let's look at another example.  Suppose we want to convert an integer
 to a string representation with a given base, following this spec:</p>
<section aria-label="Code block"><pre><code class="language-python hljs highlighted"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">number_to_string</span>(<span class="hljs-params">n, b</span>):</span>
    <span class="hljs-string">"""
    Given an integer n and base b (where 2 &lt;= b &lt;= 10),
    returns n represented as a string in base-b notation,
    without any unnecessary leading zeroes.

    &gt;&gt;&gt; number_to_string(-829, 10)
    "-829"
    &gt;&gt;&gt; number_to_string(5, 2)
    "101"
    &gt;&gt;&gt; number_to_string(0, 10)
    "0"
    """</span>
</code></pre></section>
<p>Let's develop a recursive implementation of this function.  One 
recursive case here is straightforward -- we can handle negative 
integers simply by recursively calling for the representation of the 
corresponding positive integer:</p>
<section aria-label="Code block"><pre><code class="language-python hljs highlighted"><span class="hljs-keyword">if</span> n &lt; <span class="hljs-number">0</span>:
    <span class="hljs-keyword">return</span> <span class="hljs-string">"-"</span> + number_to_string(-n, b)
</code></pre></section>
<p>This shows that the recursive subproblem can be smaller or simpler in
 more subtle ways than just the value of a numeric parameter or the size
 of a list parameter.  We have still effectively reduced the problem by 
reducing it from all possible integers to just positive integers.</p>
<p>The next question is, given that we have a positive <code>n</code>, say <code>n = 829</code>
 in base 10, how should we decompose it into a recursive subproblem?  
Thinking about the number as we would write it down on paper, we could 
either start with 8 (the leftmost or highest-order digit) or 9 (the 
rightmost or lowest-order digit).  Starting at the left end seems 
natural, because that's the direction we write, but it's harder in this 
case because we would need to first find the number of digits in the 
number to figure out how to extract the leftmost digit.  Instead, a 
better way to decompose <code>n</code> is to take its remainder modulo <code>b</code> (which gives the <em>rightmost</em> digit) and also divide by <code>b</code> (which gives the subproblem, the remaining higher-order digits):</p>
<section aria-label="Code block"><pre><code class="language-python hljs highlighted">digits = <span class="hljs-string">"0123456789"</span>
<span class="hljs-keyword">return</span> number_to_string(n // b, b) + digits[n % b]
</code></pre></section>
<p>In general, <strong>think about several ways to break down the problem and try to write the recursive cases.</strong>  You want to find the one that produces the simplest, most natural recursive case.</p>
<p>It remains to figure out what the base case is and include an <code>if</code> statement that distinguishes the base case from this recursive case.  Here is the function:</p>
<section aria-label="Code block"><pre><code class="language-python hljs highlighted"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">number_to_string</span>(<span class="hljs-params">n, b</span>):</span>
    <span class="hljs-string">"""
    Given an integer n and base b (where 2 &lt;= b &lt;= 10),
    returns n represented as a string in base-b notation.

    &gt;&gt;&gt; number_to_string(-829, 10)
    "-829"
    &gt;&gt;&gt; number_to_string(5, 2)
    "101"
    &gt;&gt;&gt; number_to_string(0, 10)
    "0"
    """</span>
    digits = <span class="hljs-string">"0123456789"</span>
    <span class="hljs-keyword">if</span> n &lt; <span class="hljs-number">0</span>:
        <span class="hljs-keyword">return</span> <span class="hljs-string">"-"</span> + number_to_string(-n, b)
    <span class="hljs-keyword">elif</span> IS_BASE_CASE:
        BASE_CASE
    <span class="hljs-keyword">else</span>:
        <span class="hljs-keyword">return</span> number_to_string(n // b, b) + digits[n % b]
</code></pre></section>
<p>
<!--START question number_to_string_base_case --></p><section aria-label="Question">
<div class="question question-multiplechoice" id="cs_qdiv_number_to_string_base_case" style="position: static">
<div id="number_to_string_base_case_rendered_question">
<div id="catsoop_preamble_number_to_string_base_case"></div>
<div id="catsoop_prompt_number_to_string_base_case" style="display: inline;">Which of the following can be substituted for the <code>IS_BASE_CASE</code> and <code>BASE_CASE</code> to make the code correct?
It may help to think through the doctest cases shown in the docstring.<br></div><fieldset aria-labelledby="catsoop_prompt_number_to_string_base_case">
<div style="margin-bottom: 10px;"><input id="number_to_string_base_case_opt0" name="number_to_string_base_case_opt0" type="checkbox" value="0"><label for="number_to_string_base_case_opt0"><section aria-label="Code block"><pre><code class="language-python hljs highlighted"><span class="hljs-keyword">elif</span> n == <span class="hljs-number">0</span>:
    <span class="hljs-keyword">return</span> <span class="hljs-string">"0"</span>
</code></pre></section>
</label></div>
<div style="margin-bottom: 10px;"><input id="number_to_string_base_case_opt1" name="number_to_string_base_case_opt1" type="checkbox" value="1"><label for="number_to_string_base_case_opt1"><section aria-label="Code block"><pre><code class="language-python hljs highlighted"><span class="hljs-keyword">elif</span> n == <span class="hljs-number">0</span>:
    <span class="hljs-keyword">return</span> <span class="hljs-string">""</span>
</code></pre></section>
</label></div>
<div style="margin-bottom: 10px;"><input checked="checked" id="number_to_string_base_case_opt2" name="number_to_string_base_case_opt2" type="checkbox" value="2"><label for="number_to_string_base_case_opt2"><section aria-label="Code block"><pre><code class="language-python hljs highlighted"><span class="hljs-keyword">elif</span> n &lt; b:
    <span class="hljs-keyword">return</span> str(n)
</code></pre></section>
</label></div>
<div style="margin-bottom: 10px;"><input checked="checked" id="number_to_string_base_case_opt3" name="number_to_string_base_case_opt3" type="checkbox" value="3"><label for="number_to_string_base_case_opt3"><section aria-label="Code block"><pre><code class="language-python hljs highlighted"><span class="hljs-keyword">elif</span> n &lt; b:
    <span class="hljs-keyword">return</span> digits[n]
</code></pre></section>
</label></div>
</fieldset><input id="number_to_string_base_case" name="number_to_string_base_case" type="hidden" value="{&quot;number_to_string_base_case_opt2&quot;:true,&quot;number_to_string_base_case_opt3&quot;:true}">
<script type="text/javascript">
// @license magnet:?xt=urn:btih:0b31508aeb0634b347b8270c7bee4d411b5d4109&dn=agpl-3.0.txt AGPL-v3
var number_to_string_base_case_selected = {'number_to_string_base_case_opt2': true,'number_to_string_base_case_opt3': true};
document.getElementById("number_to_string_base_case").value = JSON.stringify(number_to_string_base_case_selected);
document.querySelectorAll("input[type=checkbox][name^=number_to_string_base_case_opt]").forEach(function(r){
    r.addEventListener("click", function(){
        number_to_string_base_case_selected[this.getAttribute("name")] = this.checked;
    document.getElementById("number_to_string_base_case").value = JSON.stringify(number_to_string_base_case_selected);
    });
});
// @license-end
</script>
</div><div>
<span id="number_to_string_base_case_buttons">
<button class="submit btn btn-catsoop" id="number_to_string_base_case_submit" onclick="catsoop.submit('number_to_string_base_case');" style="margin-top: 10px;">Submit</button>
<button class="clearanswer btn btn-catsoop" id="number_to_string_base_case_clearanswer" onclick="catsoop.clearanswer('number_to_string_base_case');" style="margin-top: 10px;">Clear Answer</button></span>
<span id="number_to_string_base_case_loading_wrapper" role="status">
<span id="number_to_string_base_case_loading" style="display:none;"><img class="catsoop-darkmode-invert" src="data:image/gif;base64,R0lGODlhEAAQAPIGAMLCwkJCQgAAAGJiYoKCgpKSkv///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAGACwAAAAAEAAQAAADMmi63P4wyklrAyEAGoQInAdOmGYBw7AxwLoMGcG2rkHEQFHQLTsQOd2mB9ERCpTWzpEAACH5BAkKAAYALAAAAgAKAA4AAAMraAYRoNAEIUJUs97VHgTD4EVDQ2xEM2wgMV5AUbyKLKNEvoxA3P8sYNCQAAAh+QQJCgAGACwAAAAACgAOAAADLWi6EAFrBSGCAmQ0as1wROFABuEM0TUQ5FUU7fK+aRkWNYDFqV4bOl8v+BMuEgAh+QQJCgAGACwAAAAADgAKAAADKmi6QAMrrhECkaaVVl+FRiFuAwEEghAoYxGhqgI0oPxlNSbPOcb3PqAkAQAh+QQJCgAGACwCAAAADgAKAAADKWhqUAUrLuekApA+MiDD4BYExAVGwzgsmNR0lgWMXmwEghDYCq7zDFoCACH5BAkKAAYALAYAAAAKAA4AAAMqaADWros9GEuRUBE7jeUTYGEhMZANEQREN6xDJ54PsKJGIAhBp/OyWyMBACH5BAkKAAYALAYAAgAKAA4AAAMpaKoA+609Fie1C5Tipt7WRhRWw0ED0T1DEAyMq7mEEghCAKTdnZcySwIAIfkEBQoABgAsAgAGAA4ACgAAAytoumwALb4X2YR1URACVkBRYIEgBIw4KuUJDERIzGD3doMhfguBZyAYT5EAADs="><span class="screenreader-only-clip">Loading...</span></span>
</span>
<span id="number_to_string_base_case_score_display" role="status"></span>
<div class="nsubmits_left" id="number_to_string_base_case_nsubmits_left" role="status">You have submitted this assignment 3 times.</div></div>
<div class="solution" id="number_to_string_base_case_solution_container">
<div id="number_to_string_base_case_solution">
<p><b>Solution:</b></p>
<ul style="display:table; list-style: none; padding-left: 10px;"><li style="display: table-row;"><span style="display:table-cell; padding-bottom:20px;"><input disabled="disabled" type="checkbox"> <section aria-label="Code block"><pre><code class="language-python hljs highlighted"><span class="hljs-keyword">elif</span> n == <span class="hljs-number">0</span>:
    <span class="hljs-keyword">return</span> <span class="hljs-string">"0"</span>
</code></pre></section>
</span></li><li style="display: table-row;"><span style="display:table-cell; padding-bottom:20px;"><input disabled="disabled" type="checkbox"> <section aria-label="Code block"><pre><code class="language-python hljs highlighted"><span class="hljs-keyword">elif</span> n == <span class="hljs-number">0</span>:
    <span class="hljs-keyword">return</span> <span class="hljs-string">""</span>
</code></pre></section>
</span></li><li style="display: table-row;"><span style="display:table-cell; padding-bottom:20px;"><input checked="checked" disabled="disabled" type="checkbox"> <section aria-label="Code block"><pre><code class="language-python hljs highlighted"><span class="hljs-keyword">elif</span> n &lt; b:
    <span class="hljs-keyword">return</span> str(n)
</code></pre></section>
</span></li><li style="display: table-row;"><span style="display:table-cell; padding-bottom:20px;"><input checked="checked" disabled="disabled" type="checkbox"> <section aria-label="Code block"><pre><code class="language-python hljs highlighted"><span class="hljs-keyword">elif</span> n &lt; b:
    <span class="hljs-keyword">return</span> digits[n]
</code></pre></section>
</span></li></ul>
</div>
<div id="number_to_string_base_case_solution_explanation"><hr><p><b>Explanation:</b></p>
<p>The first choice puts a leading zero in front of every number -- it would make <code>number_to_string(-829, 10)</code> return <code>"-0829"</code>, failing that test case.</p>
<p>The second choice fixes the leading-zero problem but outputs the empty string for <code>number_to_string(0, 10)</code>, when we want <code>"0"</code>.</p>
<p>The third and fourth choices do the right thing -- once <code>n</code> fits in a single digit (in base <code>b</code>), it outputs that digit, which avoids the leading-zero problem and still produces <code>0</code> when that's what we want.</p>
</div>
</div>
<div aria-atomic="true" id="number_to_string_base_case_message" role="status"><img alt="Correct" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAMAAADzapwJAAABQVBMVEUAAAAGDQAAAAAAAAAAAAAAAAAAAACGqlBIfBNciiZGeg9Eeg5Feg5Gew9CdgpCdgxDehJvmDN1nj9plTVWhRtOgRlMfxZjkS5Geg9EeA5Geg5HfBBHew5GeQ5Cdg1CeAxDegtHgACVtmV+pURPgBp4oEBEeQx+o0p8oklFeg5YiCJIfRFEdQ5GehBHeg9CdwtEdQxEeg5Fdw5DeQ1Eegs2YQlCdwpCeAxDeQ0PHgBGdA9AdgkAAAAAAAARIgChwGKPs0qjwXKStUyFqD6CqDfJ3p+91Ji00XqlwmypyGihwGiauluWtlicwFKXulGTuEmMr0WOs0OKr0CGrDuEqjrR46zC2Ji+1ZC804640oK1z4CxzHywynqsx3enw3WYuWidvF+fwlqgxFePsFWSs1KIrE2Wu0uOr0qGqkeCpj50nDHRgoCJAAAAP3RSTlMABA0HEgoQ/ff17+jbxi8nDvz39vb29fTy7dPQoJeLVRUJ/f39+vn49/f118jAvrKWcW9jWllJQjkiIRwZFg8RajNxAAAA+klEQVQY06XQ1bLCMBAGYNJCHXfnuLtrFXc5gru+/wMQhhZouWRvMvNt/kx2dbvUC+V/3tY9OhZzX5i0HDqNxn/aRo2aXb/JXtR+p2HjfjUb5xmg1kfyL9v9d76q1UK1kqPaSWAFy1TQVs+zvCci4wd9fA8PE9HM5Rvkg5JlcJ68iuh8OFtkcb/ywrUtlUscUTfniaKQIlaj0AdsoZTuH2aEUsceXM/AuNNcmcsIZW7otWwsIuCacBVJqgycYdWPwx7rWJQKVu0y3n0OUZyemVUIAPp9S8wcIQRBDCgAsqIGBNM/eS/fPr/02KKx5IXDBixsfV2OwCYERebVjyGAvqhE3QAAAABJRU5ErkJggg=="></div>
</div>
</section>
<!--END question number_to_string_base_case -->
<p></p>
<p><a class="anchor" name="catsoop_section_8"></a><a class="anchor" name="_summary"></a></p><h2 class="cs_section_title">8) Summary<a class="cs_permalink" href="#_summary">§</a></h2><p></p>
<p>We've looked at several functions here and showed how to write them recursively, sometimes in different ways.
Along the way, we've seen that:</p>
<ul>
<li>every recursive function needs one or more base cases and one or more recursive cases</li>
<li>the recursive cases should make the problem smaller or simpler in some way</li>
</ul>
<p>We've focused closely on recursion in this reading, aiming to write every function recursively, even when there was an <em>iterative</em>
 approach that might have been just as natural.
Next week's reading will delve more deeply into the question of 
recursion vs. iteration, showing that they are interchangeable (every 
iterative algorithm can be made recursive, and vice versa) and discuss 
when it's more natural to use one or the other.
<script type="text/javascript">
        if (MathJax) {
            // Disable the MathJax right-click menu,
            // so that screenreader doesn't say "clickable" on every math element
            // Based on https://docs.mathjax.org/en/latest/web/configuration.html#configuring-mathjax-after-it-is-loaded
            MathJax.config.options = MathJax.config.options ?? {};
            MathJax.config.options.enableMenu = false;
            MathJax.startup.getComponents();
        }


        // give the hamburger menu icon an accessible label
        document.addEventListener('DOMContentLoaded', () => {
            document.querySelector("a.icon")?.setAttribute('aria-label', 'site-menu');
        });
        
        // based on catsoop.modal
        catsoop.vprof_survey = function (header, text, vprof_link, link_timestamp) {
          return new Promise(function (resolve, reject) {
            var response = {
            "response": null,
            "vprof_link": vprof_link,
            "link_timestamp": link_timestamp,
            "response_timestamp": null,
            "make_modal_timestamp": Date.now(),
            };
            var content = document.createElement("dialog");
            content.classList = ["catsoop-modal-content"];
            content.setAttribute("aria-labelledby", "catsoop-dialog-header");
            content.setAttribute("aria-describedby", "catsoop-dialog-body");
            content.addEventListener("keydown", function (e) {
              // this piece traps focus in the dialog while it is open
              // based on https://hidde.blog/using-javascript-to-trap-focus-in-an-element/
              if (!content.open) {
                return;
              }
              if (e.key === "Tab" || e.keyCode === 9) {
                if (e.shiftKey) {
                  if (document.activeElement === content.focusable[0]) {
                    content.focusable[content.focusable.length - 1].focus();
                    e.preventDefault();
                  }
                } else if (
                  document.activeElement ===
                  content.focusable[content.focusable.length - 1]
                ) {
                  content.focusable[0].focus();
                  e.preventDefault();
                }
              }
            });
            content.focusable = [];

            var mbody = document.createElement("div");
            mbody.classList = ["catsoop-modal-body"];

            var close_button = document.createElement("button");
            close_button.classList = ["catsoop-modal-close"];
            close_button.innerHTML = "&times;";
            close_button.setAttribute("aria-label", "Close");
            close_button.onclick = function () {
              content.close(JSON.stringify(Object.assign(response, {"response": "cancel", "response_timestamp": Date.now()})));
            };
            content.focusable.push(close_button);
            mbody.append(close_button);

            var title = document.createElement("span");
            title.id = "catsoop-dialog-header";
            title.classList = ["catsoop-modal-header"];
            title.appendChild(document.createTextNode(header));
            title.setAttribute("role", "heading");
            mbody.appendChild(title);

            var body = document.createElement("p");
            body.id = "catsoop-dialog-body";
            body.innerHTML = text + "<br/>";
            mbody.appendChild(body);

            var buttons = document.createElement("span");
            var yes_button = document.createElement("button");
            yes_button.innerText = "Yes";
            yes_button.classList = ["btn btn-catsoop"];
            yes_button.addEventListener("click", function () {
              content.close(JSON.stringify(Object.assign(response, {"response": "yes", "response_timestamp": Date.now()})));
            });
            yes_button.setAttribute("autofocus", true);
            content.focusable.push(yes_button);


            var no_button = document.createElement("button");
            no_button.innerText = "No";
            no_button.classList = ["btn btn-catsoop"];
            no_button.addEventListener("click", function () {
              content.close(JSON.stringify(Object.assign(response, {"response": "no", "response_timestamp": Date.now()})));
            });
            content.focusable.push(no_button);

            buttons.appendChild(yes_button);
            buttons.appendChild(document.createTextNode(" "));
            buttons.appendChild(no_button);
            mbody.appendChild(buttons);

            content.addEventListener("close", function () {
              content.remove();
              last_clicked_vprof_report[0] = null;
              last_clicked_vprof_report[1] = null;
              showing_vprof_survey[0] = false;
              (content.returnValue === "" ? reject : resolve)(content.returnValue);
            });

            content.appendChild(mbody);
            document.body.appendChild(content);
            content.showModal();
          });
        };


        function postVprofSurveyResponse(value){
            var data = JSON.parse(value);
            var encoded_form_pairs = [];
            for (var name in data){
                encoded_form_pairs.push(encodeURIComponent(name) + '=' + encodeURIComponent(data[name]));
            }
            //console.log("data", data)
            var form = encoded_form_pairs.join('&').replace(/%20/g, '+');
            //console.log("form data", form);

            var request = new XMLHttpRequest();
            request.onload = function(){
                var msg = request.response;
                var data = JSON.parse(msg);
                //if(data.ok){
                //    console.log("post success")
                //}else{
                //    concole.log("post error", msg, JSON.stringify(data))
                //}
            }

            request.open('POST', "https://py.mit.edu/spring25/staffonly/analytics/vprof_survey_collector", true);
            request.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
            request.send(form);

        }

        var showing_vprof_survey = [false];
        var last_clicked_vprof_report = [null, null];

        document.addEventListener('visibilitychange', e=>{
          if (document.visibilityState === 'visible' &&
              last_clicked_vprof_report[0] !== null &&
              !showing_vprof_survey[0]) {
              // show vorif yes/no survey
              catsoop.vprof_survey("vprof survey",
                "Did <a href='" + last_clicked_vprof_report[0] + "' target='_blank'> this vprof report</a> help you find and/or fix an efficiency bug?",
                last_clicked_vprof_report[0], last_clicked_vprof_report[1]).then(postVprofSurveyResponse, postVprofSurveyResponse);
              showing_vprof_survey[0] = true;
            }
        })

        var vprof_links  = document.getElementsByClassName("vprof_link");
        for (var i=0; i < vprof_links.length; i++) {
            let my_link = vprof_links[i].href
            if ((typeof my_link === 'string' || my_link instanceof String) && !my_link.includes("#")) {
                vprof_links[i].href = my_link + '#78111110101-50b7ffceb795e65fe8dba48b66ad8351b38526a56061272e905a62a2839c2975';
            }
            vprof_links[i].onclick = function(){
              last_clicked_vprof_report[0] = this.href;
              last_clicked_vprof_report[1] = Date.now();
            }
        }


    </script>
<script type="text/javascript">
catsoop.callbacks['submit'] = function(ok, names, status, response){
    response = JSON.parse(response);
    if (response[names[0]].score == 1){
        document.getElementById(names[0] + '_viewanswer').click();
    }
}
</script></p>
<script type="text/javascript">
// @license magnet:?xt=urn:btih:0b31508aeb0634b347b8270c7bee4d411b5d4109&dn=agpl-3.0.txt AGPL-v3
catsoop.all_questions = ['env1', 'q000000', 'q000001', 'q000002', 'subsequences_x', 'subsequences_x_canonicalized', 'subsequences_first_recursive_call', 'subsequences_returned_by_first_recursive_call', 'subsequences_redundant_recursion', 'q000003', 'number_to_string_base_case'];
catsoop.username = 'tjampa';
catsoop.this_path = 'https://py.mit.edu/spring25/readings/recursion';
catsoop.path_info = ['spring25', 'readings', 'recursion'];
catsoop.course = 'spring25';
catsoop.url_root = 'https://py.mit.edu';
catsoop.imp = '';
catsoop.skip_alert = ["env1", "q000000", "q000001", "q000002", "subsequences_x", "subsequences_x_canonicalized", "subsequences_first_recursive_call", "subsequences_returned_by_first_recursive_call", "subsequences_redundant_recursion", "q000003", "number_to_string_base_case"];
catsoop.viewans_confirm = "Are you sure?  Viewing the answer will prevent any further submissions to this question.  Press 'OK' to view the answer, or press 'Cancel' if you have changed your mind.";

// @license-end</script>
<div id="cs_footnotes" style="display:none;"></div>
</div>
</div>
<div class="cs_right_menu"></div>
</div>
<footer>
<nav aria-label="Breadcrumbs" class="cs_navigation cs_bottom_navigation" id="cs_bottom_navigation"><li><a href="https://py.mit.edu/spring25">Home</a></li><li><a href="https://py.mit.edu/spring25/readings">Course Readings</a></li><li><a href="https://py.mit.edu/spring25/readings/recursion">Recursion</a></li></nav>
<div class="cs_footer">
      This page was last updated on Thursday March 20, 2025 at 01:42:56 PM (revision <code>21208342</code>).<br>&nbsp;<br>
<center><img src="Recursion%20_%20Course%20Readings%20_%206.101%20Spring%202025_files/cc-by-sa.svg" style="width: 2cm;"></center><div style="max-width: 600px; margin-bottom:1em; margin-left:auto; margin-right:auto;">Except where otherwise noted, these readings are licensed under a<br><a href="http://creativecommons.org/licenses/by-sa/4.0/" rel="license" target="_blank">Creative Commons&nbsp;BY-SA&nbsp;4.0</a> license.  Portions of the readings were derived from<br>or inspired by the <a href="https://web.mit.edu/6.031/www/sp25/" target="_blank">6.031 Course Notes</a>, the <a href="https://hz.mit.edu/catsoop/6.145" target="_blank">6.145 Course Notes</a>, and the 6.01 Course Notes.
</div>
<pre class="catsooplogo" style="font-size:50%;">\            
/    /\__/\  
\__=(  o_O )=
(__________) 
 |_ |_ |_ |_ </pre>
      Powered by <a href="https://catsoop.org/" target="_blank">CAT-SOOP</a> v19.0.6+hg.14.f36ce1d1 "Korat" (LTS) (development snapshot).<br>
      CAT-SOOP is <a href="https://www.fsf.org/about/what-is-free-software" target="_blank">Free/Libre Software</a>, available under the terms<br>of the <a href="https://py.mit.edu/_util/license" target="_blank">GNU Affero General Public License, version 3</a>.<br>
<a download="" href="https://py.mit.edu/_util/source.zip" target="_blank">Download Source Code</a><br>
<a href="https://py.mit.edu/_util/jslicense.html" rel="jslicense" target="_blank">Javascript License Information</a>
</div>
</footer>



</body></html>